{"title":"Golang基础入门","uid":"401056d31ba23a246721cb99d93af09c","slug":"csdn/Golang基础入门","date":"2023-09-13T14:07:24.000Z","updated":"2025-02-17T03:15:46.382Z","comments":true,"path":"api/articles/csdn/Golang基础入门.json","keywords":"Stephen web3","cover":[],"content":"<link rel=\"stylesheet\" href=\"/owl.css\"><link rel=\"stylesheet\" class=\"aplayer-secondary-style-marker\" href=\"/assets/css/APlayer.min.css\"><script src=\"/assets/js/APlayer.min.js\" class=\"aplayer-secondary-script-marker\"></script><script class=\"meting-secondary-script-marker\" src=\"/assets/js/Meting.min.js\"></script><span id=\"more\"></span>\n\n<h4 id=\"文章目录\"><a href=\"#文章目录\" class=\"headerlink\" title=\"文章目录\"></a>文章目录</h4><ul>\n<li><a href=\"#Golang_5\">Golang基础入门</a></li>\n<li><ul>\n<li><ul>\n<li><a href=\"#01__7\">0.1 简介</a></li>\n<li><a href=\"#02__13\">0.2 先决条件</a></li>\n<li><a href=\"#03__19\">0.3 参考文献</a></li>\n</ul>\n</li>\n<li><a href=\"#Go_37\">模块一：初识Go</a></li>\n<li><ul>\n<li><a href=\"#11__Golang_39\">1.1 什么是 Golang？</a></li>\n<li><ul>\n<li><a href=\"#111_Go_41\">1.1.1 Go发展历史</a></li>\n<li><a href=\"#112_Go_98\">1.1.2 Go的优劣</a></li>\n<li><a href=\"#113_Go_122\">1.1.3 Go的应用场景</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#Go_144\">模块二：Go环境配置</a></li>\n<li><ul>\n<li><a href=\"#21__146\">2.1 学习目标</a></li>\n<li><a href=\"#22_Golang_154\">2.2 安装Golang</a></li>\n<li><a href=\"#23_GOPATH_176\">2.3 配置GOPATH？</a></li>\n<li><a href=\"#24_VSCode_180\">2.4 VSCode的安装及配置</a></li>\n<li><a href=\"#25_Golang_217\">2.5 第一个Golang程序</a></li>\n<li><a href=\"#26_VSCodeGo_339\">2.6 VSCode的Go工具插件（一）</a></li>\n<li><a href=\"#27_GOROOTGOPATHGOPROXYGO111MODULE_369\">2.7 什么是GOROOT，GOPATH，GOPROXY，GO111MODULE？</a></li>\n<li><ul>\n<li><a href=\"#271_GOROOT_420\">2.7.1 配置GOROOT</a></li>\n<li><a href=\"#272_GOPROXYGO111MODULE_432\">2.7.2 配置GOPROXY和GO111MODULE</a></li>\n</ul>\n</li>\n<li><a href=\"#28_VSCodeGo_452\">2.8 VSCode的Go工具插件（二）</a></li>\n<li><a href=\"#29_go_modgo_work_461\">2.9 go mod，go work命令介绍</a></li>\n<li><ul>\n<li><a href=\"#291_GOPATHgo_mod_541\">2.9.1 GOPATH配置（可以不配，使用go mod管理）</a></li>\n</ul>\n</li>\n<li><a href=\"#1VSCode_568\">拓展1：VSCode文件夹分层显示</a></li>\n<li><a href=\"#2Goland_575\">拓展2：Goland的方便之处（小特性）</a></li>\n</ul>\n</li>\n<li><a href=\"#Go_583\">模块三：Go基础语法</a></li>\n<li><ul>\n<li><a href=\"#31__585\">3.1 学习目标</a></li>\n<li><a href=\"#32__591\">3.2 标识符与关键字</a></li>\n<li><ul>\n<li><a href=\"#321_Go_601\">3.2.1 Go关键字</a></li>\n<li><a href=\"#322__607\">3.2.2 常量</a></li>\n<li><a href=\"#323__613\">3.2.3 数据类型</a></li>\n<li><a href=\"#324__619\">3.2.4 函数</a></li>\n</ul>\n</li>\n<li><a href=\"#33__625\">3.3 操作符与表达式</a></li>\n<li><ul>\n<li><a href=\"#331__635\">3.3.1 算法术运算符</a></li>\n<li><a href=\"#332__658\">3.3.2 关系运算符</a></li>\n<li><a href=\"#333__684\">3.3.3 逻辑运算符</a></li>\n<li><a href=\"#334__705\">3.3.4 位运算符</a></li>\n<li><a href=\"#335__748\">3.3.5 赋值运算符</a></li>\n</ul>\n</li>\n<li><a href=\"#34__800\">3.4 变量、常量、字面量</a></li>\n<li><ul>\n<li><a href=\"#341__802\">3.4.1 变量</a></li>\n<li><ul>\n<li><a href=\"#3411__804\">3.4.1.1 变量类型</a></li>\n<li><a href=\"#3412__818\">3.4.1.2 变量声明</a></li>\n<li><a href=\"#3413__850\">3.4.1.3 变量的初始化</a></li>\n</ul>\n</li>\n<li><a href=\"#342__936\">3.4.2 常量</a></li>\n<li><ul>\n<li><a href=\"#3421_iota_968\">3.4.2.1 iota</a></li>\n</ul>\n</li>\n<li><a href=\"#343__1032\">3.4.3 字面量</a></li>\n<li><a href=\"#344__1045\">3.4.4 变量作用域</a></li>\n</ul>\n</li>\n<li><a href=\"#35__1064\">3.5 注释</a></li>\n<li><ul>\n<li><a href=\"#351__1066\">3.5.1 注释的形式</a></li>\n<li><a href=\"#352__1106\">3.5.2 注释的位置</a></li>\n</ul>\n</li>\n<li><a href=\"#36_Go__1122\">3.6 Go 语言变量、常量命名规则</a></li>\n<li><a href=\"#37_Go__1131\">3.7 Go 语言代码风格</a></li>\n</ul>\n</li>\n<li><a href=\"#Go_1154\">模块四：Go数据类型</a></li>\n<li><ul>\n<li><a href=\"#41__1156\">4.1 学习目标</a></li>\n<li><a href=\"#42__1161\">4.2 数据类型概览</a></li>\n<li><ul>\n<li><a href=\"#421__1163\">4.2.1 基础数据类型</a></li>\n<li><a href=\"#422__1277\">4.2.2 复合数据类型</a></li>\n<li><a href=\"#423__1290\">4.2.3 自定义类型</a></li>\n</ul>\n</li>\n<li><a href=\"#43__1309\">4.3 数组</a></li>\n<li><ul>\n<li><a href=\"#431__1337\">4.3.1 数组的初始化</a></li>\n<li><ul>\n<li><a href=\"#4311__1339\">4.3.1.1 一维数组初始化</a></li>\n<li><a href=\"#4312__1368\">4.3.1.2 二维数组初始化</a></li>\n</ul>\n</li>\n<li><a href=\"#432__1387\">4.3.2 访问数组里的元素</a></li>\n<li><a href=\"#433__1395\">4.3.3 遍历数组</a></li>\n<li><a href=\"#434__len__cap_1429\">4.3.4 内置函数 len() 和 cap()</a></li>\n<li><a href=\"#435__1433\">4.3.5 数组拷贝和传参</a></li>\n</ul>\n</li>\n<li><a href=\"#44__1451\">4.4 切片</a></li>\n<li><ul>\n<li><a href=\"#441__1474\">4.4.1 创建切片的各种方式</a></li>\n<li><a href=\"#442__1509\">4.4.2 切片的初始化</a></li>\n<li><a href=\"#443_make_1574\">4.4.3 通过make来创建切片</a></li>\n<li><a href=\"#444_append_1608\">4.4.4 用append内置函数操作切片（切片追加）</a></li>\n<li><a href=\"#445_slicecap_1637\">4.4.5 slice中cap重新分配规律</a></li>\n<li><a href=\"#446__1656\">4.4.6 切片的拷贝</a></li>\n<li><a href=\"#447_resize_1729\">4.4.7 切片resize（调整大小）</a></li>\n<li><a href=\"#448__1808\">4.4.8 切片的传参</a></li>\n</ul>\n</li>\n<li><a href=\"#45__1829\">4.5 字符串</a></li>\n<li><ul>\n<li><a href=\"#451__1852\">4.5.1 字符串常用操作</a></li>\n<li><a href=\"#452__1877\">4.5.2 字符串拼接</a></li>\n<li><a href=\"#453__1911\">4.5.3 字符串中的字符</a></li>\n</ul>\n</li>\n<li><a href=\"#46__1941\">4.6 数据类型转换</a></li>\n<li><ul>\n<li><a href=\"#461_string_1990\">4.6.1 string和其他数据类型互转</a></li>\n</ul>\n</li>\n<li><a href=\"#47_map_2022\">4.7 map</a></li>\n<li><ul>\n<li><a href=\"#471_map_2026\">4.7.1 map定义</a></li>\n<li><a href=\"#472_map_2055\">4.7.2 map的初始化</a></li>\n<li><a href=\"#473_key_2064\">4.7.3 添加和删除key</a></li>\n<li><a href=\"#474__2074\">4.7.4 判断某个键是否存在</a></li>\n<li><a href=\"#475_map_2092\">4.7.5 遍历map</a></li>\n<li><a href=\"#476_map_2134\">4.7.6 按照指定顺序遍历map</a></li>\n<li><a href=\"#477_map_2171\">4.7.7 元素为map类型的切片</a></li>\n<li><a href=\"#478_map_2210\">4.7.8 值为切片类型的map</a></li>\n<li><a href=\"#479_map_2243\">4.7.9 map的键值类型</a></li>\n</ul>\n</li>\n<li><a href=\"#48_channel_2275\">4.8 channel（初步了解）</a></li>\n<li><a href=\"#maphashset_2331\">拓展：使用map实现hashset</a></li>\n</ul>\n</li>\n<li><a href=\"#_2419\">模块五：流程控制</a></li>\n<li><ul>\n<li><a href=\"#51__2421\">5.1 学习目标</a></li>\n<li><a href=\"#52_if_2426\">5.2 if</a></li>\n<li><ul>\n<li><a href=\"#521_ifelse_2462\">5.2.1 if-else的用法</a></li>\n<li><a href=\"#522_if_2477\">5.2.2 if表达式嵌套</a></li>\n</ul>\n</li>\n<li><a href=\"#53_switch_2507\">5.3 switch</a></li>\n<li><ul>\n<li><a href=\"#531_switchcase_2509\">5.3.1 switch-case</a></li>\n<li><a href=\"#532_switch_2557\">5.3.2 switch不带与后带表达式</a></li>\n<li><a href=\"#533_switch_Type_2587\">5.3.3 switch Type</a></li>\n<li><a href=\"#534_fallthrough_2633\">5.3.4 fallthrough</a></li>\n</ul>\n</li>\n<li><a href=\"#54_for_2664\">5.4 for</a></li>\n<li><ul>\n<li><a href=\"#541_for_init_condition_post___2668\">5.4.1 for init; condition; post { }</a></li>\n<li><a href=\"#542_for_condition___2703\">5.4.2 for condition { }</a></li>\n<li><a href=\"#543_for___2717\">5.4.3 for { }</a></li>\n<li><a href=\"#544_for_2739\">5.4.4 for循环嵌套</a></li>\n<li><a href=\"#545_for_range_2815\">5.4.5 for range</a></li>\n<li><ul>\n<li><a href=\"#5451_forfor_range_2956\">5.4.5.1 for和for range有什么区别?</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#546_breakcontinue_2974\">5.4.6 break与continue</a></li>\n<li><a href=\"#547_gotoLabel_3002\">5.4.7 goto与Label</a></li>\n</ul>\n</li>\n<li><a href=\"#_3068\">模块六：结构体</a></li>\n<li><ul>\n<li><a href=\"#61__3070\">6.1 学习目标</a></li>\n<li><a href=\"#62_Golang_3076\">6.2 Golang结构体</a></li>\n<li><a href=\"#63_Golang_type_3082\">6.3 Golang type关键词自定义类型和类型别名</a></li>\n<li><a href=\"#64__3133\">6.4 结构体的定义</a></li>\n<li><ul>\n<li><a href=\"#641__3168\">6.4.1 结构体实例化（第一种方法）</a></li>\n<li><a href=\"#642__3200\">6.4.2 结构体实例化（第二种方法）</a></li>\n<li><a href=\"#643__3232\">6.4.3 结构体实例化（第三种方法）</a></li>\n<li><a href=\"#644___3260\">6.4.4 结构体实例化（第四种方法） 键值对初始化</a></li>\n<li><a href=\"#645___3286\">6.4.5 结构体实例化（第五种方法） 结构体指针进行键值对初始化</a></li>\n<li><a href=\"#646___3332\">6.4.6 结构体实例化（第六种方法） 使用值的列表初始化</a></li>\n</ul>\n</li>\n<li><a href=\"#65__3365\">6.5 结构体内存布局</a></li>\n<li><a href=\"#66__3398\">6.6 结构体的可见性</a></li>\n<li><a href=\"#67__3403\">6.7 匿名结构体</a></li>\n<li><a href=\"#68__3416\">6.8 结构体中含有匿名成员</a></li>\n<li><a href=\"#69___3434\">6.9 结构体指针</a></li>\n<li><ul>\n<li><a href=\"#691__3479\">6.9.1 构造函数</a></li>\n</ul>\n</li>\n<li><a href=\"#610__3530\">6.10 方法和接收者</a></li>\n<li><ul>\n<li><a href=\"#6101__3583\">6.10.1 指针类型的接收者</a></li>\n<li><a href=\"#6102__3606\">6.10.2 值类型的接收者</a></li>\n<li><a href=\"#6103__3626\">6.10.3 什么时候应该使用指针类型接收者</a></li>\n<li><a href=\"#6104__3632\">6.10.4 任意类型添加方法</a></li>\n</ul>\n</li>\n<li><a href=\"#611__3661\">6.11 嵌套结构体</a></li>\n<li><ul>\n<li><a href=\"#6111__3697\">6.11.1 嵌套匿名结构体</a></li>\n<li><a href=\"#6112__3730\">6.11.2 嵌套结构体的字段名冲突</a></li>\n</ul>\n</li>\n<li><a href=\"#612__3769\">6.12 结构体的“继承”</a></li>\n<li><a href=\"#613__3810\">6.13 深拷贝与浅拷贝</a></li>\n<li><a href=\"#Golang_3854\">拓展：Golang结构体序列化与反序列化</a></li>\n<li><ul>\n<li><a href=\"#1_JSON__3856\">1.关于 JSON 数据</a></li>\n<li><a href=\"#2_JSON__3911\">2.结构体与 JSON 序列化</a></li>\n<li><a href=\"#3_Tag_3982\">3.结构体标签 Tag</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#_4051\">模块七：函数</a></li>\n<li><ul>\n<li><a href=\"#71__4053\">7.1 学习目标</a></li>\n<li><a href=\"#72__4060\">7.2 函数定义</a></li>\n<li><a href=\"#73__4098\">7.3 函数调用</a></li>\n<li><a href=\"#74__4127\">7.4 函数参数</a></li>\n<li><ul>\n<li><a href=\"#741__4129\">7.4.1 类型简写</a></li>\n<li><a href=\"#742__4141\">7.4.2 可变参数</a></li>\n</ul>\n</li>\n<li><a href=\"#75__4201\">7.5 函数返回值</a></li>\n<li><ul>\n<li><a href=\"#751__4205\">7.5.1 函数多返回值</a></li>\n<li><a href=\"#752__4242\">7.5.2 返回值命名</a></li>\n</ul>\n</li>\n<li><a href=\"#76__4256\">7.6 函数变量作用域</a></li>\n<li><ul>\n<li><a href=\"#761__4258\">7.6.1 全局变量</a></li>\n<li><a href=\"#762__4282\">7.6.2 局部变量</a></li>\n</ul>\n</li>\n<li><a href=\"#77__4329\">7.7 函数类型与变量</a></li>\n<li><ul>\n<li><a href=\"#771__4331\">7.7.1 定义函数类型</a></li>\n<li><a href=\"#772__4360\">7.7.2 函数类型变量</a></li>\n</ul>\n</li>\n<li><a href=\"#78__4391\">7.8 高阶函数</a></li>\n<li><ul>\n<li><a href=\"#781__4395\">7.8.1 函数作为参数</a></li>\n<li><a href=\"#782__4419\">7.8.2 函数作为返回值</a></li>\n</ul>\n</li>\n<li><a href=\"#79__4454\">7.9 匿名函数和闭包</a></li>\n<li><ul>\n<li><a href=\"#791__4456\">7.9.1 匿名函数</a></li>\n<li><a href=\"#792__4489\">7.9.2 闭包</a></li>\n<li><ul>\n<li><a href=\"#7921__1_4522\">7.9.2.1 闭包进阶示例 1</a></li>\n<li><a href=\"#7922__2_4548\">7.9.2.2 闭包进阶示例 2</a></li>\n<li><a href=\"#7923__3_4576\">7.9.2.3 闭包进阶示例 3</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#710_defer__4606\">7.10 defer 语句</a></li>\n<li><ul>\n<li><a href=\"#7101_defer_4643\">7.10.1 规则一：延迟函数的参数在defer语句出现时就已经确定下来了</a></li>\n<li><a href=\"#7102_defer_4660\">7.10.2 规则二：延迟函数执行按后进先出顺序执行，即先出现的defer最后执行</a></li>\n<li><a href=\"#7103__4668\">7.10.3 规则三：延迟函数可能操作主函数的具名返回值</a></li>\n<li><ul>\n<li><a href=\"#71031__4674\">7.10.3.1 函数返回过程</a></li>\n<li><a href=\"#71032__4714\">7.10.3.2 主函数拥有匿名返回值，返回字面值</a></li>\n<li><a href=\"#71033__4734\">7.10.3.3 主函数拥有匿名返回值，返回变量</a></li>\n<li><a href=\"#71034__4762\">7.10.3.4 主函数拥有具名返回值</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#711__4788\">7.11 异常处理</a></li>\n<li><ul>\n<li><a href=\"#7111__panicrecove_4831\">7.11.1 内置函数 panic&#x2F;recove</a></li>\n<li><ul>\n<li><a href=\"#71111_panicrecover__4853\">7.11.1.1 panic&#x2F;recover 的基本使用</a></li>\n<li><a href=\"#71112_defer_recover__4941\">7.11.1.2 defer 、recover 实现异常处理</a></li>\n<li><a href=\"#71113_defer_panicrecover__4975\">7.11.1.3 defer 、panic、recover 抛出异常</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#_5020\">模块八：面向对象</a></li>\n<li><ul>\n<li><a href=\"#81__5022\">8.1 学习目标</a></li>\n<li><a href=\"#82__5029\">8.2 接口</a></li>\n<li><ul>\n<li><a href=\"#821__5031\">8.2.1 接口的介绍</a></li>\n<li><a href=\"#822__5037\">8.2.2 接口的定义</a></li>\n<li><a href=\"#823__5166\">8.2.3 空接口</a></li>\n<li><ul>\n<li><a href=\"#8231__5201\">8.2.3.1 空接口作为函数的参数</a></li>\n<li><a href=\"#8232_map_5212\">8.2.3.2 map的值实现空接口</a></li>\n<li><a href=\"#8233__5225\">8.2.3.3 切片实现空接口</a></li>\n</ul>\n</li>\n<li><a href=\"#824__5232\">8.2.4 类型断言</a></li>\n<li><a href=\"#825__5292\">8.2.5 值接收者和指针接收者实现接口的区别</a></li>\n<li><ul>\n<li><a href=\"#8251__5306\">8.2.5.1 值接收者实现接口</a></li>\n<li><a href=\"#8252__5329\">8.2.5.2 指针接收者实现接口</a></li>\n</ul>\n</li>\n<li><a href=\"#826___5352\">8.2.6 类型与接口的关系</a></li>\n<li><ul>\n<li><a href=\"#8261__5354\">8.2.6.1 一个类型实现多个接口</a></li>\n<li><a href=\"#8262__5399\">8.2.6.2 多个类型实现同一接口</a></li>\n</ul>\n</li>\n<li><a href=\"#827__5481\">8.2.7 接口嵌套</a></li>\n</ul>\n</li>\n<li><a href=\"#83__5526\">8.3 面向对象</a></li>\n<li><ul>\n<li><a href=\"#831__5528\">8.3.1 面向对象的概念</a></li>\n<li><a href=\"#832__5668\">8.3.2 构造函数</a></li>\n<li><a href=\"#833__5741\">8.3.3 继承与重写</a></li>\n</ul>\n</li>\n<li><a href=\"#84__5786\">8.4 泛型</a></li>\n</ul>\n</li>\n<li><a href=\"#_5824\">模块九：反射</a></li>\n<li><ul>\n<li><a href=\"#91__5826\">9.1 学习目标</a></li>\n<li><a href=\"#92__5833\">9.2 反射介绍</a></li>\n<li><a href=\"#93__5874\">9.3 反射的基础数据类型</a></li>\n<li><a href=\"#94_reflectTypeOf_5879\">9.4 reflect.TypeOf()</a></li>\n<li><ul>\n<li><a href=\"#941_type_Nametype_Kind_5904\">9.4.1 type Name和type Kind</a></li>\n<li><a href=\"#942_reflectKind_5953\">9.4.2 reflect包中定义的Kind类型</a></li>\n</ul>\n</li>\n<li><a href=\"#95_reflectValueOf_5989\">9.5 reflect.ValueOf()</a></li>\n<li><ul>\n<li><a href=\"#951_1_6006\">9.5.1 通过反射获取原始值演示1</a></li>\n<li><a href=\"#952_2_6029\">9.5.2 通过反射获取原始值演示2</a></li>\n<li><a href=\"#953__6067\">9.5.3 通过反射设置变量的值</a></li>\n<li><ul>\n<li><a href=\"#9531_Value_6069\">9.5.3.1 通过Value修改原始数据的值</a></li>\n<li><a href=\"#9532_ValueSlice_6122\">9.5.3.2 通过Value修改Slice</a></li>\n<li><a href=\"#9533_Valuemap_6177\">9.5.3.3 通过Value修改map</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#96__6224\">9.6 结构体反射</a></li>\n<li><ul>\n<li><a href=\"#961__6226\">9.6.1 与结构体相关的方法</a></li>\n<li><a href=\"#962_StructField_6243\">9.6.2 StructField类型</a></li>\n<li><a href=\"#963__6260\">9.6.3 结构体反射示例</a></li>\n</ul>\n</li>\n<li><a href=\"#97__6408\">9.7 调用函数、成员方法</a></li>\n<li><ul>\n<li><a href=\"#971__6410\">9.7.1 调用函数</a></li>\n<li><a href=\"#972__6443\">9.7.2 调用成员方法</a></li>\n</ul>\n</li>\n<li><a href=\"#98__6493\">9.8 创建对象</a></li>\n<li><ul>\n<li><a href=\"#981_struct_6495\">9.8.1 创建struct</a></li>\n<li><a href=\"#982_slice_6523\">9.8.2 创建slice</a></li>\n<li><a href=\"#983_map_6556\">9.8.3 创建map</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#_6599\">模块十：并发编程</a></li>\n<li><ul>\n<li><a href=\"#101__6601\">10.1 学习目标</a></li>\n<li><a href=\"#102_goroutine_6608\">10.2 为什么要使用goroutine</a></li>\n<li><a href=\"#103__6622\">10.3 进程、线程以及并行、并发</a></li>\n<li><ul>\n<li><a href=\"#1031__6624\">10.3.1 关于进程和线程</a></li>\n<li><a href=\"#1032__6634\">10.3.2 关于并行和并发</a></li>\n</ul>\n</li>\n<li><a href=\"#104_Golanggoroutine_6645\">10.4 Golang中的协程（goroutine）以及主线程</a></li>\n<li><a href=\"#105_GoroutinesyncWaitGroup_6670\">10.5 Goroutine的使用以及sync.WaitGroup</a></li>\n<li><a href=\"#106_Goroutine_6742\">10.6 启动多个Goroutine</a></li>\n<li><a href=\"#107_GolangCPU_6775\">10.7 设置Golang并行运行的时候占用的CPU数量</a></li>\n<li><a href=\"#108_Goroutine_6802\">10.8 Goroutine统计素数</a></li>\n<li><a href=\"#109_Channel_6880\">10.9 Channel管道</a></li>\n<li><ul>\n<li><a href=\"#1091_channel_6888\">10.9.1 channel类型</a></li>\n<li><a href=\"#1092_channel_6906\">10.9.2 创建channel</a></li>\n<li><a href=\"#1093_channel_6927\">10.9.3 channel操作</a></li>\n<li><ul>\n<li><a href=\"#10931__6939\">10.9.3.1 发送（将数据放在管道内）</a></li>\n<li><a href=\"#10932__6947\">10.9.3.2 接收（从管道内取值）</a></li>\n<li><a href=\"#10933__6956\">10.9.3.3 关闭管道</a></li>\n</ul>\n</li>\n<li><a href=\"#1094__6973\">10.9.4 管道阻塞</a></li>\n<li><ul>\n<li><a href=\"#10941__6975\">10.9.4.1 无缓冲的管道</a></li>\n<li><a href=\"#10942__7001\">10.9.4.2 有缓冲的管道</a></li>\n</ul>\n</li>\n<li><a href=\"#1095_for_range_7055\">10.9.5 for range从管道循环取值</a></li>\n</ul>\n</li>\n<li><a href=\"#1010_GoroutineChannel_7084\">10.10 Goroutine结合Channel管道</a></li>\n<li><a href=\"#1011__7226\">10.11 单向管道</a></li>\n<li><a href=\"#1012_select_7303\">10.12 select多路复用</a></li>\n<li><a href=\"#1013_Golang_7377\">10.13 Golang并发安全和锁</a></li>\n<li><ul>\n<li><a href=\"#10131__7379\">10.13.1 互斥锁</a></li>\n<li><a href=\"#10132__7442\">10.13.2 读写互斥锁</a></li>\n</ul>\n</li>\n<li><a href=\"#1014_Goroutine_RecoverPanic_7519\">10.14 Goroutine Recover解决协程中出现的Panic</a></li>\n</ul>\n</li>\n<li><a href=\"#_7564\">模块十一：包与工程化</a></li>\n<li><ul>\n<li><a href=\"#111__7566\">11.1 学习目标</a></li>\n<li><a href=\"#112_Golang_7571\">11.2 Golang中包的介绍和定义</a></li>\n<li><a href=\"#113_Golanggo_mod_7583\">11.3 Golang包管理工具go mod</a></li>\n<li><ul>\n<li><a href=\"#1131_go_mod_init_7587\">11.3.1 go mod init初始化项目</a></li>\n<li><a href=\"#1132_go_mod_7595\">11.3.2 go mod其他命令</a></li>\n</ul>\n</li>\n<li><a href=\"#114_Golang_7613\">11.4 Golang中自定义包</a></li>\n<li><ul>\n<li><a href=\"#1141__7629\">11.4.1 定义一个包</a></li>\n<li><a href=\"#1142__7727\">11.4.2 导入一个包</a></li>\n<li><ul>\n<li><a href=\"#11421__7729\">11.4.2.1 单行导入</a></li>\n<li><a href=\"#11422__7738\">11.4.2.2 多行导入</a></li>\n<li><a href=\"#11423__7742\">11.4.2.3 匿名导入包</a></li>\n</ul>\n</li>\n<li><a href=\"#1143__7752\">11.4.3 自定义包名</a></li>\n</ul>\n</li>\n<li><a href=\"#115_Golanginit_7783\">11.5 Golang中init()初始化函数</a></li>\n<li><ul>\n<li><a href=\"#1151_init_7785\">11.5.1 init()函数介绍</a></li>\n<li><a href=\"#1152_init_7798\">11.5.2 init()函数执行顺序</a></li>\n</ul>\n</li>\n<li><a href=\"#116_Golang_7809\">11.6 Golang中使用第三方包</a></li>\n</ul>\n</li>\n<li><a href=\"#_7850\">模块十二：文件管理</a></li>\n<li><ul>\n<li><a href=\"#121__7852\">12.1 学习目标</a></li>\n<li><a href=\"#122_API_7857\">12.2 相关API</a></li>\n<li><a href=\"#123__7919\">12.3 打开和关闭文件</a></li>\n<li><ul>\n<li><a href=\"#1231_osOpen_7921\">12.3.1 os.Open()</a></li>\n<li><a href=\"#1232_osOpenFile_7946\">12.3.2 os.OpenFile()</a></li>\n</ul>\n</li>\n<li><a href=\"#124__7967\">12.4 读取文件</a></li>\n<li><ul>\n<li><a href=\"#1241_fileReadfileReadAt_7969\">12.4.1 file.Read()和file.ReadAt()</a></li>\n<li><ul>\n<li><a href=\"#12411__8019\">12.4.1.1 循环读取</a></li>\n</ul>\n</li>\n<li><a href=\"#1242_bufioNewReader_8062\">12.4.2 bufio.NewReader()</a></li>\n<li><a href=\"#1243_ioutilReadFileGo_116ioioutil_8106\">12.4.3 ioutil.ReadFile()（Go 1.16已废弃io&#x2F;ioutil包）</a></li>\n</ul>\n</li>\n<li><a href=\"#125__8132\">12.5 写入文件</a></li>\n<li><ul>\n<li><a href=\"#1251_fileWritefileWriteString_8134\">12.5.1 file.Write()和file.WriteString()</a></li>\n<li><a href=\"#1252_bufioNewWriter_8158\">12.5.2 bufio.NewWriter()</a></li>\n<li><a href=\"#1253_ioutilWriteFileGo_116ioioutil_8187\">12.5.3 ioutil.WriteFile()（Go 1.16已废弃io&#x2F;ioutil包）</a></li>\n</ul>\n</li>\n<li><a href=\"#126__8210\">12.6 拷贝文件</a></li>\n<li><ul>\n<li><a href=\"#1261_ioutil_8212\">12.6.1 第一种拷贝文件方法：ioutil包进行拷贝</a></li>\n<li><a href=\"#1262__8252\">12.6.2 第二种拷贝文件方法：文件流的方式拷贝</a></li>\n</ul>\n</li>\n<li><a href=\"#127__8297\">12.7 重命名文件</a></li>\n<li><a href=\"#128__8306\">12.8 创建目录</a></li>\n<li><ul>\n<li><a href=\"#1281__8308\">12.8.1 一次创建一个目录</a></li>\n<li><a href=\"#1282__8317\">12.8.2 一次创建多个目录</a></li>\n</ul>\n</li>\n<li><a href=\"#129__8326\">12.9 删除目录和文件</a></li>\n<li><ul>\n<li><a href=\"#1291__8328\">12.9.1 删除一个目录或者文件</a></li>\n<li><a href=\"#1292__8337\">12.9.2 一次删除多个目录或者文件</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#_8348\">后记</a></li>\n</ul>\n</li>\n</ul>\n<p>文档下载地址：<a href=\"https://github.com/scc749/go-basic\">scc749&#x2F;go-basic: Golang基础入门 (github.com)</a></p>\n<h2 id=\"Golang基础入门\"><a href=\"#Golang基础入门\" class=\"headerlink\" title=\"Golang基础入门\"></a>Golang基础入门</h2><h4 id=\"0-1-简介\"><a href=\"#0-1-简介\" class=\"headerlink\" title=\"0.1 简介\"></a>0.1 简介</h4><p><strong>本篇教程适用于对Golang感兴趣的初学者，也适用于对Golang基础知识点不太熟练的初学者，也适用于对于Golang基础知识点查缺补漏的初学者，此文档知识内容丰富，收录了较为详细的Golang常用知识点，通过本篇文档，希望对大家Golang的基础学习有所帮助（如果有重要的知识点，博主未列出，请在下方评论处指出，谢谢！）。</strong></p>\n<p><strong>（博主只是一个Golang的初学者之一，在此，仅希望各位初学者们在一开始学习Golang的时候，少走一些弯路，如果大家在阅读的过程中发现有很明显的错误或者说还有很多不足之处，欢迎大家指出，博主很乐意接受大家的建议，因为这样也可以帮助到博主自己，在此先提前谢谢大家。）</strong></p>\n<h4 id=\"0-2-先决条件\"><a href=\"#0-2-先决条件\" class=\"headerlink\" title=\"0.2 先决条件\"></a>0.2 先决条件</h4><ul>\n<li>一些编程经验。Golang的代码十分简洁、美观，这使得上手具有一定的难度，需要您有一定的编程经验，如：C&#x2F;C++，Java，Python等，如果没有的话，也没关系，博主也会尽量用通俗易懂的语言来介绍。</li>\n<li>用于编辑代码的工具。大多数文本编辑器都对 Go 有很好的支持，都可以用于敲golang的代码，包括记事本。其中最受欢迎的是 VSCode（免费）、GoLand（付费）和Vim（免费）。（GoLand、IDEA等JetBrains全家桶系列，学生党可以白嫖）</li>\n<li>会使用命令终端。如Windows 中的 PowerShell 或 cmd。</li>\n</ul>\n<h4 id=\"0-3-参考文献\"><a href=\"#0-3-参考文献\" class=\"headerlink\" title=\"0.3 参考文献\"></a>0.3 参考文献</h4><p><a href=\"https://golang.google.cn/doc/\">Documentation - The Go Programming Language (google.cn)</a></p>\n<p><a href=\"https://golang.google.cn/doc/devel/release\">Release History - The Go Programming Language (google.cn)</a></p>\n<p><a href=\"https://www.topgoer.cn/docs/golang/golang-1ccjbpfstsfi1\">Go语言中文文档-地鼠文档 (topgoer.cn)</a></p>\n<p><a href=\"https://www.topgoer.cn/docs/gozhuanjia/gogfjhk\">Go专家编程-地鼠文档 (topgoer.cn)</a></p>\n<p><a href=\"http://bbs.itying.com/topic/6125d9fc2d11541aa0843713\">Gin教程_Golang+Gin框架入门实战教程-百度网盘下载地址 (itying.com)</a></p>\n<p><a href=\"https://www.magedu.com/wenzhang/golang/index.html\">Go语言、golang权威学习教程 (magedu.com)</a></p>\n<p><a href=\"https://blog.csdn.net/u012351051/article/details/115033956?ydreferer=aHR0cHM6Ly9jbi5iaW5nLmNvbS8=\">Go语言：环境变量GOPROXY和GO111MODULE设置_猪哥-嵌入式的博客-CSDN博客</a></p>\n<hr>\n<h3 id=\"模块一：初识Go\"><a href=\"#模块一：初识Go\" class=\"headerlink\" title=\"模块一：初识Go\"></a>模块一：初识Go</h3><h4 id=\"1-1-什么是-Golang？\"><a href=\"#1-1-什么是-Golang？\" class=\"headerlink\" title=\"1.1 什么是 Golang？\"></a>1.1 什么是 Golang？</h4><h5 id=\"1-1-1-Go发展历史\"><a href=\"#1-1-1-Go发展历史\" class=\"headerlink\" title=\"1.1.1 Go发展历史\"></a>1.1.1 Go发展历史</h5><p><strong>Go的核心开发团队</strong></p>\n<p><strong>Ken Thompson</strong></p>\n<ul>\n<li>1966年：加入了贝尔实验室，在参与 Multics （多路信息计算）开发期间，创造出了B语言，并用一个月的时间用B语言开发了全新的操作系统UNICS，后来改名为我们所熟悉的UNIX 操作系统。</li>\n<li>1971年：和丹尼斯·利奇（Dennis Ritchie）一起共同发明了C语言。</li>\n<li>1973年：和丹尼斯·利奇（Dennis Ritchie）使用C语言重写了UNIX，并安装于PDP-11的机器之上。</li>\n<li>1983年：美国计算机协会将图灵奖授予汤普森。</li>\n<li>2000年：离开贝尔实验室，已退休的汤普森成为了一名飞行员。</li>\n<li>2006年：加入Google工作。</li>\n<li>2007年：64岁的高龄，与Rob Pike和Robert Griesemer主导了Go的开发。</li>\n</ul>\n<p><strong>Rob Pike</strong></p>\n<ul>\n<li>Go项目总负责人。</li>\n<li>贝尔实验室Unix团队成员，参与的项目包括Plan 9，Inferno操作系统和Limbo编程语言。</li>\n<li>UTF-8字符集规范唯二的发明人之一（另一位是Ken Thompson）。</li>\n<li>《UNIX环境编程》和《程序设计实践》这两本书的作者之一。</li>\n<li>第22届莫斯科夏季奥运会射箭项目的银牌得主。</li>\n<li>业余天文学家，设计的珈玛射线望远镜差点被 NASA 用在航天飞机上。</li>\n<li>他的媳妇Renee French 就是 Go 语言吉祥物的设计人。</li>\n</ul>\n<p><strong>Robert Griesemer</strong></p>\n<ul>\n<li>参与V8 JavaScript引擎的开发。</li>\n<li>参与Java HotSpot虚拟机的研发。</li>\n</ul>\n<p><strong>起源</strong></p>\n<p>2007年，Google的几位大牛正在用C++开发一些比较繁琐但是核心的工作，主要是分布式集群，大牛觉得很闹心。此时C++委员会来他们公司做技术演讲，说C++将要添加35个新特性，大牛心里飘过一万个CNM，“C++特性还不够多吗”。于是Rob Pike说要不自己搞个简单一点的语言吧，首先名字得简单好记，大腿一拍就叫“go”。<br><strong>把事情搞复杂很容易，把事情搞简单才更深刻。</strong></p>\n<p><strong>发展</strong></p>\n<ul>\n<li>2007年9月21日，开始雏形设计。</li>\n<li>2009年10月30日，Rob Pike宣布了Go的存在。</li>\n<li>2009年11月10日，以完全开源的方式公布了Linux和Mac OSX上的版本，11月22日公布了Windows版本。</li>\n<li>2010年1月8日，当选2009年年度语言。</li>\n<li>2010年5月，谷歌投入使用。</li>\n<li>2011年4月，谷歌开始抽调员工全职开发Go，并于5月宣布Google APP Engine支持Go。</li>\n<li>2015年8月19日 ，Go1.5版本发布，本次更新中移除了“最后残余的C代码”，请内存管理方面权威专家Rick Hudson对GC进行重新设计</li>\n<li>2018年8月24日 ， Go1.11版本发布，开始不支持WinXP系统</li>\n<li>2022年3月15日， Go1.18版本发布，开始全面支持泛型，以及新增Workspaces的概念</li>\n</ul>\n<p><strong>现状</strong></p>\n<p>从世界范围看，Go在<strong>中国</strong>的发展势头最猛，且远超第二名。在很多互联网大厂Go已成为主要开发语言。</p>\n<p>下图显示了在 <a href=\"https://www.jetbrains.com/lp/devecosystem-2020/go/\">开发人者生态系统调查 2020</a> 中调查的每个国家使用 Go 作为主要语言的开发者的分布情况（受访者最多可以选择 3 种主要语言）。 <strong>中国</strong>的开发者集中度最高，有 16% 的中国开发者使用 Go 语言。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/32932117042592dfc389e6e92f27c9a8_1739762133549.png\" alt=\"2-2x\"></p>\n<p>资料来源于<a href=\"https://blog.jetbrains.com/zh-hans/go/2021/02/19/the-state-of-go/\">Go 语言现状调查报告 | The GoLand Blog (jetbrains.com)</a></p>\n<h5 id=\"1-1-2-Go的优劣\"><a href=\"#1-1-2-Go的优劣\" class=\"headerlink\" title=\"1.1.2 Go的优劣\"></a>1.1.2 Go的优劣</h5><p><strong>优势</strong></p>\n<ul>\n<li><p>语法简单，易于学习。类C的语法，同时比C&#x2F;C++简洁和干净。</p>\n</li>\n<li><p>自带GC，方便使用。</p>\n</li>\n<li><p>快速编译，高效执行。</p>\n</li>\n<li><p>简单的依赖管理。</p>\n</li>\n<li><p>并发编程，轻松驾驭。</p>\n</li>\n<li><p>静态类型，同时有一些动态语言的特征(var声明)。</p>\n</li>\n<li><p>标准类库，规范统一</p>\n</li>\n</ul>\n<p><strong>劣势</strong></p>\n<ul>\n<li><p>不支持动态加载代码。</p>\n</li>\n<li><p>发展时间短，生态不及Java、C++庞大，但是够用。</p>\n</li>\n</ul>\n<h5 id=\"1-1-3-Go的应用场景\"><a href=\"#1-1-3-Go的应用场景\" class=\"headerlink\" title=\"1.1.3 Go的应用场景\"></a>1.1.3 Go的应用场景</h5><p><strong>应用场景总览</strong></p>\n<ul>\n<li>巨型中央服务器领域。</li>\n<li>高性能分布式领域。</li>\n<li>游戏服务端开发。</li>\n<li>复杂事件处理。</li>\n<li>对实时性要求很高的软件开发。</li>\n<li>可以在Intel和ARM处理器上运行，因此也可以在安卓上运行。</li>\n</ul>\n<p><strong>go微服务开发</strong></p>\n<ul>\n<li>零依赖，让我们可以最小化我们的镜像,节省存储与拉取镜像带宽。</li>\n<li>Runtime使用更小的内存，对比Java的JVM。</li>\n<li>更好的并行能力，当你真的需求更多CPU的时候。</li>\n<li>更高的性能，对比解释性语言，在处理数据已经并发方面优势明显。</li>\n<li>简单，学习成本低，内部人员可以转入Go阵营。</li>\n<li>使用Go能更接近云原生生态，比如docker，k8s, habor都是用Go开发的。</li>\n</ul>\n<hr>\n<h3 id=\"模块二：Go环境配置\"><a href=\"#模块二：Go环境配置\" class=\"headerlink\" title=\"模块二：Go环境配置\"></a>模块二：Go环境配置</h3><h4 id=\"2-1-学习目标\"><a href=\"#2-1-学习目标\" class=\"headerlink\" title=\"2.1 学习目标\"></a>2.1 学习目标</h4><ol>\n<li><p>安装Go的安装包</p>\n</li>\n<li><p>下载VSCode</p>\n</li>\n<li><p>写出第一个Golang程序</p>\n</li>\n<li><p>了解GOROOT，GOPATH，GOPROXY，GO111MODULE</p>\n</li>\n</ol>\n<h4 id=\"2-2-安装Golang\"><a href=\"#2-2-安装Golang\" class=\"headerlink\" title=\"2.2 安装Golang\"></a>2.2 安装Golang</h4><p><strong>下载地址：</strong></p>\n<p><a href=\"http://golang.org/dl/\">The Go Programming Language (golang.org)</a>（官方链接，需要挂梯子）</p>\n<p><a href=\"https://golang.google.cn/dl/\">All releases - The Go Programming Language (google.cn)</a>（Golang官网的官方镜像，强烈推荐）</p>\n<p><a href=\"https://studygolang.com/dl\">Go下载 - Go中文网 - Golang中文社区 (studygolang.com)</a>（国内Golang的交流社区）</p>\n<p>然后下载对应平台的安装包即可。<strong>请记住您的Golang的安装位置，这一点很重要</strong></p>\n<p><strong>go1.21.0.windows-amd64.msi</strong>（windows推荐下载这个，直接下一步，下一步安装即可，<strong>请记住安装位置</strong>）</p>\n<p>go1.21.0.windows-amd64.zip（下载这个虽然只需要解压就好了，但是不太推荐，<strong>需要在Path中手动配置Go的路径</strong>）</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/b9163f15ac252049579b0ed12a38ddf3_1739762133549.png\" alt=\"golang安装位置\"></p>\n<p><strong>好吧，如果你不记的话可能也没啥问题，如果是用<code>.msi</code>安装的话，<code>Path</code>会自己帮你配好，此外一般的编译器也会自动找到它的位置，如果是直接解压<code>.zip</code>的仁兄，请移步到<code>GOROOT</code>的配置</strong></p>\n<p><strong><code>Path</code>已经配好的（<code>.msi</code>安装请忽略），按<code>win</code>+<code>R</code>输入<code>cmd</code>回车，输入<code>go version</code>，即可看到相应版本信息，没配置<code>Path</code>的话，只能看到，’xxx’不是内部或外部命令，也不是可运行的程序或批处理文件</strong></p>\n<h4 id=\"2-3-配置GOPATH？\"><a href=\"#2-3-配置GOPATH？\" class=\"headerlink\" title=\"2.3 配置GOPATH？\"></a>2.3 配置GOPATH？</h4><p><strong>不，咱先不配，后面将详细介绍什么是<code>GOROOT</code>，<code>GOPATH</code>，<code>GOPROXY</code>，<code>GO111MODULE</code>，然后去了解，为什么要配它们</strong></p>\n<h4 id=\"2-4-VSCode的安装及配置\"><a href=\"#2-4-VSCode的安装及配置\" class=\"headerlink\" title=\"2.4 VSCode的安装及配置\"></a>2.4 VSCode的安装及配置</h4><p><strong>微软商店：（直接搜索就好）</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/3b0a76a18cdae2dbd5c55906a3b8f3df_1739762133549.png\" alt=\"VSCode的安装1\"></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/065cdf5f93d9a06812c76db89b4abf13_1739762133549.png\" alt=\"VSCode的安装2\"></p>\n<p><strong>官网下载：</strong></p>\n<p><a href=\"https://code.visualstudio.com/\">Visual Studio Code - Code Editing. Redefined</a></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/f3cd248c5069ff92e26ec2e124efc326_1739762133549.png\" alt=\"VSCode的安装3\"></p>\n<p><strong>直接下一步，下一步安装即可</strong></p>\n<p><strong>打开后点击左边的拓展</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/9cc403c75534ee1ba7363bb414b9aca8_1739762135423.png\" alt=\"VSCode的配置1\"></p>\n<p><strong>输入<code>Chinese</code></strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/5c1c583fc97f41696f14daa1c00497bd_1739762135423.png\" alt=\"VSCode的配置2\"></p>\n<p><strong>安装之后，右下角有个弹窗</strong><br><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/ea3d51a79a6da01017d262ccc20b8f95_1739762135423.png\" alt=\"VSCode的配置3\"></p>\n<p><strong>继续输入<code>Go</code>，安装第一个</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/424c3f177b02b5865f8acd2ca3fb1d75_1739762135423.png\" alt=\"VSCode的配置4\"></p>\n<p><strong>此时VSCode即可用于写Golang的代码</strong></p>\n<p>但是，刚装完Go插件的小伙伴应该会发现，右下角会出现一堆弹窗，不用管它们，全X掉就好，因为点了也没用。</p>\n<h4 id=\"2-5-第一个Golang程序\"><a href=\"#2-5-第一个Golang程序\" class=\"headerlink\" title=\"2.5 第一个Golang程序\"></a>2.5 第一个Golang程序</h4><p><strong>先了解一下常用的几个go命令：</strong>（也许学的过程中只会用到<code>go run</code>）</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">go env\t\t\t用于打印Go的环境信息。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go run\t\t\t命令可以编译并运行命令源码文件。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go get\t\t\t可以根据要求和实际情况从互联网上下载或更新指定的代码包及其依赖包，并对它们进行编译和安装。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go build\t\t命令用于编译我们指定的源码文件或代码包以及它们的依赖包。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go install\t\t用于编译并安装指定的代码包及它们的依赖包。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go clean\t\t命令会删除掉执行其它命令时产生的一些文件和目录。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go doc\t\t\t命令可以打印附于Go程序实体上的文档。我们可以通过把程序实体的标识符作为该命令的参数来达到查看其文档的目的。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go test\t\t\t命令用于对Go编写的程序进行测试。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go list\t\t\t命令的作用是列出指定的代码包的信息。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go fix\t\t\t会把指定代码包的所有Go源码文件中的旧版本代码修正为新版本的代码。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go vet\t\t\t是一个用于检查Go源码中静态错误的简单工具。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">go tool pprof\t命令来交互式的访问概要文件的内容。</span></span></code></pre></div><p><strong>打开此电脑，选择一个路径用于保存你的Golang项目代码</strong></p>\n<p>这里我用的是<code>D:\\</code>，在此目录下新建一个<code>go_project</code>文件夹，当然叫其他名字也可以。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/778519afdd171d278b9411f1e9817cc0_1739762135423.png\" alt=\"Golang项目代码的路径创建1\"></p>\n<p><strong>双击打开，并新建src，pkg，bin三个文件夹。</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/1f8ca2e6522125b904d88788df33d742_1739762136042.png\" alt=\"Golang项目代码的路径创建2\"></p>\n<p>不用太多疑惑，这是一个完整的Golang项目所需要的，实际上初学者所用到的只有<code>src</code>一个文件夹，或者说也不需要这么新建文件夹，随便在桌面空白处新建一个文本文档，然后把<code>.txt</code>改成<code>.go</code>，然后用VSCode打开，上手敲代码就好了，这里只是养成一个好习惯而已。</p>\n<p>下面简单介绍这三个文件夹的作用：</p>\n<p><strong>bin：用来存放编译后生成的可执行文件</strong></p>\n<p><strong>pkg：用来存放编译后生成的归档文件</strong></p>\n<p><strong>src：用来存放源码文件</strong></p>\n<p><strong>接下来，我们将尝试用VSCode写你的第一个Golang程序</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/e0ad041be32d9ba5317bd257d951041f_1739762136042.png\" alt=\"VSCode写Golang程序1\"></p>\n<p><strong>选择刚才创建的项目文件夹</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/9c04465df67aeba7750221ae1b62ae7b_1739762136042.png\" alt=\"VSCode写Golang程序2\"></p>\n<p><strong>右键<code>src</code>，选择<code>新建文件夹</code></strong></p>\n<p>前文提到<code>src</code>即是我们存放源码的地方，所以我们写的代码全放在该文件夹下。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/d685553379db7d99acf0383f3bce4256_1739762136042.png\" alt=\"VSCode写Golang程序3\"></p>\n<p>文件夹名字随便起就行，这里就不得不提一嘴，为什么又要新建文件夹？直接新建文件不好吗？</p>\n<p>新建文件夹是为了更好地去规范我们的代码的存放位置，说白了，要建立一种框架意识，共同起到一种功能的所有代码放一块，打包起来，你说包也行，模块也勉强可以（学过C++或者Java的会很好理解这一点）。</p>\n<p><strong>项目 &gt; 模块（可以没有） &gt; 包 &gt; 单元（说法不准确，理解就行）</strong></p>\n<p>包就是文件夹，一个单元就是一个<code>.go</code>文件，从前往后的包含关系。</p>\n<p>同时这也是为了去符合Golang的一个硬性规范，<strong>Golang一个包下只能有一个<code>main()函数</code>（与Java不同）</strong>（不信的可以去试试，看看会不会报错）。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/d264eb20baf71179da0a0cf78f49cf0c_1739762136042.png\" alt=\"VSCode写Golang程序4\"></p>\n<p><strong>然后新建一个叫<code>hello.go</code>的文件</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/65df2ab172265c7f9fabdabd59f8ddc0_1739762136686.png\" alt=\"VSCode写Golang程序5\"></p>\n<p><strong>然后右下角会出现一堆弹窗，不用管它们，全X掉就好，因为点了也没用。</strong></p>\n<p><strong>来到右边，我们开始写我们的第一个Golang程序</strong>（报红很正常，咱们硬写，后面会解释为什么会报红）</p>\n<p><strong>温馨小提示：正常来说package包名默认与文件夹保持一致，这里第一行默认应为<code>package day1</code>，但是Go硬性规定，<code>main()函数</code>所在的<code>.go</code>文件，包名必须为<code>main</code>，否则将无法运行，这一点很重要！</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/84f86e7c96585783b86a146aa139fb0a_1739762136686.png\" alt=\"VSCode写Golang程序6\"></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Hello World!</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>写完后，记得按<code>ctrl</code>+<code>s</code>保存一下</strong></p>\n<p><strong>然后我们选择在终端中打开</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/515d861ba0cd44bf7e9b0d4c869f2924_1739762136686.png\" alt=\"VSCode写Golang程序7\"></p>\n<p><strong>这里默认就是该文件所在的文件夹路径，注意右上角是<code>powershell</code>，可以理解为<code>cmd</code>的超集，把它当作<code>cmd</code>用就好了</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/c74ddaaa62a3330cd5512c83dcf5621e_1739762136686.png\" alt=\"VSCode写Golang程序8\"></p>\n<p>**然后输入<code>go run hello.go</code>**（也可以先<code>go build hello.go</code>生成可执行二进制文件<code>.exe</code>，然后输入<code>hello</code>运行，即先编译，再运行，有些类似Java的<code>-javac</code>、<code>-java</code>命令）</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/0e6a237d2fab2badc4b29a66621bfbcc_1739762136686.png\" alt=\"VSCode写Golang程序9\"></p>\n<p><strong>回车后，就可以看到执行结果啦</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/b170dca0c9db0b86a89390edddc9eb82_1739762137392.png\" alt=\"VSCode写Golang程序10\"></p>\n<p><strong>后面解决，一堆报红及GOROOT，GOPATH，GOPROXY，GO111MODULE是什么。</strong></p>\n<h4 id=\"2-6-VSCode的Go工具插件（一）\"><a href=\"#2-6-VSCode的Go工具插件（一）\" class=\"headerlink\" title=\"2.6 VSCode的Go工具插件（一）\"></a>2.6 VSCode的Go工具插件（一）</h4><p><strong>现在来介绍VSCode的Go工具插件：</strong></p>\n<p>有趣的是这些Go插件都是<strong>Go的第三方库的开源模块</strong>(所以需要配置<code>GOPROXY</code>环境变量)。</p>\n<p><strong>打开VSCode（已打开当我没说），按<code>ctrl</code>+<code>shift</code>+<code>p</code></strong></p>\n<p><strong>输入 <code>Go:Install/Update Tools</code></strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/391992561a471fcc2140f4eac9e2f50b_1739762137392.png\" alt=\"VSCode的Go工具插件安装1\"></p>\n<p><strong>选择全选，并点击确定</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/926370a984e0b2ff06a75ec51144482c_1739762137392.png\" alt=\"VSCode的Go工具插件安装2\"></p>\n<p><strong>然后耐心等待一会儿，你就能在下方的窗口中看到全部下载失败了</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/863b73d24303cf177a7b3238e2ef9d68_1739762137392.png\" alt=\"VSCode的Go工具插件安装3\"></p>\n<p><strong>不过不要心急，这是有办法解决的，配置一下<code>GOPROXY</code>代理就好了，此外请注意这里，是重点内容</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/eda2eba97a0a2f99552f8e36b0b82b99_1739762137392.png\" alt=\"VSCode的Go工具插件安装4\"></p>\n<p>让我们先进入下一章节。</p>\n<h4 id=\"2-7-什么是GOROOT，GOPATH，GOPROXY，GO111MODULE？\"><a href=\"#2-7-什么是GOROOT，GOPATH，GOPROXY，GO111MODULE？\" class=\"headerlink\" title=\"2.7 什么是GOROOT，GOPATH，GOPROXY，GO111MODULE？\"></a>2.7 什么是GOROOT，GOPATH，GOPROXY，GO111MODULE？</h4><p><strong>GOROOT：</strong><code>GOROOT</code>就是Go的安装目录，前面安装Go的时候让大家记住的（类似于java的JDK）。</p>\n<p><strong>GOPATH：</strong><code>GOPATH</code>就是我们的工作空间，<strong>保存go项目代码和第三方依赖包</strong>（如果go项目没有配置<code>GOPATH</code>，则需要<code>go.mod</code>，<code>go.work</code>管理）。</p>\n<p><strong>GOPROXY：</strong><code>GOPROXY</code>表示的是go的代理设置，之所以有这个环境变量，是因为go这种语言不像C语言，在C语言中，如果我们想要使用别人的第三方代码，一般有两种途径：</p>\n<ol>\n<li>将第三方代码源码合并到自己的工程文件中，再合并编译。</li>\n<li>将第三方代码编译生成的共享库**<code>.so</code>或<code>.dll</code>** 文件放到工程目录下，然后通过条件编译来使用。</li>\n</ol>\n<p>Go中如何使用别人的第三方代码，即模块（MODULE），类似于java，我们可以在编程时，通过第三方代码的库地址，如git仓库，然后在编译的时候，IDE会帮我们自动的拉取第三方库文件到当前工程。</p>\n<p>这样做虽然很方便，但是很多第三方代码库是在国外服务器上的，因为一些限制，我们不能很顺利的使用和下载这些仓库，这样就会导致下载缓慢或者失败，所以这个时候就需要一个代理来实现下载，这个代理就是中间商，可以跨过限制来访问。（说白点就是梯子）</p>\n<p><strong>Golang官方默认的GOPROXY是<code>https://goproxy.io</code>，但是效果不太理想，我们可以使用国内的七牛云代理<code>https://goproxy.cn</code>。</strong></p>\n<p><strong>GO111MODULE：</strong><code>GO111MODULE</code>是<code>go modules</code>功能的开关，关于<code>go modules</code>这里不详细说明，感兴趣的可以去搜一下。</p>\n<p>在没有<code>go modules</code>机制时，go工程中对于第三方功能包的管理非常复杂，也非常专业，这就导致程序员在进行开发的时候，对于第三方功能包的管理很不方便，所以有了<code>go modules</code>机制。</p>\n<p>这个机制的开关是通过<code>GO111MODULE</code>环境变量来配置的。</p>\n<p><strong>接下来我们开始配置相关的环境变量</strong></p>\n<p><strong>为了使所有的计算机用户都可以使用 Go 环境，我们就在系统变量之中配置。</strong></p>\n<p>当然，在用户变量之中配置也是可以的，毕竟我们的电脑一般就一个用户用。</p>\n<p><strong>先打开我们的环境变量</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/51de29128c4cc66a745d9a4d4ec0ab77_1739762138521.png\" alt=\"配置环境变量1\"></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/587e357254ca481ed56069322124bb69_1739762138521.png\" alt=\"配置环境变量2\"></p>\n<p><strong>现在我们看到我们的环境变量是这个样子，先进入到我们的系统变量中的<code>Path</code>里面看一下</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/06bf7b7f75de9b26c647e26bcf4c1647_1739762138521.png\" alt=\"配置环境变量3\"></p>\n<p><strong>仔细看最后一个路径，是不是很眼熟，没错这就是我们安装<code>.msi</code>，go的安装包的时候，它帮我们配置好的<code>Path</code>路径。</strong></p>\n<p><strong>如果是用<code>.zip</code>解压的，是没有这个路径的，需要自己手动配置，如果不配置这个<code>Path</code>，我们在使用终端中go命令的时候，就会显示’xxx’不是内部或外部命令，也不是可运行的程序或批处理文件，原因是终端中当前路径下，是没有go的命令文件的，添加到<code>Path</code>之后，终端中输入相应的命令，系统会优先在<code>Path</code>中搜索执行该指令的文件，然后执行，大家可以试着将任何软件的启动项路径写入<code>Path</code>，然后在任意位置打开<code>cmd</code>，直接调用启动文件</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/6889e6d19dbb4f17bc0dd1f8ad536a5e_1739762138521.png\" alt=\"配置环境变量4\"></p>\n<p><strong>然后我们退出，返回环境变量页面</strong></p>\n<h5 id=\"2-7-1-配置GOROOT\"><a href=\"#2-7-1-配置GOROOT\" class=\"headerlink\" title=\"2.7.1 配置GOROOT\"></a>2.7.1 配置GOROOT</h5><p><strong>接下来我们要修改一下<code>GOROOT</code>的写法，其实不改也没什么大问题</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/62569ff6bdf727e39983cadafe583117_1739762138521.png\" alt=\"配置环境变量5\"></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/e38d6759b03a339bbbf8fe92ccfa4606_1739762139445.png\" alt=\"在这里插入图片描述\"></p>\n<p><strong>这样我们的<code>GOROOT</code>就配好了</strong></p>\n<h5 id=\"2-7-2-配置GOPROXY和GO111MODULE\"><a href=\"#2-7-2-配置GOPROXY和GO111MODULE\" class=\"headerlink\" title=\"2.7.2 配置GOPROXY和GO111MODULE\"></a>2.7.2 配置GOPROXY和GO111MODULE</h5><p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/e09820ab6113fe0b2571a497c1ca01f1_1739762139445.png\" alt=\"配置环境变量7\"></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/d7a87354394b2c3b3894240ae51a0b95_1739762139445.png\" alt=\"配置环境变量8\"></p>\n<p><strong>最后<code>GOPATH</code>的配置，我们还是先不配，我们在 2.9.1 GOPATH配置中讲解</strong></p>\n<p><strong>这里只需要留意一下用户变量中的这个<code>GOPATH</code>的路径，是我们在VSCode尝试下载Go工具插件的时候，帮我们配置的路径，也就是Go工具插件的安装路径</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/27428e26f403236af3657d01e1d1ae44_1739762139445.png\" alt=\"配置环境变量9\"></p>\n<p><strong>最后不要忘了点确定！</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/419c630664628b10f9300bd751e9da96_1739762139445.png\" alt=\"配置环境变量10\"></p>\n<h4 id=\"2-8-VSCode的Go工具插件（二）\"><a href=\"#2-8-VSCode的Go工具插件（二）\" class=\"headerlink\" title=\"2.8 VSCode的Go工具插件（二）\"></a>2.8 VSCode的Go工具插件（二）</h4><p><strong>现在我们重新下载Go工具插件</strong>（可能需要重启一下VSCode）</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/f55ef4fc0d282fced4e635f4952dc953_1739762140342.png\" alt=\"VSCode的Go工具插件安装5\"></p>\n<p>现在就成功了，然后你会发现新增了很多实用的功能，自动导包，代码自动提示，保存后自动格式化代码，显示函数信息等等。</p>\n<h4 id=\"2-9-go-mod，go-work命令介绍\"><a href=\"#2-9-go-mod，go-work命令介绍\" class=\"headerlink\" title=\"2.9 go mod，go work命令介绍\"></a>2.9 go mod，go work命令介绍</h4><p>golang是从v1.11引入了go mod机制，为了完善go mod机制，又从v1.18引入了多模块工作区机制（要把哪些mod纳入到你的工作区内），即<code>go work</code>机制，从之前的版本升级到v1.18及之后，vscode工作环境可能会报错。</p>\n<p><strong>vscode打开的文件夹的路径默认作为了其工作区（<code>workspace</code>），而这个工作区的根目录要有<code>go.mod</code>文件，如果根目录，或<code>src</code>下没有这个<code>go.mod</code>就要指定哪些子目录的<code>go.mod</code>纳入工作区</strong></p>\n<p>一般是项目的根目录作为工作区，如这里的<code>D:\\go_project</code>，工作区的根目录，或<code>src</code>下要有<code>go.mod</code>，我们需要用指令生成一个（自己手写也可以），如果不想在工作区目录下生成，就需要用<code>go work</code>命令指明工作区的子目录（这里就是<code>src</code>）下的哪些mod需要纳入工作区。</p>\n<p>接下来，我们来解决这个报错信息。</p>\n<p><strong>当我们没有给我们的项目路径设置<code>GOPATH</code>的时候，我们就需要依赖于<code>go.mod</code>和<code>go.work</code>来管理我们的项目。</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/9a23a53335e7739ee1dc6b8c26812a79_1739762140342.png\" alt=\"VSCode的Go工具插件安装6\"></p>\n<p><strong>首先，在集成终端中打开<code>day1</code>的路径</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/8155b4ea37ea1c70580dd98b640c8f97_1739762140342.png\" alt=\"VSCode的Go工具插件安装7\"></p>\n<p><strong>输入<code>go mod init day1</code>，初始化该模块</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/f0420b065cece47086cef496c40eda18_1739762140342.png\" alt=\"VSCode的Go工具插件安装8\"></p>\n<p><strong>报错就消失了，但是不要着急，还没结束</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/dcf0c86332024e3c2468ce258cfd9f7f_1739762140342.png\" alt=\"VSCode的Go工具插件安装9\"></p>\n<p><strong>之前提过，Golang一个包下只能有一个<code>main()函数</code>，所以下面这种就会报错</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/f4e10793cb90770de4fea9bf247aa139_1739762141072.png\" alt=\"VSCode的Go工具插件安装10\"></p>\n<p><strong>此时就需要像这样，新建一个包，这样就不会报错了，但是还没结束，我们并没有给<code>day2</code>这个包配置<code>go.mod</code>，尽管它没有报错</strong></p>\n<p>（这里是一个文件夹，表示一个模块，即多模块项目）</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/19a3afe8eb098e95685765157ed40b79_1739762141072.png\" alt=\"VSCode的Go工具插件安装11\"></p>\n<p><strong>给<code>day2</code>配置完<code>go.mod</code>后，会发现，它又报错了</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/78512759f544bfa7605d80926f84cda3_1739762141072.png\" alt=\"VSCode的Go工具插件安装12\"></p>\n<p><strong>原因是，当一个go项目存在多个模块时，要使<code>go.mod</code>之间产生依赖，我们需要用<code>go.work</code>去管理<code>go.mod</code>（1.18之后的配置）</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/36c9cdcf202aa83dcabcde6cc2dad4c0_1739762141072.png\" alt=\"VSCode的Go工具插件安装13\"></p>\n<p><strong>然后我们打开任意工作区子目录的集成终端</strong>（emmm，我没有找到直接打开工作区的终端的选项）</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/ef233e43df3adfd01a31508493788a15_1739762141072.png\" alt=\"VSCode的Go工具插件安装14\"></p>\n<p><strong>然后输入<code>cd ..</code>回退到工作区路径（<code>go.work</code>需要在工作区目录下，如果一开始打开的工作区（从VSCode打开的文件夹）为<code>src</code>，<code>go.work</code>就放在<code>src</code>目录下）</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/f4311edc731b8d38bed2889f6b93061f_1739762141846.png\" alt=\"VSCode的Go工具插件安装15\"></p>\n<p><strong>然后输入<code>go work init src\\day1</code>初始化一下，再输入<code>go work use src\\day2</code>，将day2纳入工作区</strong></p>\n<p><strong>（也可以输入<code>go work init</code>初始化一个空的工作区，然后再用<code>go work use</code>纳入<code>day1</code>，<code>day2</code>）</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/12d0962943b2f55038b92baac7c39abe_1739762141846.png\" alt=\"VSCode的Go工具插件安装16\"></p>\n<p><strong>最后就不会报错了</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/3ec3d5654173ba90e95473fd37d50fb3_1739762141846.png\" alt=\"VSCode的Go工具插件安装17\"></p>\n<p><strong>补充：</strong></p>\n<p><strong><code>go.mod</code>放在<code>src</code>目录下（不是子文件夹），可以不需要<code>go.work</code>（一开始的介绍里面讲的比较清晰）</strong></p>\n<p><strong>也可以不使用<code>go.mod</code>和<code>go.work</code>，直接在<code>GOPATH</code>中加上项目路径即可</strong></p>\n<h5 id=\"2-9-1-GOPATH配置（可以不配，使用go-mod管理）\"><a href=\"#2-9-1-GOPATH配置（可以不配，使用go-mod管理）\" class=\"headerlink\" title=\"2.9.1 GOPATH配置（可以不配，使用go mod管理）\"></a>2.9.1 GOPATH配置（可以不配，使用go mod管理）</h5><p><strong>可以借用一下之前用户变量里面的<code>GOPATH</code>，直接在末尾添加<code>;D:\\go_project</code>（你的项目路径，不要忘了加’;’）</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/76a5baf812f376872889cbf43a3a9d45_1739762141846.png\" alt=\"配置环境变量11\"></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/0bfd65c9cbed5ba0c86ab8a27edb916d_1739762141846.png\" alt=\"配置环境变量12\"></p>\n<p><strong>或者添加在系统变量里面</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/61dea169cfa2fb6e85e1893034426e9f_1739762142589.png\" alt=\"配置环境变量13\"></p>\n<p><strong>最后不要忘了点确定！</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/f159f4a623b1e406372cbe56229220d9_1739762142589.png\" alt=\"配置环境变量14\"></p>\n<p><strong>这样也是可以的，最后重启一下VSCode就好了</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/27dfc029f2de75c4202f53920ee41a90_1739762142589.png\" alt=\"配置环境变量15\"></p>\n<p>虽然上面很多东西不讲，后面也可以继续学，但是博主觉得，把这些东西弄明白挺重要的，虽然讲的都很粗浅，但是可以增加对Golang的一些理解，对于以后大家深入学习Golang有一定的帮助的。</p>\n<h4 id=\"拓展1：VSCode文件夹分层显示\"><a href=\"#拓展1：VSCode文件夹分层显示\" class=\"headerlink\" title=\"拓展1：VSCode文件夹分层显示\"></a>拓展1：VSCode文件夹分层显示</h4><p><strong>如果你的VSCode的子文件夹为一个时，会自动收缩成一行，感觉十分不方便，可以打开设置，点击工作区，点击功能，点击资源管理器，找到<code>Compact Folders</code>，取消勾选即可。</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/decc96b54aff3a032e0136113d557b46_1739762142589.png\" alt=\"VSCode的配置5\"></p>\n<h4 id=\"拓展2：Goland的方便之处（小特性）\"><a href=\"#拓展2：Goland的方便之处（小特性）\" class=\"headerlink\" title=\"拓展2：Goland的方便之处（小特性）\"></a>拓展2：Goland的方便之处（小特性）</h4><p><strong>前面讲过：Golang一个包下只能有一个<code>main()函数</code>，所以正常而言，每写一个<code>main()函数</code>就要新建一个文件夹，但是Goland一个包下可以写好几个包含<code>.go</code>的文件，注意，这样写肯定不会给你运行，但是你可以按<code>ctrl</code>+<code>shift</code>+<code>F10</code>强行运行当前的<code>.go</code>文件（一个文件），就不需要每次都要创建文件夹了</strong></p>\n<p><strong>初始配置已经全部讲完，正式开始你的Golang学习之旅吧！</strong></p>\n<hr>\n<h3 id=\"模块三：Go基础语法\"><a href=\"#模块三：Go基础语法\" class=\"headerlink\" title=\"模块三：Go基础语法\"></a>模块三：Go基础语法</h3><h4 id=\"3-1-学习目标\"><a href=\"#3-1-学习目标\" class=\"headerlink\" title=\"3.1 学习目标\"></a>3.1 学习目标</h4><ol>\n<li>认识基本的标识符与关键字</li>\n<li>了解基本的操作符与表达式</li>\n<li>熟练掌握变量、常量、字面量的相关操作</li>\n</ol>\n<h4 id=\"3-2-标识符与关键字\"><a href=\"#3-2-标识符与关键字\" class=\"headerlink\" title=\"3.2 标识符与关键字\"></a>3.2 标识符与关键字</h4><p>Go变量、常量、自定义类型、包、函数的命名方式必须遵循以下规则：</p>\n<ol>\n<li>首字符可以是任意<code>Unicode</code>字符或下划线。</li>\n<li>首字符之外的部分可以是<code>Unicode</code>字符、下划线或数字。</li>\n<li>名字的长度无限制。</li>\n</ol>\n<p>理论上名字里可以有汉字，甚至可以全是汉字，但实际中不要这么做。</p>\n<h5 id=\"3-2-1-Go关键字\"><a href=\"#3-2-1-Go关键字\" class=\"headerlink\" title=\"3.2.1 Go关键字\"></a>3.2.1 Go关键字</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">break</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">select</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">map</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">goto</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\">  </span><span style=\"color: #FFCB6B\">switch</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\">  </span><span style=\"color: #FFCB6B\">continue</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\">  return  </span><span style=\"color: #89DDFF; font-style: italic\">fallthrough</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">var</span></span></code></pre></div><h5 id=\"3-2-2-常量\"><a href=\"#3-2-2-常量\" class=\"headerlink\" title=\"3.2.2 常量\"></a>3.2.2 常量</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">false</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">iota</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\">   </span></span></code></pre></div><h5 id=\"3-2-3-数据类型\"><a href=\"#3-2-3-数据类型\" class=\"headerlink\" title=\"3.2.3 数据类型\"></a>3.2.3 数据类型</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">int8</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">int16</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">int32</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">uint</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">uint8</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">uint16</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">uint32</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">uint64</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">uintptr</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">float64</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">complex128</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">complex64</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">rune</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\">  </span><span style=\"color: #C792EA\">error</span></span></code></pre></div><h5 id=\"3-2-4-函数\"><a href=\"#3-2-4-函数\" class=\"headerlink\" title=\"3.2.4 函数\"></a>3.2.4 函数</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">make  len  cap  new  append  copy  close  delete  complex  real  imag  panic  recover</span></span></code></pre></div><h4 id=\"3-3-操作符与表达式\"><a href=\"#3-3-操作符与表达式\" class=\"headerlink\" title=\"3.3 操作符与表达式\"></a>3.3 操作符与表达式</h4><p>Go 语言内置的运算符有：</p>\n<ol>\n<li>算术运算符</li>\n<li>关系运算符</li>\n<li>逻辑运算符</li>\n<li>位运算符</li>\n<li>赋值运算符</li>\n</ol>\n<h5 id=\"3-3-1-算法术运算符\"><a href=\"#3-3-1-算法术运算符\" class=\"headerlink\" title=\"3.3.1 算法术运算符\"></a>3.3.1 算法术运算符</h5><table>\n<thead>\n<tr>\n<th align=\"center\">运算符</th>\n<th align=\"center\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">+</td>\n<td align=\"center\">相加</td>\n</tr>\n<tr>\n<td align=\"center\">-</td>\n<td align=\"center\">相减</td>\n</tr>\n<tr>\n<td align=\"center\">*</td>\n<td align=\"center\">相乘</td>\n</tr>\n<tr>\n<td align=\"center\">&#x2F;</td>\n<td align=\"center\">相除</td>\n</tr>\n<tr>\n<td align=\"center\">%</td>\n<td align=\"center\">求余</td>\n</tr>\n</tbody></table>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// arithmetic 算术运算</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">arithmetic</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> d </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> e </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> f </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a=</span><span style=\"color: #F07178\">%.3f</span><span style=\"color: #C3E88D\">, b=</span><span style=\"color: #F07178\">%.3f</span><span style=\"color: #C3E88D\">, c=</span><span style=\"color: #F07178\">%.3f</span><span style=\"color: #C3E88D\">, d=</span><span style=\"color: #F07178\">%.3f</span><span style=\"color: #C3E88D\">, e=</span><span style=\"color: #F07178\">%.3f</span><span style=\"color: #C3E88D\">, f=</span><span style=\"color: #F07178\">%.3f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> d</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> e</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> f</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"3-3-2-关系运算符\"><a href=\"#3-3-2-关系运算符\" class=\"headerlink\" title=\"3.3.2 关系运算符\"></a>3.3.2 关系运算符</h5><table>\n<thead>\n<tr>\n<th align=\"center\">运算符</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">=&#x3D;</td>\n<td align=\"left\">检查两个值是否相等，如果相等返回 True 否则返回 False</td>\n</tr>\n<tr>\n<td align=\"center\">!&#x3D;</td>\n<td align=\"left\">检查两个值是否不相等，如果不相等返回 True 否则返回 False</td>\n</tr>\n<tr>\n<td align=\"center\">&gt;</td>\n<td align=\"left\">检查左边值是否大于右边值，如果是返回 True 否则返回 False</td>\n</tr>\n<tr>\n<td align=\"center\">&gt;&#x3D;</td>\n<td align=\"left\">检查左边值是否大于等于右边值，如果是返回 True 否则返回 False</td>\n</tr>\n<tr>\n<td align=\"center\">&lt;</td>\n<td align=\"left\">检查左边值是否小于右边值，如果是返回 True 否则返回 False</td>\n</tr>\n<tr>\n<td align=\"center\">&lt;&#x3D;</td>\n<td align=\"left\">检查左边值是否小于等于右边值，如果是返回 True 否则返回 False</td>\n</tr>\n</tbody></table>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// relational 关系运算符</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">relational</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a==b吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a!=b吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&gt;b吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&gt;=b吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">&gt;=</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&lt;c吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&lt;=c吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"3-3-3-逻辑运算符\"><a href=\"#3-3-3-逻辑运算符\" class=\"headerlink\" title=\"3.3.3 逻辑运算符\"></a>3.3.3 逻辑运算符</h5><table>\n<thead>\n<tr>\n<th align=\"center\">运算符</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">&amp;&amp;</td>\n<td align=\"left\">逻辑 AND 运算符。 如果两边的操作数都是 True，则为 True，否则为 False</td>\n</tr>\n<tr>\n<td align=\"center\"></td>\n<td align=\"left\">|</td>\n</tr>\n<tr>\n<td align=\"center\">!</td>\n<td align=\"left\">逻辑 NOT 运算符。 如果条件为 True，则为 False，否则为 True</td>\n</tr>\n</tbody></table>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// logistic 逻辑运算符</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">logistic</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&gt;b &amp;&amp; b&gt;c吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&gt;b || b&gt;c吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">||</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&gt;b不成立，对吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!(</span><span style=\"color: #BABED8\">a </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">b&gt;c不成立，对吗 </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!(</span><span style=\"color: #BABED8\">b </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"3-3-4-位运算符\"><a href=\"#3-3-4-位运算符\" class=\"headerlink\" title=\"3.3.4 位运算符\"></a>3.3.4 位运算符</h5><table>\n<thead>\n<tr>\n<th align=\"center\">运算符</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">&amp;</td>\n<td align=\"left\">参与运算的两数各对应的二进位相与（两位均为1才为1）</td>\n</tr>\n<tr>\n<td align=\"center\">|</td>\n<td align=\"left\">参与运算的两数各对应的二进位相或（两位有一个为1就为1）</td>\n</tr>\n<tr>\n<td align=\"center\">^</td>\n<td align=\"left\">参与运算的两数各对应的二进位相异或，当两对应的二进位相同时为0，不同时为1。作为一元运算符时表示按位取反，，符号位也跟着变</td>\n</tr>\n<tr>\n<td align=\"center\">&lt;&lt;</td>\n<td align=\"left\">左移n位就是乘以2的n次方。a&lt;&lt;b是把a的各二进位全部左移b位，高位丢弃，低位补0。通过左移，符号位可能会变</td>\n</tr>\n<tr>\n<td align=\"center\">&gt;&gt;</td>\n<td align=\"left\">右移n位就是除以2的n次方。a&gt;&gt;b是把a的各二进位全部右移b位，正数高位补0，负数高位补1</td>\n</tr>\n</tbody></table>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// bit_op 位运算</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">bit_op</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">os arch </span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">, int size </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> runtime</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">GOARCH</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">IntSize</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// int是4字节还是8字节，取决于操作系统是32位还是64位</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">int32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">260</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">260     </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BinaryFormat</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">-260    </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BinaryFormat</span><span style=\"color: #89DDFF\">(-</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 负数用补码表示。在对应正数二进制表示的基础上，按拉取反，再末位加1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">260&amp;4   </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BinaryFormat</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">260|3   </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BinaryFormat</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">|</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">260^7   </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BinaryFormat</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">^</span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">     </span><span style=\"color: #676E95; font-style: italic\">// ^作为二元运算符时表示异或</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">^-260   </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BinaryFormat</span><span style=\"color: #89DDFF\">(^-</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">     </span><span style=\"color: #676E95; font-style: italic\">// ^作为一元运算符时表示按位取反，符号位也跟着变</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">-260&gt;&gt;10 </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BinaryFormat</span><span style=\"color: #89DDFF\">(-</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">&gt;&gt;</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 正数高位补0，负数高位补1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">-260&lt;&lt;3 </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BinaryFormat</span><span style=\"color: #89DDFF\">(-</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">&lt;&lt;</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">   </span><span style=\"color: #676E95; font-style: italic\">// 负数左移，可能变成正数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// Go没有循环（无符号）左/右移符号   &gt;&gt;&gt;  &lt;&lt;&lt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 输出一个int32对应的二进制表示</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BinaryFormat</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">n </span><span style=\"color: #C792EA\">int32</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">uint32</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">n</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">               </span><span style=\"color: #676E95; font-style: italic\">// 将传进来的int32类型数值转换为无符号的uint32并赋值给a</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sb </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Builder</span><span style=\"color: #89DDFF\">&#123;&#125;</span><span style=\"color: #BABED8\">      </span><span style=\"color: #676E95; font-style: italic\">// 拼接字符串</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    c </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">uint32</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">math</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Pow</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">31</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 求2的31次方的幂值 二进制为：10000000000000000000000000000000</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">32</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">c </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">0</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        c </span><span style=\"color: #89DDFF\">&gt;&gt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">String</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"3-3-5-赋值运算符\"><a href=\"#3-3-5-赋值运算符\" class=\"headerlink\" title=\"3.3.5 赋值运算符\"></a>3.3.5 赋值运算符</h5><table>\n<thead>\n<tr>\n<th align=\"center\">运算符</th>\n<th align=\"left\">描述</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">=</td>\n<td align=\"left\">简单的赋值运算符，将一个表达式的值赋给一个左值</td>\n</tr>\n<tr>\n<td align=\"center\">+&#x3D;</td>\n<td align=\"left\">相加后再赋值</td>\n</tr>\n<tr>\n<td align=\"center\">-&#x3D;</td>\n<td align=\"left\">相减后再赋值</td>\n</tr>\n<tr>\n<td align=\"center\">*&#x3D;</td>\n<td align=\"left\">相乘后再赋值</td>\n</tr>\n<tr>\n<td align=\"center\">&#x2F;&#x3D;</td>\n<td align=\"left\">相除后再赋值</td>\n</tr>\n<tr>\n<td align=\"center\">%&#x3D;</td>\n<td align=\"left\">求余后再赋值</td>\n</tr>\n<tr>\n<td align=\"center\">&lt;&lt;&#x3D;</td>\n<td align=\"left\">左移后赋值</td>\n</tr>\n<tr>\n<td align=\"center\">&gt;&gt;&#x3D;</td>\n<td align=\"left\">右移后赋值</td>\n</tr>\n<tr>\n<td align=\"center\">&amp;&#x3D;</td>\n<td align=\"left\">按位与后赋值</td>\n</tr>\n<tr>\n<td align=\"center\">|&#x3D;</td>\n<td align=\"left\">按位或后赋值</td>\n</tr>\n<tr>\n<td align=\"center\">^&#x3D;</td>\n<td align=\"left\">按位异或后赋值</td>\n</tr>\n</tbody></table>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// assignment 赋值运算</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">assignment</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a+=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">-=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a-=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">*=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a*=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">/=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a/=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">%=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a</span><span style=\"color: #F07178\">%%</span><span style=\"color: #C3E88D\">=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// %在fmt里有特殊含意，所以需要前面再加个%转义一下</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">&lt;&lt;=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&lt;&lt;=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">&gt;&gt;=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&gt;&gt;=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">&amp;=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a&amp;=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">|=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a|=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">^=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a^=b </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"3-4-变量、常量、字面量\"><a href=\"#3-4-变量、常量、字面量\" class=\"headerlink\" title=\"3.4 变量、常量、字面量\"></a>3.4 变量、常量、字面量</h4><h5 id=\"3-4-1-变量\"><a href=\"#3-4-1-变量\" class=\"headerlink\" title=\"3.4.1 变量\"></a>3.4.1 变量</h5><h6 id=\"3-4-1-1-变量类型\"><a href=\"#3-4-1-1-变量类型\" class=\"headerlink\" title=\"3.4.1.1 变量类型\"></a>3.4.1.1 变量类型</h6><table>\n<thead>\n<tr>\n<th align=\"center\">类型</th>\n<th align=\"center\">Go变量类型</th>\n<th align=\"center\">fmt输出</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">整型</td>\n<td align=\"center\">int int8 int16 int32 int64 uint uint8 uint16 uint32 uint64</td>\n<td align=\"center\">%d</td>\n</tr>\n<tr>\n<td align=\"center\">浮点型</td>\n<td align=\"center\">float32 float64</td>\n<td align=\"center\">%f %e %g</td>\n</tr>\n<tr>\n<td align=\"center\">布尔型</td>\n<td align=\"center\">bool</td>\n<td align=\"center\">%t</td>\n</tr>\n<tr>\n<td align=\"center\">指针</td>\n<td align=\"center\">uintptr</td>\n<td align=\"center\">%p</td>\n</tr>\n<tr>\n<td align=\"center\">引用</td>\n<td align=\"center\">map slice channel</td>\n<td align=\"center\">%v</td>\n</tr>\n<tr>\n<td align=\"center\">字节</td>\n<td align=\"center\">byte</td>\n<td align=\"center\">%c</td>\n</tr>\n<tr>\n<td align=\"center\">任意字符</td>\n<td align=\"center\">rune</td>\n<td align=\"center\">%c</td>\n</tr>\n<tr>\n<td align=\"center\">字符串</td>\n<td align=\"center\">string</td>\n<td align=\"center\">%s</td>\n</tr>\n<tr>\n<td align=\"center\">错误</td>\n<td align=\"center\">error</td>\n<td align=\"center\">%v</td>\n</tr>\n</tbody></table>\n<h6 id=\"3-4-1-2-变量声明\"><a href=\"#3-4-1-2-变量声明\" class=\"headerlink\" title=\"3.4.1.2 变量声明\"></a>3.4.1.2 变量声明</h6><p>Go中的变量需要声明后才能使用，同一作用域内不支持重复声明。并且Go的变量声明后必须使用。</p>\n<p><strong>标准声明</strong></p>\n<p>Go的变量声明格式为：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> 变量名 变量类型</span></span></code></pre></div><p>变量声明以关键字<code>var</code>开头，变量类型放在变量的后面，行尾无需分号。 举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> isOk </span><span style=\"color: #C792EA\">bool</span></span></code></pre></div><p><strong>批量声明</strong></p>\n<p>每声明一个变量就需要写<code>var</code>关键字会比较繁琐，Go中还支持批量变量声明：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\"> </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        age </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        isOk </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #BABED8\"> </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h6 id=\"3-4-1-3-变量的初始化\"><a href=\"#3-4-1-3-变量的初始化\" class=\"headerlink\" title=\"3.4.1.3 变量的初始化\"></a>3.4.1.3 变量的初始化</h6><p>Go在声明变量的时候，会自动对变量对应的内存区域进行初始化操作。每个变量会被初始化成其类型的默认值，例如： 整型和浮点型变量的默认值为<code>0</code>。 字符串变量的默认值为空字符串。 布尔型变量默认为<code>false</code>。 切片、函数、指针变量的默认为<code>nil</code>。</p>\n<p>当然我们也可在声明变量的时候为其指定初始值。变量初始化的标准格式如下：</p>\n<p><strong>标准格式</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> 变量名 类型 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> 表达式</span></span></code></pre></div><p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">pprof.cn</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> sex </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span></code></pre></div><p>或者一次初始化多个变量</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sex </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">pprof.cn</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span></code></pre></div><p><strong>类型推导</strong></p>\n<p>有时候我们会将变量的类型省略，这个时候编译器会根据等号右边的值来推导变量的类型完成初始化。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">pprof.cn</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> sex </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span></code></pre></div><p><strong>短变量声明</strong></p>\n<p>在函数内部，可以使用更简略的<code>:=</code>方式声明并初始化变量。</p>\n<p><strong>注意：短变量只能用于声明局部变量，不能用于全局变量的声明</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 全局变量m</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    n </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    m </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">200</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 此处声明局部变量m</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">m</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> n</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>匿名变量</strong></p>\n<p>在使用多重赋值时，如果想要忽略某个值，可以使用<code>匿名变量（anonymous variable）</code>。 匿名变量用一个下划线_表示，例如：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">foo</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Q1mi</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _ </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">foo</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">foo</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">x=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">y=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>匿名变量不占用命名空间，不会分配内存，所以匿名变量之间不存在重复声明。</p>\n<p><strong>注意事项：</strong></p>\n<ol>\n<li>函数外的每个语句都必须以关键字开始（<code>var</code>、<code>const</code>、<code>func</code> 等）</li>\n<li><code>:=</code>不能使用在函数外。</li>\n<li><code>_</code>多用于占位，表示忽略值</li>\n</ol>\n<h5 id=\"3-4-2-常量\"><a href=\"#3-4-2-常量\" class=\"headerlink\" title=\"3.4.2 常量\"></a>3.4.2 常量</h5><p>相对于变量，常量是恒定不变的值，多用于定义程序运行期间不会改变的那些值。 常量的声明和变量声明非常类似，只是把<code>var</code>换成了<code>const</code>，常量在定义的时候必须赋值。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> pi </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3.1415</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> e </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2.7182</span></span></code></pre></div><p>声明了<code>pi</code>和<code>e</code>这两个常量之后，在整个程序运行期间它们的值都不能再发生变化了。</p>\n<p>多个常量也可以一起声明：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        pi </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3.1415</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        e  </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2.7182</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p><code>const</code>同时声明多个常量时，如果省略了值则表示和上面一行的值相同。 例如：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>上面示例中，常量<code>n1、n2、n3</code>的值都是<code>100</code>。</p>\n<h6 id=\"3-4-2-1-iota\"><a href=\"#3-4-2-1-iota\" class=\"headerlink\" title=\"3.4.2.1 iota\"></a>3.4.2.1 iota</h6><p><code>iota</code>是<code>go</code>语言的常量计数器，只能在常量的表达式中使用。<br><code>iota</code>在<code>const</code>关键字出现时将被重置为<code>0</code>。<code>const</code>中每新增一行常量声明将使<code>iota</code>计数一次(<code>iota</code>可理解为<code>const</code>语句块中的行索引)。 使用<code>iota</code>能简化定义，在定义枚举时很有用。</p>\n<p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n2        </span><span style=\"color: #676E95; font-style: italic\">//1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n3        </span><span style=\"color: #676E95; font-style: italic\">//2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n4        </span><span style=\"color: #676E95; font-style: italic\">//3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p><strong>几个常见的iota示例:</strong></p>\n<p>使用<code>_</code>跳过某些值</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n2        </span><span style=\"color: #676E95; font-style: italic\">//1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        _</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n4 </span><span style=\"color: #676E95; font-style: italic\">//3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p><code>iota</code>声明中间插队</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n2 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">//100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n3 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n4        </span><span style=\"color: #676E95; font-style: italic\">//3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> n5 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//0</span></span></code></pre></div><p>定义数量级 （这里的<code>&lt;&lt;</code>表示左移操作，<code>1 &lt;&lt; 10</code>表示将<code>1</code>的二进制表示向左移<code>10</code>位，也就是由<code>1</code>变成了<code>10000000000</code>，也就是十进制的<code>1024</code>。同理<code>2 &lt;&lt; 2</code>表示将<code>2</code>的二进制表示向左移<code>2</code>位，也就是由<code>10</code>变成了<code>1000</code>，也就是十进制的<code>8</code>。）</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        _  </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        KB </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        MB </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        GB </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        TB </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        PB </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>多个<code>iota</code>定义在一行</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//1,2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        c</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> d                      </span><span style=\"color: #676E95; font-style: italic\">//2,3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        e</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> f                      </span><span style=\"color: #676E95; font-style: italic\">//3,4</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h5 id=\"3-4-3-字面量\"><a href=\"#3-4-3-字面量\" class=\"headerlink\" title=\"3.4.3 字面量\"></a>3.4.3 字面量</h5><p>字面量：没有出现变量名，直接出现了值。</p>\n<p>基础类型的字面量相当于是常量。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">04</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4.00</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">      </span><span style=\"color: #676E95; font-style: italic\">// 用到了整型字面量和浮点型字面量</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">.4i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">             </span><span style=\"color: #676E95; font-style: italic\">// 虚数字面量 0.4i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">\\u4f17</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">众</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// Unicode和rune字面量</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Hello</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #C3E88D\">World</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #C3E88D\">!</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">     </span><span style=\"color: #676E95; font-style: italic\">// 字符串字面量</span></span></code></pre></div><h5 id=\"3-4-4-变量作用域\"><a href=\"#3-4-4-变量作用域\" class=\"headerlink\" title=\"3.4.4 变量作用域\"></a>3.4.4 变量作用域</h5><p>对于全局变量，如果以大写字母开头，所有地方都可以访问，跨<code>package</code>访问时需要带上<code>package</code>名称；如果以小写字母开头，则本<code>package</code>内都可以访问。<br>函数内部的局部变量，仅本函数内可以访问。<code>&#123;&#125;</code>可以固定一个作用域。内部声明的变量可以跟外部声明的变量有冲突，以内部的为准（就近原则）。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    A </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 所有地方都可以访问</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 本package内可以访问</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">foo</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    b </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 本函数内可以访问</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        b </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 本作用域内可以访问</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"3-5-注释\"><a href=\"#3-5-注释\" class=\"headerlink\" title=\"3.5 注释\"></a>3.5 注释</h4><h5 id=\"3-5-1-注释的形式\"><a href=\"#3-5-1-注释的形式\" class=\"headerlink\" title=\"3.5.1 注释的形式\"></a>3.5.1 注释的形式</h5><ul>\n<li>单行注释，以<code>//</code>打头。</li>\n<li>多行注释有2种形式：</li>\n</ul>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">1.  连续多行以`//`打头，注意多行注释之间不能出现空行。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">2.  在段前使用`/*`，段尾使用`*/`。</span></span></code></pre></div><ul>\n<li>注释行前加缩进即可写go代码。</li>\n<li>注释中给定的关键词。<code>NOTE:</code>引人注意，<code>TODO:</code>将来需要优化，<code>Deprecated:</code>变量或函数强烈建议不要再使用。</li>\n</ul>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Add 2个整数相加</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 返回和。</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// NOTE: 注释可以有多行，但中间不能出现空行（仅有//不算空行）。</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">Sub 函数使用示例：</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">  for i:=0;i&lt;3;i++&#123;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">      Sub(i+1, i)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">  &#125;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">看到了吗？只需要行前缩进，注释里就可以写go代码，是不是很简单。</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">*/</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Sub</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// TODO: Prod 该函数不能并发调用，需要优化</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Prod</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Deprecated: Div 不要再调用了</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Div</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"3-5-2-注释的位置\"><a href=\"#3-5-2-注释的位置\" class=\"headerlink\" title=\"3.5.2 注释的位置\"></a>3.5.2 注释的位置</h5><p>针对行的注释在行上方或右侧。函数的上方在<code>func xxx()</code>上方。结构体的注释在<code>type xxx struct</code>上方。包注释在<code>package xxx</code>的上方。一个包只需要在一个地方写包注释，通常会专门写一个<code>doc.go</code>，里面只有一行<code>package xxx</code>和关于包的注释。</p>\n<p>（关于<code>doc</code>这里不详细说明，感兴趣的可以去搜一下）</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// FormatBool, FormatFloat, FormatInt, and FormatUint convert values to strings:</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//\ts := strconv.FormatBool(true)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//\ts := strconv.FormatFloat(3.1415, &#39;E&#39;, -1, 64)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//\ts := strconv.FormatInt(-42, 16)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">//\ts := strconv.FormatUint(42, 16)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">fmt</span></span></code></pre></div><h4 id=\"3-6-Go-语言变量、常量命名规则\"><a href=\"#3-6-Go-语言变量、常量命名规则\" class=\"headerlink\" title=\"3.6 Go 语言变量、常量命名规则\"></a>3.6 Go 语言变量、常量命名规则</h4><ol>\n<li>变量名称必须由数字、字母、下划线组成。</li>\n<li>标识符开头不能是数字。</li>\n<li>标识符不能是保留字和关键字。</li>\n<li>变量的名字是区分大小写的如：<code>age</code>和<code>Age</code>是不同的变量。在实际的运用中,也建议,不要 用一个单词大小写区分两个变量。</li>\n<li>标识符（变量名称）一定要见名思意：变量名称建议用名词，方法名称建议用动词。</li>\n<li>变量命名一般采用驼峰式，当遇到特有名词（缩写或简称，如<code>DNS</code>）的时候，特有名词 根据是否私有全部大写或小写。</li>\n</ol>\n<h4 id=\"3-7-Go-语言代码风格\"><a href=\"#3-7-Go-语言代码风格\" class=\"headerlink\" title=\"3.7 Go 语言代码风格\"></a>3.7 Go 语言代码风格</h4><ol>\n<li><p>代码每一行结束后不用写分号（;）</p>\n</li>\n<li><p>运算符左右建议各加一个空格。</p>\n</li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> username </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">scc749</span><span style=\"color: #89DDFF\">&quot;</span></span></code></pre></div><ol start=\"3\">\n<li><p>Go 语言程序员推荐使用驼峰式命名<br>当名字有几个单词组成的时优先使用大小写分隔。</p>\n</li>\n<li><p>强制的代码风格<br>左括号必须紧接着语句不换行，这个特性刚开始会使开发者不习惯，但随着对 Go 语言的不断熟悉，就会发现风格统一让大家在阅读代码时把注意力集中到了解决问题上，而不是代码风格上。</p>\n</li>\n<li><p><code>go fmt</code>主要用于格式化文档，让所有人的代码风格保持一致（命令行命令，已经安装VSCode的Go工具插件可以忽略，因为保存后可以自动格式化）</p>\n<p>D:\\go_project\\src\\day1&gt; go fmt hello.go<br>hello.go</p>\n</li>\n</ol>\n<hr>\n<h3 id=\"模块四：Go数据类型\"><a href=\"#模块四：Go数据类型\" class=\"headerlink\" title=\"模块四：Go数据类型\"></a>模块四：Go数据类型</h3><h4 id=\"4-1-学习目标\"><a href=\"#4-1-学习目标\" class=\"headerlink\" title=\"4.1 学习目标\"></a>4.1 学习目标</h4><ol>\n<li>了解Go的数据类型</li>\n<li>熟练掌握数组、切片、字符串、map的相关知识点，并可以在复杂的环境下熟练使用</li>\n</ol>\n<h4 id=\"4-2-数据类型概览\"><a href=\"#4-2-数据类型概览\" class=\"headerlink\" title=\"4.2 数据类型概览\"></a>4.2 数据类型概览</h4><h5 id=\"4-2-1-基础数据类型\"><a href=\"#4-2-1-基础数据类型\" class=\"headerlink\" title=\"4.2.1 基础数据类型\"></a>4.2.1 基础数据类型</h5><table>\n<thead>\n<tr>\n<th align=\"center\">类型</th>\n<th align=\"center\">长度(字节)</th>\n<th align=\"center\">默认值</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">bool</td>\n<td align=\"center\">1</td>\n<td align=\"center\">false</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">byte</td>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n<td align=\"center\">uint8，取值范围[0,255]</td>\n</tr>\n<tr>\n<td align=\"center\">rune</td>\n<td align=\"center\">4</td>\n<td align=\"center\">0</td>\n<td align=\"center\">Unicode Code Point, int32</td>\n</tr>\n<tr>\n<td align=\"center\">int, uint</td>\n<td align=\"center\">4或8</td>\n<td align=\"center\">0</td>\n<td align=\"center\">32 或 64 位，取决于操作系统</td>\n</tr>\n<tr>\n<td align=\"center\">int8, uint8</td>\n<td align=\"center\">1</td>\n<td align=\"center\">0</td>\n<td align=\"center\">-128 ~ 127, 0 ~ 255</td>\n</tr>\n<tr>\n<td align=\"center\">int16, uint16</td>\n<td align=\"center\">2</td>\n<td align=\"center\">0</td>\n<td align=\"center\">-32768 ~ 32767, 0 ~ 65535</td>\n</tr>\n<tr>\n<td align=\"center\">int32, uint32</td>\n<td align=\"center\">4</td>\n<td align=\"center\">0</td>\n<td align=\"center\">-21亿~ 21亿, 0 ~ 42亿，rune是int32 的别名</td>\n</tr>\n<tr>\n<td align=\"center\">int64, uint64</td>\n<td align=\"center\">8</td>\n<td align=\"center\">0</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">float32</td>\n<td align=\"center\">4</td>\n<td align=\"center\">0.0</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">float64</td>\n<td align=\"center\">8</td>\n<td align=\"center\">0.0</td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">complex64</td>\n<td align=\"center\">8</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">complex128</td>\n<td align=\"center\">16</td>\n<td align=\"center\"></td>\n<td align=\"center\"></td>\n</tr>\n<tr>\n<td align=\"center\">uintptr</td>\n<td align=\"center\">4或8</td>\n<td align=\"center\"></td>\n<td align=\"center\">以存储指针的 uint32 或 uint64 整数</td>\n</tr>\n</tbody></table>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">errors</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">runtime</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">strconv</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">unsafe</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">os arch </span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">, int size </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> runtime</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">GOARCH</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">IntSize</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// int是4字节还是8字节，取决于操作系统是32位还是64位</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int8</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #C792EA\">int16</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> d </span><span style=\"color: #C792EA\">int32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> e </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> f </span><span style=\"color: #C792EA\">uint</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> g </span><span style=\"color: #C792EA\">uint8</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> h </span><span style=\"color: #C792EA\">uint16</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #C792EA\">uint32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #C792EA\">uint64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, b=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, c=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, d=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, e=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, f=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, g=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, h=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, i=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, j=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> d</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> e</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> f</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> g</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> h</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> k </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> l </span><span style=\"color: #C792EA\">float64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">k=</span><span style=\"color: #F07178\">%f</span><span style=\"color: #C3E88D\">, l=</span><span style=\"color: #F07178\">%.2f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> k</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> l</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//%.2f保留2位小数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #C792EA\">complex128</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">complex</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> n </span><span style=\"color: #C792EA\">complex64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">complex</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type of m is </span><span style=\"color: #F07178\">%T</span><span style=\"color: #C3E88D\">, type of n is </span><span style=\"color: #F07178\">%T</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> m</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> n</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// %T输出变量类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">m=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\">, n=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> m</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> n</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">                       </span><span style=\"color: #676E95; font-style: italic\">// 按值的本来值输出</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">m=</span><span style=\"color: #F07178\">%+v</span><span style=\"color: #C3E88D\">, n=</span><span style=\"color: #F07178\">%+v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> m</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> n</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">                     </span><span style=\"color: #676E95; font-style: italic\">// 在 %v 基础上，对结构体字段名和值进行展开</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">m=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #C3E88D\">, n=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> m</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> n</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">                     </span><span style=\"color: #676E95; font-style: italic\">// 输出 Go 语言语法格式的值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">m的实部</span><span style=\"color: #F07178\">%f</span><span style=\"color: #C3E88D\">, m的虚部</span><span style=\"color: #F07178\">%f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">real</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">m</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">imag</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">m</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">m的实部</span><span style=\"color: #F07178\">%e</span><span style=\"color: #C3E88D\">, m的虚部</span><span style=\"color: #F07178\">%g</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">real</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">m</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">imag</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">m</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// %e科学计数法，%g根据实际情况采用%e或%f格式（以获得更简洁、准确的输出）</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    o </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\">                                        </span><span style=\"color: #676E95; font-style: italic\">// 等价于var o bool = true</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">o=</span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> o</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">                          </span><span style=\"color: #676E95; font-style: italic\">// %t布尔变量</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> pointer unsafe</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Pointer </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> unsafe</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Pointer</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> p </span><span style=\"color: #C792EA\">uintptr</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">uintptr</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">pointer</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> ptr </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">a</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p=</span><span style=\"color: #F07178\">%x</span><span style=\"color: #C3E88D\"> pointer=</span><span style=\"color: #F07178\">%p</span><span style=\"color: #C3E88D\"> ptr=</span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> pointer</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ptr</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// %p输出地址，%x十六进制</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> q </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">                                        </span><span style=\"color: #676E95; font-style: italic\">// byte是uint，取值范围[0,255]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">q=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, binary of q is </span><span style=\"color: #F07178\">%b</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> q</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> q</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">           </span><span style=\"color: #676E95; font-style: italic\">// %b输出二进制</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> r </span><span style=\"color: #C792EA\">rune</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">☻</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">                                        </span><span style=\"color: #676E95; font-style: italic\">// rune实际上是int32，即可以表示2147483647种字符，包括所有汉字和各种特殊符号</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">r=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, r=</span><span style=\"color: #F07178\">%U</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> r</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> r</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">                        </span><span style=\"color: #676E95; font-style: italic\">// %U Unicode 字符</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">I&#39;m 绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s=</span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> t </span><span style=\"color: #C792EA\">error</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> errors</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">New</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">my error</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">error is </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">error is </span><span style=\"color: #F07178\">%+v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 在 %v 基础上，对结构体字段名和值进行展开</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">error is </span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 输出 Go 语言语法格式的值</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>数值型变量的默认值是<code>0</code>，字符串的默认值是空字符串，布尔型变量的默认值是<code>false</code>，引用类型、函数、指针、接口的默认值是<code>nil</code>。数组的默认值取每个元素对应类型的默认值，结构体的默认值取每个成员变量对应类型的默认值。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">byte</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> f </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> t </span><span style=\"color: #C792EA\">bool</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> r </span><span style=\"color: #C792EA\">rune</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> arr </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slc </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">default value of int </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">default value of byte </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">default value of float </span><span style=\"color: #F07178\">%.2f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> f</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">default value of bool </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">default value of string [</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">]</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">default value of rune </span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, [</span><span style=\"color: #F07178\">%c</span><span style=\"color: #C3E88D\">]</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> r</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> r</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">default int array is </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 取每个元素对应类型的默认值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">default slice is nil </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slc </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//输出</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       default value of int 0</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       default value of byte 0</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       default value of float 0.00</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       default value of bool false</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       default value of string []</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       default value of rune 0, []</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       default int array is [0 0 0]</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       default slice is nil true</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">    */</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"4-2-2-复合数据类型\"><a href=\"#4-2-2-复合数据类型\" class=\"headerlink\" title=\"4.2.2 复合数据类型\"></a>4.2.2 复合数据类型</h5><table>\n<thead>\n<tr>\n<th align=\"center\">类型</th>\n<th align=\"center\">默认值</th>\n<th align=\"center\">说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">array</td>\n<td align=\"center\">取每个元素对应类型的默认值</td>\n<td align=\"center\">值类型</td>\n</tr>\n<tr>\n<td align=\"center\">struct</td>\n<td align=\"center\">取每个成员变量对应类型的默认值</td>\n<td align=\"center\">值类型</td>\n</tr>\n<tr>\n<td align=\"center\">string</td>\n<td align=\"center\">“”</td>\n<td align=\"center\">UTF-8 字符串</td>\n</tr>\n<tr>\n<td align=\"center\">slice</td>\n<td align=\"center\">nil</td>\n<td align=\"center\">引用类型</td>\n</tr>\n<tr>\n<td align=\"center\">map</td>\n<td align=\"center\">nil</td>\n<td align=\"center\">引用类型</td>\n</tr>\n<tr>\n<td align=\"center\">channel</td>\n<td align=\"center\">nil</td>\n<td align=\"center\">引用类型</td>\n</tr>\n<tr>\n<td align=\"center\">interface</td>\n<td align=\"center\">nil</td>\n<td align=\"center\">接口</td>\n</tr>\n<tr>\n<td align=\"center\">function</td>\n<td align=\"center\">nil</td>\n<td align=\"center\">函数</td>\n</tr>\n</tbody></table>\n<h5 id=\"4-2-3-自定义类型\"><a href=\"#4-2-3-自定义类型\" class=\"headerlink\" title=\"4.2.3 自定义类型\"></a>4.2.3 自定义类型</h5><p><strong>类型别名</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">byte</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uint8</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">rune</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int32</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">semaphore</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uint8</span></span></code></pre></div><p><strong>自定义类型</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">user</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\">age </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 用分号把多行代码隔开</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">signal</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uint8</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">ms</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">add</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span></span></code></pre></div><h4 id=\"4-3-数组\"><a href=\"#4-3-数组\" class=\"headerlink\" title=\"4.3 数组\"></a>4.3 数组</h4><p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/f1ea59332c92be7d78fa721c7ad99dbe_1739762142589.png\" alt=\"avatar\"></p>\n<ol>\n<li><p>数组：是同一种数据类型的固定长度的序列。</p>\n</li>\n<li><p>数组定义：<code>var a [len]int</code>，比如：<code>var a [5]int</code>，数组长度必须是常量，且是类型的组成部分。一旦定义，长度不能变。</p>\n</li>\n<li><p>长度是数组类型的一部分，因此，<code>var a[5] int</code>和<code>var a[10]int</code>是不同的类型。</p>\n</li>\n<li><p>数组可以通过下标进行访问，下标是从0开始，最后一个元素下标是：<code>len-1</code></p>\n</li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> index</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><ol start=\"5\">\n<li><p>访问越界，如果下标在数组合法范围之外，则触发访问越界，会<code>panic</code></p>\n</li>\n<li><p>数组是值类型，赋值和传参会复制整个数组，而不是指针。因此改变副本的值，不会改变本身的值。</p>\n</li>\n<li><p>支持 <code>==</code>、<code>!=</code> 操作符，因为内存总是被初始化过的。</p>\n</li>\n<li><p>指针数组 <code>[n]*T</code>，数组指针 <code>*[n]T</code>。</p>\n</li>\n</ol>\n<h5 id=\"4-3-1-数组的初始化\"><a href=\"#4-3-1-数组的初始化\" class=\"headerlink\" title=\"4.3.1 数组的初始化\"></a>4.3.1 数组的初始化</h5><h6 id=\"4-3-1-1-一维数组初始化\"><a href=\"#4-3-1-1-一维数组初始化\" class=\"headerlink\" title=\"4.3.1.1 一维数组初始化\"></a>4.3.1.1 一维数组初始化</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> arr0 </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> arr1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> arr2 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> str </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">hello world</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">tom</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">           </span><span style=\"color: #676E95; font-style: italic\">// 未初始化元素值为 0。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    b </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\">   </span><span style=\"color: #676E95; font-style: italic\">// 通过初始化值确定数组长度。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    c </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 使用引号初始化元素。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    d </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...]struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        age  </span><span style=\"color: #C792EA\">uint8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user1</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">&#125;,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 可省略元素类型。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user2</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">&#125;,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 别忘了最后一行的逗号。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> str</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> d</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h6 id=\"4-3-1-2-二维数组初始化\"><a href=\"#4-3-1-2-二维数组初始化\" class=\"headerlink\" title=\"4.3.1.2 二维数组初始化\"></a>4.3.1.2 二维数组初始化</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> arr0 </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> arr1 </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...][</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&lt;!--</span><span style=\"color: #BABED8\">swig￼</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">--&gt;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&lt;!--</span><span style=\"color: #BABED8\">swig￼</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    b </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...][</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&lt;!--</span><span style=\"color: #BABED8\">swig￼</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">--&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 第 2 纬度不能用 &quot;...&quot;。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"4-3-2-访问数组里的元素\"><a href=\"#4-3-2-访问数组里的元素\" class=\"headerlink\" title=\"4.3.2 访问数组里的元素\"></a>4.3.2 访问数组里的元素</h5><ul>\n<li>通过index访问<ul>\n<li>首元素 <code>arr[0]</code></li>\n<li>末元素 <code>arr[len(arr)-1]</code></li>\n</ul>\n</li>\n<li>访问二维数组里的元素<ul>\n<li>位于第三行第四列的元素 <code>arr[2][3]</code></li>\n</ul>\n</li>\n</ul>\n<h5 id=\"4-3-3-遍历数组\"><a href=\"#4-3-3-遍历数组\" class=\"headerlink\" title=\"4.3.3 遍历数组\"></a>4.3.3 遍历数组</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 遍历数组里的元素</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> arr </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">index=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, element=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 或者这样遍历数组</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// len(arr)获取数组的长度</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">index=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, element=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 遍历二维数组</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> row</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> array </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> arr </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 先取出某一行</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> col</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> array </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 再遍历这一行</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">arr[</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">][</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">]=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> row</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> col</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>通过for range遍历数组时取得的是数组里每一个元素的拷贝。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">arr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> arr </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// ele是arr中元素的拷贝</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 修改arr里的元素，不影响ele</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> ele</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ele </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 修改ele不影响arr</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> ele</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"4-3-4-内置函数-len-和-cap\"><a href=\"#4-3-4-内置函数-len-和-cap\" class=\"headerlink\" title=\"4.3.4 内置函数 len() 和 cap()\"></a>4.3.4 内置函数 len() 和 cap()</h5><p>在数组上调用<code>cap()函数</code>表示capacity容量，即给数组分配的内存空间可以容纳多少个元素；<code>len()函数</code>代表length长度，即目前数组里有几个元素。由于数组初始化之后长度不会改变，不需要给它预留内存空间，所以<code>len(arr)==cap(arr)</code>。对于多维数组，其<code>cap</code>和<code>len</code>指第一维的长度。</p>\n<h5 id=\"4-3-5-数组拷贝和传参\"><a href=\"#4-3-5-数组拷贝和传参\" class=\"headerlink\" title=\"4.3.5 数组拷贝和传参\"></a>4.3.5 数组拷贝和传参</h5><p>数组的长度和类型都是数组类型的一部分，函数传递数组类型时这两部分都必须吻合。Go没有按引用传参，全都是按值传参，即传递数组实际上传的是数组的拷贝，当数组的长度很大时，仅传参开销都很大。如果想修改函数外部的数组，就把它的指针（数组在内存里的地址）传进来。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 参数必须是长度为5的int型数组（注意长度必须是5）</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">update_array1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">array in function, address is </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">888</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">update_array2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr </span><span style=\"color: #89DDFF\">*[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">array in function, address is </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;((*</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">888</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 因为传的是数组指针，所以直接在原来的内存空间上进行修改</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"4-4-切片\"><a href=\"#4-4-切片\" class=\"headerlink\" title=\"4.4 切片\"></a>4.4 切片</h4><p>切片是一个结构体，包含三个成员变量，<code>array</code>指向一块连续的内存空间，<code>cap</code>表示这块内存的大小，<code>len</code>表示目前该内存里存储了多少元素。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">slice</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    array unsafe</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Pointer</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    len   </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    cap   </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/b86d0b7a10ae02d706378dc5d267be4c_1739762143339.png\" alt=\"avatar\"></p>\n<p>需要说明，<code>slice</code>并不是数组或数组指针。它通过内部指针和相关属性引用数组片段，以实现变长方案。</p>\n<ol>\n<li>切片：切片是数组的一个引用，因此切片是引用类型。但自身是结构体，值拷贝传递。</li>\n<li>切片的长度可以改变，因此，切片是一个可变的数组。</li>\n<li>切片遍历方式和数组一样，可以用<code>len()</code>求长度。表示可用元素数量，读写操作不能超过该限制。</li>\n<li><code>cap</code>可以求出<code>slice</code>最大扩张容量，不能超出数组限制。<code>0 &lt;= len(slice) &lt;= len(array)</code>，其中<code>array</code>是<code>slice</code>引用的数组。</li>\n<li>切片的定义：<code>var 变量名 []类型</code>，比如<code>var str []string var arr []int</code>。</li>\n<li>如果<code>slice == nil</code>，那么<code>len</code>、<code>cap</code>结果都等于<code>0</code>。</li>\n</ol>\n<h5 id=\"4-4-1-创建切片的各种方式\"><a href=\"#4-4-1-创建切片的各种方式\" class=\"headerlink\" title=\"4.4.1 创建切片的各种方式\"></a>4.4.1 创建切片的各种方式</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//1.声明切片</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s1 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> s1 </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">是空</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">不是空</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 2.:=</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 3.make()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s3 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 4.初始化赋值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s4 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s4</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s5 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s5</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 5.从数组切片</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    arr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s6 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 前包后不包</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s6 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s6</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"4-4-2-切片的初始化\"><a href=\"#4-4-2-切片的初始化\" class=\"headerlink\" title=\"4.4.2 切片的初始化\"></a>4.4.2 切片的初始化</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">全局：</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> arr </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">9</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice0 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">start</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">end</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice1 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #BABED8\">end</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">        </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice2 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">start</span><span style=\"color: #89DDFF\">:]</span><span style=\"color: #BABED8\">        </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice3 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[:]</span><span style=\"color: #BABED8\"> </span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice4 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">      </span><span style=\"color: #676E95; font-style: italic\">// 去掉切片的最后一个元素</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">局部：</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">arr2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">9</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">slice5 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">start</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">end</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">slice6 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #BABED8\">end</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">        </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">slice7 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">start</span><span style=\"color: #89DDFF\">:]</span><span style=\"color: #BABED8\">     </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">slice8 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[:]</span><span style=\"color: #BABED8\">  </span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">slice9 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 去掉切片的最后一个元素</span></span></code></pre></div><table>\n<thead>\n<tr>\n<th align=\"left\"><strong>操作</strong></th>\n<th align=\"left\"><strong>含义</strong></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\"><strong>s[n]</strong></td>\n<td align=\"left\">切片 s 中索引位置为 n 的项</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>s[:]</strong></td>\n<td align=\"left\">从切片 s 的索引位置 0 到 len(s)-1 处所获得的切片</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>s[low:]</strong></td>\n<td align=\"left\">从切片 s 的索引位置 low到 len(s)-1 处所获得的切片</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>s[:high]</strong></td>\n<td align=\"left\">从切片 s 的索引位置 0 到 high 处所获得的切片，len&#x3D;high</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>s[low:high]</strong></td>\n<td align=\"left\">从切片 s 的索引位置 low到 high 处所获得的切片，len&#x3D;high-low</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>s[low:high:max]</strong></td>\n<td align=\"left\">从切片 s 的索引位置 low到 high 处所获得的切片，len&#x3D;high-low，cap&#x3D;max-low</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>len(s)</strong></td>\n<td align=\"left\">切片 s 的长度，总是&lt;&#x3D;cap(s)</td>\n</tr>\n<tr>\n<td align=\"left\"><strong>cap(s)</strong></td>\n<td align=\"left\">切片 s 的容量，总是&gt;&#x3D;len(s)</td>\n</tr>\n</tbody></table>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> arr </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">9</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice0 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice1 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// 可以简写为 var slice []int = arr[:end]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice2 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">       </span><span style=\"color: #676E95; font-style: italic\">// 可以简写为 var slice[]int = arr[start:]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice3 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// var slice []int = arr[:]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice4 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">      </span><span style=\"color: #676E95; font-style: italic\">// 去掉切片的最后一个元素</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">全局变量：arr </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">全局变量：slice0 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice0</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">全局变量：slice1 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">全局变量：slice2 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">全局变量：slice3 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">全局变量：slice4 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice4</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">-----------------------------------</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    arr2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">9</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice5 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice6 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">         </span><span style=\"color: #676E95; font-style: italic\">// 可以简写为 slice := arr[:end]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice7 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// 可以简写为 slice := arr[start:]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice8 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)]</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// slice := arr[:]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice9 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 去掉切片的最后一个元素</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">局部变量： arr2 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">局部变量： slice5 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice5</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">局部变量： slice6 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice6</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">局部变量： slice7 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice7</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">局部变量： slice8 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice8</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">局部变量： slice9 </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice9</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"4-4-3-通过make来创建切片\"><a href=\"#4-4-3-通过make来创建切片\" class=\"headerlink\" title=\"4.4.3 通过make来创建切片\"></a>4.4.3 通过make来创建切片</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice </span><span style=\"color: #89DDFF\">[]type</span><span style=\"color: #BABED8\"> = </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #BABED8\">type</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> len</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice  </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #BABED8\">type</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> len</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice  </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #BABED8\">type</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> len</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> cap</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>代码：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice0 </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice2 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">make全局slice0 ：</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice0</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">make全局slice1 ：</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">make全局slice2 ：</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">--------------------------------------</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice3 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice4 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    slice5 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">make局部slice3 ：</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">make局部slice4 ：</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice4</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">make局部slice5 ：</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> slice5</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"4-4-4-用append内置函数操作切片（切片追加）\"><a href=\"#4-4-4-用append内置函数操作切片（切片追加）\" class=\"headerlink\" title=\"4.4.4 用append内置函数操作切片（切片追加）\"></a>4.4.4 用append内置函数操作切片（切片追加）</h5><p>切片相对于数组最大的特点就是可以追加元素，可以自动扩容。追加的元素放到预留的内存空间里，同时len加1。如果预留空间已用完，则会重新申请一块更大的内存空间，capacity大约变成之前的2倍(cap&lt;1024)或1.25倍(cap&gt;1024)。把原内存空间的数据拷贝过来，在新内存空间上执行append操作。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// s=[1,2,3]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s[0] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #C3E88D\">, s=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       capacity还够用，直接把追加的元素放到预留的内存空间上</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">    */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 可以一次append多个元素</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s[0] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #C3E88D\">, s=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">       capacity不够用了，得申请一片新的内存，把老数据先拷贝过来，在新内存上执行append操作</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">    */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s[0] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #C3E88D\">, s=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"4-4-5-slice中cap重新分配规律\"><a href=\"#4-4-5-slice中cap重新分配规律\" class=\"headerlink\" title=\"4.4.5 slice中cap重新分配规律\"></a>4.4.5 slice中cap重新分配规律</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 探究capacity扩容规律</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">expansion</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    prevCap </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">cap</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        s </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        currCap </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">cap</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> currCap </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> prevCap </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\">// 每次扩容都是扩到原先的2倍</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">capacity从</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">变成</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> prevCap</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> currCap</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            prevCap </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> currCap</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"4-4-6-切片的拷贝\"><a href=\"#4-4-6-切片的拷贝\" class=\"headerlink\" title=\"4.4.6 切片的拷贝\"></a>4.4.6 切片的拷贝</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">slice s1 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">slice s2 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">copy</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">copied slice s1 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">copied slice s2 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s3 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">slice s3 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s3 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s2</span><span style=\"color: #89DDFF\">...)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">appended slice s3 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s3 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">last slice s3 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">slice s1 : [1 2 3 4 5]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">slice s2 : [0 0 0 0 0 0 0 0 0 0]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">copied slice s1 : [1 2 3 4 5]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">copied slice s2 : [1 2 3 4 5 0 0 0 0 0]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">slice s3 : [1 2 3]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">appended slice s3 : [1 2 3 1 2 3 4 5 0 0 0 0 0]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">last slice s3 : [1 2 3 1 2 3 4 5 0 0 0 0 0 4 5 6]</span></span></code></pre></div><p>copy ：<code>copy()函数</code>在两个<code>slice</code>间复制数据，复制长度以<code>len</code>小的为准。两个<code>slice</code>可指向同一底层数组，允许元素区间重叠。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    data </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[...]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">9</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">array data : </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> data</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> data</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">:]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> data</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">slice s1 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">slice s2 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">copy</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">copied slice s1 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">copied slice s2 : </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">last array data : </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> data</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果:</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">array data :  [0 1 2 3 4 5 6 7 8 9]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">slice s1 : [8 9]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">slice s2 : [0 1 2 3 4]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">copied slice s1 : [8 9]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">copied slice s2 : [8 9 2 3 4]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">last array data :  [8 9 2 3 4 5 6 7 8 9]</span></span></code></pre></div><p>应及时将所需数据<code>copy</code>到较小的<code>slice</code>，以便释放超大号底层数组内存。</p>\n<h5 id=\"4-4-7-切片resize（调整大小）\"><a href=\"#4-4-7-切片resize（调整大小）\" class=\"headerlink\" title=\"4.4.7 切片resize（调整大小）\"></a>4.4.7 切片resize（调整大小）</h5><p>通过指定起止下标，可以从大切片中截取一个子切片。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">\t</span><span style=\"color: #676E95; font-style: italic\">// len=3, cap=5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sub_slice </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">\t\t</span><span style=\"color: #676E95; font-style: italic\">// len=2, cap=4</span></span></code></pre></div><p>刚开始，子切片和母切片共享底层的内存空间，修改子切片会反映到母切片上，在子切片上执行<code>append()函数</code>会把新元素放到母切片预留的内存空间上。当子切片不断执行<code>append()函数</code>，耗完了母切片预留的内存空间，子切片跟母切片就会发生内存分离，此后两个切片没有任何关系。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/518c0fa9b022f36f05e2fe9c5a9094a9_1739762143339.png\" alt=\"avatar\"></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">sub_slice</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">        截取一部分，创造子切片，此时子切片与母切片(或母数组)共享底层内存空间，母切片的capacity子切片可能直接用</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">    */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// s=[1,2,3]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s[1] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 从切片创造子切片，len=cap=2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">len </span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> cap </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">cap</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">        母切片的capacity还允许子切片执行append操作</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">    */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 可以一次append多个元素</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\">, sub_slice=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\">, s[1] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #C3E88D\">, sub_slice[0] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sub_slice</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">        母切片的capacity用完了，子切片再执行append就得申请一片新的内存，把老数据先拷贝过来，在新内存上执行append操作。此时的append操作跟母切片没有任何关系</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">    */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">9</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\">, sub_slice=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\">, s[1] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #C3E88D\">, sub_slice[0] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sub_slice</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    arr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">arr[1] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 从数组创造子切片，len=cap=2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">len </span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> cap </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">cap</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">        母数组的capacity还允许子切片执行append操作</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">    */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">7</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 可以一次append多个元素</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">arr=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\">, sub_slice=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\">, arr[1] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #C3E88D\">, sub_slice[0] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sub_slice</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">        母数组的capacity用完了，子切片再执行append就得申请一片新的内存，把老数据先拷贝过来，在新内存上执行append操作。此时的append操作跟母数组没有任何关系</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">    */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub_slice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">9</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">arr=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\">, sub_slice=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\">, arr[1] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #C3E88D\">, sub_slice[0] address </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sub_slice</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">sub_slice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">sub_slice</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">s[1] address 0xc00000e368</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">len 2 cap 4</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">s=[1 8 3], sub_slice=[8 3 6 7], s[1] address 0xc00000e368, sub_slice[0] address 0xc00000e368</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">s=[1 8 3], sub_slice=[9 3 6 7 8], s[1] address 0xc00000e368, sub_slice[0] address 0xc000012240</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">arr[1] address 0xc00000e398</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">len 2 cap 4</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">arr=[1 8 3 6 7], sub_slice=[8 3 6 7], arr[1] address 0xc00000e398, sub_slice[0] address 0xc00000e398</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">arr=[1 8 3 6 7], sub_slice=[9 3 6 7 8], arr[1] address 0xc00000e398, sub_slice[0] address 0xc0000122c0</span></span></code></pre></div><h5 id=\"4-4-8-切片的传参\"><a href=\"#4-4-8-切片的传参\" class=\"headerlink\" title=\"4.4.8 切片的传参\"></a>4.4.8 切片的传参</h5><p>Go函数传参，传的都是值，即传切片会把切片的{<!-- --><code>arrayPointer</code>, <code>len</code>, <code>cap</code>}这3个字段拷贝一份传进来。由于传的是底层数组的指针，所以可以直接修改底层数组里的元素。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">update_slice</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">888</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">update_slice</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"4-5-字符串\"><a href=\"#4-5-字符串\" class=\"headerlink\" title=\"4.5 字符串\"></a>4.5 字符串</h4><p>字符串里可以包含任意<code>Unicode</code>字符。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> My name is 绝迹之春☻</span><span style=\"color: #89DDFF\">&quot;</span></span></code></pre></div><p>字符串里可以包含转义字符。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">He say:</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">I&#39;m fine.</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #BABED8\">\\n\\\\</span><span style=\"color: #C3E88D\">Thank</span><span style=\"color: #BABED8\">\\t</span><span style=\"color: #C3E88D\">you.</span><span style=\"color: #BABED8\">\\\\</span><span style=\"color: #89DDFF\">&quot;</span></span></code></pre></div><p>字符串也可以用反引号来定义，反引号里的转义字符无效。反引号里的内容原封不动地输出，包括空白符和换行符。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">here is first line. </span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">  there is third line.</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">`</span></span></code></pre></div><h5 id=\"4-5-1-字符串常用操作\"><a href=\"#4-5-1-字符串常用操作\" class=\"headerlink\" title=\"4.5.1 字符串常用操作\"></a>4.5.1 字符串常用操作</h5><table>\n<thead>\n<tr>\n<th align=\"center\">方法</th>\n<th align=\"center\">介绍</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">len(str)</td>\n<td align=\"center\">求长度</td>\n</tr>\n<tr>\n<td align=\"center\">strings.Split</td>\n<td align=\"center\">分割</td>\n</tr>\n<tr>\n<td align=\"center\">strings.Contains</td>\n<td align=\"center\">判断是否包含</td>\n</tr>\n<tr>\n<td align=\"center\">strings.HasPrefix,strings.HasSuffix</td>\n<td align=\"center\">前缀&#x2F;后缀判断</td>\n</tr>\n<tr>\n<td align=\"center\">strings.Index(),strings.LastIndex()</td>\n<td align=\"center\">子串出现的位置</td>\n</tr>\n</tbody></table>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">born to win, born to die.</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">sentence length </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">s</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\"> length </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 英文字母的长度为1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">中</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">  length </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">中</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 一个汉字占3个长度</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">arr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Split</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">arr[3]=</span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">contain die </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Contains</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">die</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">          </span><span style=\"color: #676E95; font-style: italic\">// 包含子串</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">contain wine </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Contains</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">wine</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// 包含子串</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">first index of born </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Index</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">born</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 寻找子串第一次出现的位置</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">last index of born </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">LastIndex</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">born</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 寻找子串最后一次出现的位置</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">begin with born </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">HasPrefix</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">born</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 以xxx开头</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">end with die. </span><span style=\"color: #F07178\">%t</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">HasSuffix</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">die.</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">      </span><span style=\"color: #676E95; font-style: italic\">// 以xxx结尾</span></span></code></pre></div><h5 id=\"4-5-2-字符串拼接\"><a href=\"#4-5-2-字符串拼接\" class=\"headerlink\" title=\"4.5.2 字符串拼接\"></a>4.5.2 字符串拼接</h5><p>把多个字符串拼接成一个长的字符串有多种方式。</p>\n<ol>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">加号连接。</span></span></code></pre></div></li>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">`func fmt.Sprintf(format string, a ...interface&#123;&#125;) string`</span></span></code></pre></div></li>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">`func strings.Join(elems []string, sep string) string`</span></span></code></pre></div></li>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">当有大量的`string`需要拼接时，用`strings.Builder`效率最高</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">s1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Hello</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">s2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">how</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">s3 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">are</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">s4 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">you</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">merged </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> s1 </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> s2 </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> s3 </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> s4</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">merged</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">merged </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sprintf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #F07178\">%s</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s4</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">merged</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">merged </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Join</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">s1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s4</span><span style=\"color: #89DDFF\">&#125;,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">merged</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 当有大量的string需要拼接时，用strings.Builder效率最高</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sb </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Builder</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s4</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">merged </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> sb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">String</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">merged</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h5 id=\"4-5-3-字符串中的字符\"><a href=\"#4-5-3-字符串中的字符\" class=\"headerlink\" title=\"4.5.3 字符串中的字符\"></a>4.5.3 字符串中的字符</h5><p><code>string</code>中每个元素叫“字符”，字符有两种：</p>\n<ol>\n<li><code>byte</code>：1个字节， 代表<code>ASCII码</code>的一个字符。</li>\n<li><code>rune</code>：4个字节，代表一个<code>UTF-8</code>字符，一个汉字可用一个<code>rune</code>表示。</li>\n</ol>\n<p><code>string</code>是常量，不能修改其中的字符。<br><code>string</code>可以转换为<code>[]byte</code>或<code>[]rune类型</code>。<br><code>string</code>底层是<code>byte数组</code>，<code>string</code>的长度就是该<code>byte数组</code>的长度， <code>UTF-8</code>编码下一个汉字占3个<code>byte</code>，即一个汉字占3个长度。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">s1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">My name is 绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">arr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #82AAFF\">byte</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">brr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #82AAFF\">rune</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">last byte </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">])</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// string可以转换为[]byte或[]rune类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">last byte </span><span style=\"color: #F07178\">%c</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">])</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// byte或rune可以转为string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">last rune </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> brr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">brr</span><span style=\"color: #89DDFF\">)-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">last rune </span><span style=\"color: #F07178\">%c</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> brr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">brr</span><span style=\"color: #89DDFF\">)-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">L </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">string len </span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> byte array len </span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> rune array len </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> L</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">brr</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> s1 </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%c</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// string中的每个元素是字符</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> L</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%c</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">])</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// [i]前面应该出现数组或切片，这里自动把string转成了[]byte（而不是[]rune）</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"4-6-数据类型转换\"><a href=\"#4-6-数据类型转换\" class=\"headerlink\" title=\"4.6 数据类型转换\"></a>4.6 数据类型转换</h4><p>强制类型转换的基本方法就是把目标类型放在变量前面，把变量括起来。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">9</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> by </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">byte</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// int转为byte</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">int</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">by</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">           </span><span style=\"color: #676E95; font-style: italic\">// byte转为int</span></span></code></pre></div><ul>\n<li>低精度向高精度转换没问题，高精度向低精度转换会丢失位数。</li>\n<li>无符号向有符号转换，最高位是符号位。</li>\n<li><code>byte</code>和<code>int</code>可以互相转换。</li>\n<li><code>float</code>和<code>int</code>可以互相转换，小数位会丢失。</li>\n<li><code>bool</code>和<code>int</code>不能相互转换。</li>\n<li>不同长度的<code>int</code>或<code>float</code>之间可以相互转换。</li>\n</ul>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 高精度向低精度转换，数字很小时这种转换没问题</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> ua </span><span style=\"color: #C792EA\">uint64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">i8 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">int8</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ua</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">i8=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i8</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 最高位的1变成了符号位</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ua </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">uint64</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">math</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">MaxUint64</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">i64 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">int64</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ua</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">i64=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i64</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 位数丢失</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ui32 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">uint32</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ua</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ui32=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ui32</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 单个字符可以转为int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">int</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">a</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">i=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// bool和int不能相互转换</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// byte和int可以互相转换</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> by </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">byte</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">int</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">by</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">i=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// float和int可以互相转换，小数位会丢失</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> ft </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">float32</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">int</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ft</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">i=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h5 id=\"4-6-1-string和其他数据类型互转\"><a href=\"#4-6-1-string和其他数据类型互转\" class=\"headerlink\" title=\"4.6.1 string和其他数据类型互转\"></a>4.6.1 string和其他数据类型互转</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #C792EA\">error</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i64 </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">int64</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// int转string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Itoa</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//内部调用FormatInt</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">FormatInt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i64</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// string转int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Atoi</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// string转int64</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">i64</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ParseInt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">64</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// float转string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> f </span><span style=\"color: #C792EA\">float64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8.123456789</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">FormatFloat</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">f</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">f</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">64</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//保留2位小数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// string转float</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">f</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ParseFloat</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">64</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// string&lt;--&gt;[]byte</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> arr </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">byte </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #82AAFF\">byte</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">string</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// string&lt;--&gt;[]rune</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> brr </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">rune </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #82AAFF\">rune</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">string</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">brr</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">err </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h4 id=\"4-7-map\"><a href=\"#4-7-map\" class=\"headerlink\" title=\"4.7 map\"></a>4.7 map</h4><p><code>map</code>是一种无序的基于<code>key-value</code>的数据结构，Go中的<code>map</code>是引用类型，必须初始化才能使用。</p>\n<h5 id=\"4-7-1-map定义\"><a href=\"#4-7-1-map定义\" class=\"headerlink\" title=\"4.7.1 map定义\"></a>4.7.1 map定义</h5><p>Go语言<code>map</code>的底层实现是<code>hash table</code>，根据<code>key</code>查找<code>value</code>的时间复杂度是O(1)。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/d84c4c28c896f3383121d7b330db988f_1739762143339.png\" alt=\"avatar\"></p>\n<p>Go中 <code>map</code>的定义语法如下</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #BABED8\">KeyType</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">ValueType</span></span></code></pre></div><p>其中，</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">    KeyType:表示键的类型。</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    ValueType:表示键对应的值的类型。</span></span></code></pre></div><p><code>map</code>类型的变量默认初始值为<code>nil</code>，需要使用<code>make()函数</code>来分配内存。语法为：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #BABED8\">KeyType</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">ValueType</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">cap</span><span style=\"color: #89DDFF\">])</span></span></code></pre></div><p>其中<code>cap</code>表示<code>map</code>的容量，该参数虽然不是必须的，但是我们应该在初始化<code>map</code>的时候就为其指定一个合适的容量。</p>\n<h5 id=\"4-7-2-map的初始化\"><a href=\"#4-7-2-map的初始化\" class=\"headerlink\" title=\"4.7.2 map的初始化\"></a>4.7.2 map的初始化</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">                  </span><span style=\"color: #676E95; font-style: italic\">// 声明map，指定key和value的数据类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">m </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">              </span><span style=\"color: #676E95; font-style: italic\">// 初始化，容量为0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">m </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">         </span><span style=\"color: #676E95; font-style: italic\">// 初始化，容量为5。强烈建议初始化时给一个合适的容量，减少扩容的概率</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">m </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">语文</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">数学</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">39</span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 初始化时直接赋值</span></span></code></pre></div><h5 id=\"4-7-3-添加和删除key\"><a href=\"#4-7-3-添加和删除key\" class=\"headerlink\" title=\"4.7.3 添加和删除key\"></a>4.7.3 添加和删除key</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">m</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">英语</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">59</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 往map里添加key-value对</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">m</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">英语</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">70</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 会覆盖之前的值</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">delete</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">m</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">数学</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 从map里删除key-value对</span></span></code></pre></div><p><code>len(m)</code>获取<code>map</code>的长度，Go不支持对<code>map</code>上执行<code>cap</code>函数。</p>\n<h5 id=\"4-7-4-判断某个键是否存在\"><a href=\"#4-7-4-判断某个键是否存在\" class=\"headerlink\" title=\"4.7.4 判断某个键是否存在\"></a>4.7.4 判断某个键是否存在</h5><p>Go中有个判断<code>map</code>中<code>key</code>是否存在的特殊写法，格式如下:</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    value</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">   </span></span></code></pre></div><p>读取<code>key</code>对应的<code>value</code>时，如果<code>key</code>不存在，则返回<code>value</code>类型的默认值，所以强烈建议先判断<code>key</code>是否存在。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> m</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">语文</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">];</span><span style=\"color: #BABED8\"> exists </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">map里不存在[语文]这个key</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"4-7-5-遍历map\"><a href=\"#4-7-5-遍历map\" class=\"headerlink\" title=\"4.7.5 遍历map\"></a>4.7.5 遍历map</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 遍历map</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">-----------</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 多次遍历map返回的顺序是不一样的，但相对顺序是一样的，因为每次随机选择一个开始位置，然后顺序遍历</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">-----------</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 一边遍历一边修改</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    m</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">-----------</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// for range取得的是值拷贝</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    value </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>但我们只想遍历<code>key</code>的时候，可以按下面的写法：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> key </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>注意： 遍历<code>map</code>时的元素顺序与添加键值对的顺序无关。</p>\n<h5 id=\"4-7-6-按照指定顺序遍历map\"><a href=\"#4-7-6-按照指定顺序遍历map\" class=\"headerlink\" title=\"4.7.6 按照指定顺序遍历map\"></a>4.7.6 按照指定顺序遍历map</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">math/rand</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">sort</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    rand</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Seed</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Now</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">UnixNano</span><span style=\"color: #89DDFF\">())</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//初始化随机数种子</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> scoreMap </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        key </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sprintf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">stu</span><span style=\"color: #F07178\">%02d</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//生成stu开头的字符串</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> rand</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Intn</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">          </span><span style=\"color: #676E95; font-style: italic\">//生成0~99的随机整数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        scoreMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> value</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//取出map中的所有key存入切片keys</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> keys </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">200</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> key </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> scoreMap </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        keys </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">keys</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//对切片进行排序</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sort</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Strings</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">keys</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//按照排序后的key遍历map</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> key </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> keys </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> scoreMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"4-7-7-元素为map类型的切片\"><a href=\"#4-7-7-元素为map类型的切片\" class=\"headerlink\" title=\"4.7.7 元素为map类型的切片\"></a>4.7.7 元素为map类型的切片</h5><p>下面的代码演示了切片中的元素为<code>map</code>类型时的操作：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> mapSlice </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> index</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> mapSlice </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">index:</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> value:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> index</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">after init</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 对切片中的map元素进行初始化</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapSlice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapSlice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">王五</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapSlice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">password</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">123456</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapSlice</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">address</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">红旗大街</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> index</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> mapSlice </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">index:</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> value:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> index</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">index:0 value:map[]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">index:1 value:map[]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">index:2 value:map[]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">after init</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">index:0 value:map[address:红旗大街 name:王五 password:123456]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">index:1 value:map[]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">index:2 value:map[]</span></span></code></pre></div><h5 id=\"4-7-8-值为切片类型的map\"><a href=\"#4-7-8-值为切片类型的map\" class=\"headerlink\" title=\"4.7.8 值为切片类型的map\"></a>4.7.8 值为切片类型的map</h5><p>下面的代码演示了<code>map</code>中值为切片类型的操作：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> sliceMap </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">][]</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sliceMap</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">after init</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    key </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">中国</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    value</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> sliceMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!</span><span style=\"color: #BABED8\">ok </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        value </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    value </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">value</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">北京</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">上海</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sliceMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> value</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sliceMap</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">map[]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">after init</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">map[中国:[北京 上海]]</span></span></code></pre></div><h5 id=\"4-7-9-map的键值类型\"><a href=\"#4-7-9-map的键值类型\" class=\"headerlink\" title=\"4.7.9 map的键值类型\"></a>4.7.9 map的键值类型</h5><p><code>map</code>中的<code>key</code>可以是任意能够用<code>==</code>操作符比较的类型，不能是函数、<code>map</code>、切片，以及包含上述3中类型成员变量的的<code>struct</code>。<code>map</code>的<code>value</code>可以是任意类型。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">f</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">bool</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">m</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">byte</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">s</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">i</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> m1 </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">f</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">m1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">/** 函数、map、切片不能当key **/</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// var m2 map[f]bool</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// fmt.Println(m2)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// var m3 map[m]bool</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// fmt.Println(m3)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// var m4 map[s]bool</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// fmt.Println(m4)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">user</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    scores </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果scores是slice，则user不能作为map的key</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">u </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">m5 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">]interface&#123;&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">m5</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">u</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">m5</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h4 id=\"4-8-channel（初步了解）\"><a href=\"#4-8-channel（初步了解）\" class=\"headerlink\" title=\"4.8 channel（初步了解）\"></a>4.8 channel（初步了解）</h4><p><code>channel</code>(管道)底层是一个环形队列(先进先出)，<code>send</code>(插入)和<code>recv</code>(取走)从同一个位置沿同一个方向顺序执行。<code>sendx</code>表示最后一次插入元素的位置，<code>recvx</code>表示最后一次取走元素的位置。<br><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/1c6da0d7cef8dcb19931289ba6d2b639_1739762143339.png\" alt=\"avatar\"></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> ch </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// 管道的声明</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ch </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 管道的初始化，环形队列里可容纳8个int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\">                </span><span style=\"color: #676E95; font-style: italic\">// 往管道里写入(send)数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch </span><span style=\"color: #676E95; font-style: italic\">// 从管道里取走(recv)数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">v </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">v</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">read_only </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(&lt;-chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 定义只读的channel</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">write_only </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 定义只写的channel</span></span></code></pre></div><p>定义只读和只写的<code>channe</code>l意义不大，一般用于在参数传递中。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 只能向channel里写数据</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">send</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c </span><span style=\"color: #89DDFF\">chan&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    c </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 只能取channel中的数据</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">recv</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c </span><span style=\"color: #89DDFF\">&lt;-chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    _ </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">c</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 返回一个只读channel</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Context</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct&#123;&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>可以通过<code>for range</code>的方式遍历管道，遍历前必须先关闭管道，禁止再写入元素。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ch</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 遍历前必须先关闭管道，禁止再写入元素</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 遍历管道里剩下的元素</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> ele </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> ch </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ele</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><code>slice</code>、<code>map</code>和<code>channel</code>是Go里的3种引用类型，都可以通过<code>make()函数</code>来进行初始化（申请内存分配）。因为它们都包含一个指向底层数据结构的指针，所以称之为“引用”类型。引用类型未初始化时都是<code>nil</code>，可以对它们执行<code>len()函数</code>，返回<code>0</code>。</p>\n<h4 id=\"拓展：使用map实现hashset\"><a href=\"#拓展：使用map实现hashset\" class=\"headerlink\" title=\"拓展：使用map实现hashset\"></a>拓展：使用map实现hashset</h4><p>利用空<code>struct</code>（struct{}）内存占用为<code>0</code>的特点，在Go中可以这么实现：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> hashset </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\">  </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[interface&#123;&#125;]struct&#123;&#125;)</span><span style=\"color: #BABED8\">\t</span><span style=\"color: #676E95; font-style: italic\">// 空接口可以存储任意类型的值</span></span></code></pre></div><p>下面以LeetCode的题目作为参考：</p>\n<p>LeetCode：<a href=\"https://leetcode.cn/problems/unique-number-of-occurrences/\">1207. 独一无二的出现次数</a></p>\n<p><strong>1207. 独一无二的出现次数</strong></p>\n<p>给你一个整数数组 <code>arr</code>，请你帮忙统计数组中每个数的出现次数。</p>\n<p>如果每个数的出现次数都是独一无二的，就返回 <code>true</code>；否则返回 <code>false</code>。</p>\n<p><strong>示例 1：</strong></p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">输入：arr = [1,2,2,1,1,3]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">输出：true</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">解释：在该数组中，1 出现了 3 次，2 出现了 2 次，3 只出现了 1 次。没有两个数的出现次数相同。</span></span></code></pre></div><p><strong>示例 2：</strong></p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">输入：arr = [1,2]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">输出：false</span></span></code></pre></div><p><strong>示例 3：</strong></p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">输入：arr = [-3,0,1,-3,1,1,1,-3,10,0]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">输出：true</span></span></code></pre></div><p><strong>提示：</strong></p>\n<ul>\n<li><code>1 &lt;= arr.length &lt;= 1000</code></li>\n<li><code>-1000 &lt;= arr[i] &lt;= 1000</code></li>\n</ul>\n<p>分析：</p>\n<p>首先使用<code>map</code>记录每个数字的出现次数。（键为数字，值为次数）</p>\n<p>随后再利用<code>hashset</code>，统计不同的出现次数的数目。（利用<code>hashset</code>去重的原理，进行查重）</p>\n<p>如果不同的出现次数的数目等于不同数字的数目，则返回<code>true</code>，否则返回<code>false</code>。</p>\n<p>参考答案（或许博主的答案不是最佳答案，但是只是用于理解）：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">uniqueOccurrences</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    numberMap </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 新建map，用于记录每个数字的出现次数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> arr </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">      </span><span style=\"color: #676E95; font-style: italic\">// 遍历数组元素</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        v</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> numberMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">ele</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 使key为当前数组元素的value加一，即统计当前数组元素总共出现的次数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">                 </span><span style=\"color: #676E95; font-style: italic\">// 如果key存在当前数组元素，则value加一</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            numberMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">ele</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果key不存在当前数组元素，则将当前数组元素作为key添加进map，并将其value初始化为1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            numberMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">ele</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    occurrencesMap </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">]struct&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 使用map构建hashset，用于对不同数字的出现次数进行查重</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> numberMap </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\">// 遍历map的value，即遍历不同数字的出现次数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> occurrencesMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">v</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 判断当前hashset是否存在相同的出现次数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">                    </span><span style=\"color: #676E95; font-style: italic\">// 如果存在，则说明不同的出现次数的数目不等于不同数字的数目，返回false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果hashset当前不存在该次数，则将该次数放入hashset</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        occurrencesMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">v</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct&#123;&#125;&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 最后不同的出现次数的数目等于不同数字的数目，返回true</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h3 id=\"模块五：流程控制\"><a href=\"#模块五：流程控制\" class=\"headerlink\" title=\"模块五：流程控制\"></a>模块五：流程控制</h3><h4 id=\"5-1-学习目标\"><a href=\"#5-1-学习目标\" class=\"headerlink\" title=\"5.1 学习目标\"></a>5.1 学习目标</h4><ol>\n<li>了解基本的流程控制语句</li>\n<li>熟练使用if、switch、for、break、continue、goto以及Label解决复杂问题</li>\n</ol>\n<h4 id=\"5-2-if\"><a href=\"#5-2-if\" class=\"headerlink\" title=\"5.2 if\"></a>5.2 if</h4><p>基本格式：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> 布尔表达式 </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/* 在布尔表达式为 true 时执行 */</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>举例：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">9</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">5&gt;9</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><ul>\n<li>如果逻辑表达式成立，就会执行<code>&#123;&#125;</code>里的内容。</li>\n<li>逻辑表达式不需要加<code>()</code>。</li>\n<li><code>&#123;&lt;!-- --&gt;</code>必须紧跟在逻辑表达式后面，不能另起一行。</li>\n</ul>\n<p><code>if条件判断</code>还有一种特殊的写法，可以在<code>if表达式</code>之前添加一个执行语句，再根据变量值<br>进行判断。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> d</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> e </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">9</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> d </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> e </span><span style=\"color: #89DDFF\">||</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 初始化多个局部变量。复杂的逻辑表达式</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">fit</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>注意：</p>\n<ul>\n<li>逻辑表达中可以含有变量或常量。</li>\n<li><code>if</code>句子中允许包含1个(仅1个)<code>分号</code>，在分号前初始化一些局部变量(即只在<code>if块</code>内可见)。</li>\n</ul>\n<h5 id=\"5-2-1-if-else的用法\"><a href=\"#5-2-1-if-else的用法\" class=\"headerlink\" title=\"5.2.1 if-else的用法\"></a>5.2.1 if-else的用法</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">color </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">black</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> color </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">red</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// if只能有一个</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">stop</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> color </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">green</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">go</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> color </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">yellow</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// else if可以有0个、一个或者连续多个</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">stop</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// else有0个或1个</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">invalid traffic signal: </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ToUpper</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">color</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"5-2-2-if表达式嵌套\"><a href=\"#5-2-2-if表达式嵌套\" class=\"headerlink\" title=\"5.2.2 if表达式嵌套\"></a>5.2.2 if表达式嵌套</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> xxx </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> xxx </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> xxx </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> xxx </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>注意太深的嵌套不利于代码的维护，比如</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"5-3-switch\"><a href=\"#5-3-switch\" class=\"headerlink\" title=\"5.3 switch\"></a>5.3 switch</h4><h5 id=\"5-3-1-switch-case\"><a href=\"#5-3-1-switch-case\" class=\"headerlink\" title=\"5.3.1 switch-case\"></a>5.3.1 switch-case</h5><p>使用<code>switch</code>语句可方便地对大量的值进行条件判断。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">color </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">black</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> color </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">green</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 相当于if color== &quot;green&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">go</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// break</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">red</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 相当于else if color== &quot;red&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">stop</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// break</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 相当于else</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">invalid traffic signal: </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ToUpper</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">color</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><ul>\n<li><code>switch-case-default</code>可能模拟<code>if-else if-else</code>，但只能实现相等判断。</li>\n<li><code>switch</code>和<code>case</code>后面可以跟常量、变量或函数表达式，只要它们表示的数据类型相同就行。</li>\n<li><code>case</code>后面可以跟多个值，只要有一个值满足就行。</li>\n<li>Go语言规定每个<code>switch</code>只能有一个<code>default</code>。</li>\n<li>Go语言中每个<code>case</code>语句中可以不写<code>break</code>，不加<code>break</code>也不会出现穿透的现象。</li>\n</ul>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">switch_expression</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// switch后跟一个函数表达式</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">15</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// case后跟一个常量</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">right</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">wrong</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> B </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">15</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> B </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// switch后跟一个常量</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">):</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// case后跟一个函数表达式</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">right</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">wrong</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"5-3-2-switch不带与后带表达式\"><a href=\"#5-3-2-switch不带与后带表达式\" class=\"headerlink\" title=\"5.3.2 switch不带与后带表达式\"></a>5.3.2 switch不带与后带表达式</h5><p><code>switch</code>后带表达式时，<code>switch-case</code>只能模拟相等的情况；</p>\n<p>如果<code>switch</code>后不带表达式，<code>case</code>后就可以跟任意的条件表达式。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">switch_condition</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    color </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">yellow</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> color </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">green</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">go</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">red</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">yellow</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 用逗号分隔多个condition，它们之间是“或”的关系，只需要有一个condition满足就行</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">stop</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// switch后带表达式时，switch-case只能模拟相等的情况；如果switch后不带表达式，case后就可以跟任意的条件表达式</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">right</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">wrong</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"5-3-3-switch-Type\"><a href=\"#5-3-3-switch-Type\" class=\"headerlink\" title=\"5.3.3 switch Type\"></a>5.3.3 switch Type</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">switch_type</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> num </span><span style=\"color: #89DDFF\">interface&#123;&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6.5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">.(</span><span style=\"color: #BABED8\">type</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 获取interface的具体类型。.(type)只能用在switch后面</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">int</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">float32</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">float64</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">float64</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">byte</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">neither</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">.(</span><span style=\"color: #BABED8\">type</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 相当于在每个case内部申明了一个变量value</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// value已被转换为int类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">number is int </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">float64</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// value已被转换为float64类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">number is float64 </span><span style=\"color: #F07178\">%f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果case后有多个类型，则value还是interface&#123;&#125;类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">number is inerface </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">neither</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 等价形式</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">.(</span><span style=\"color: #BABED8\">type</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">.(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">number is int </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">float64</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">.(</span><span style=\"color: #C792EA\">float64</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">number is float64 </span><span style=\"color: #F07178\">%f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">.(</span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">number is byte </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">neither</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"5-3-4-fallthrough\"><a href=\"#5-3-4-fallthrough\" class=\"headerlink\" title=\"5.3.4 fallthrough\"></a>5.3.4 fallthrough</h5><p>当命中某一个<code>case</code>时，强行进入下一个<code>case</code>。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fall_throth</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">age </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">您的年龄是</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">, 您可以：</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> age</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">50</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">出任国家首脑</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">fallthrough</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">25</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">生育子女</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">fallthrough</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">22</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">结婚</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">fallthrough</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">38</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开车</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">fallthrough</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">16</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">参加工作</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">15</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">上高中</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">fallthrough</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">上幼儿园</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"5-4-for\"><a href=\"#5-4-for\" class=\"headerlink\" title=\"5.4 for\"></a>5.4 for</h4><p>Go语言中的所有循环类型均可以使用<code>for</code>关键字来完成。</p>\n<h5 id=\"5-4-1-for-init-condition-post\"><a href=\"#5-4-1-for-init-condition-post\" class=\"headerlink\" title=\"5.4.1 for init; condition; post { }\"></a>5.4.1 for init; condition; post { }</h5><p>基本格式：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> 初始语句</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> 条件表达式</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> 结束语句 </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    循环体语句</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>举例：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">arr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">arr</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 正序遍历切片</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">: </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><ul>\n<li><p>条件表达式返回<code>true</code>时循环体不停地进行循环，直到条件表达式返回<code>false</code>时自动退出循环。</p>\n</li>\n<li><p>局部变量指仅在<code>for</code>块内可见。</p>\n</li>\n<li><p>初始化变量可以放在<code>for</code>上面（但是初始语句后的分号必须要写）。</p>\n</li>\n</ul>\n<p>计算1~100的和</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">sum </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sum </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sum</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h5 id=\"5-4-2-for-condition\"><a href=\"#5-4-2-for-condition\" class=\"headerlink\" title=\"5.4.2 for condition { }\"></a>5.4.2 for condition { }</h5><p>只有条件判断时，前后的分号可以不要（这种写法类似于其他编程语言中的<code>while</code>，在<code>while</code>后添加一个条件表达式，满足条件表达 式时持续循环，否则结束循环）。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>注意：Go语言中是没有<code>while</code>语句的，我们可以通过<code>for</code>代替。</p>\n<h5 id=\"5-4-3-for\"><a href=\"#5-4-3-for\" class=\"headerlink\" title=\"5.4.3 for { }\"></a>5.4.3 for { }</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    循环体语句</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><code>for</code>循环可以通过<code>break</code>、<code>goto</code>、<code>return</code>、<code>panic</code>语句强制退出循环。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">k </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 这里也等价for ; ; &#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> k </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ok~~</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> k</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">break</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// break就是跳出这个for循环</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    k</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"5-4-4-for循环嵌套\"><a href=\"#5-4-4-for循环嵌套\" class=\"headerlink\" title=\"5.4.4 for循环嵌套\"></a>5.4.4 for循环嵌套</h5><p>在<code>for</code>循环中嵌套一个或多个<code>for</code>循环</p>\n<p>基本格式（双层<code>for</code>循环）：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> 初始语句</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> 条件表达式</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> 结束语句 </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> 初始语句</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> 条件表达式</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> 结束语句 </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        循环体语句</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    循环体语句</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>以下实例使用循环嵌套来输出<code>2</code>到<code>100</code>间的素数：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/* 定义局部变量 */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">%</span><span style=\"color: #BABED8\">j </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">break</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 如果发现因子，则不是素数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">  是素数</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>百钱百鸡：</p>\n<p>我国古代数学家张丘建在《算经》一书中提出的数学问题：鸡翁一值钱五，鸡母一值钱三，鸡雏三值钱一。百钱买百鸡，问鸡翁、鸡母、鸡雏各几何？</p>\n<p>使用三层<code>for</code>循环嵌套（暴力解法且没有剪枝，只是用于理解）</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> k </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> k </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> k</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">j</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">k </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">*</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">j</span><span style=\"color: #89DDFF\">*</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\">k</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">公鸡=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> 母鸡=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> 小鸡=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> k</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">公鸡=0 母鸡=25 小鸡=75</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">公鸡=3 母鸡=20 小鸡=77</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">公鸡=4 母鸡=18 小鸡=78</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">公鸡=7 母鸡=13 小鸡=80</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">公鸡=8 母鸡=11 小鸡=81</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">公鸡=11 母鸡=6 小鸡=83</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">公鸡=12 母鸡=4 小鸡=84</span></span></code></pre></div><h5 id=\"5-4-5-for-range\"><a href=\"#5-4-5-for-range\" class=\"headerlink\" title=\"5.4.5 for range\"></a>5.4.5 for range</h5><p>Golang <code>range</code>类似迭代器操作，返回 (索引, 值) 或 (键, 值)。</p>\n<p><code>for</code>循环的<code>range</code>格式可以对<code>slice</code>、<code>map</code>、<code>数组</code>、<code>字符串</code>等进行迭代循环。</p>\n<ul>\n<li>遍历数组或切片<ul>\n<li><code>for i, ele := range arr</code></li>\n</ul>\n</li>\n<li>遍历string<ul>\n<li><code>for i, ele := range &quot;我会唱ABC&quot; //ele是rune类型</code></li>\n</ul>\n</li>\n<li>遍历map，go不保证遍历的顺序<ul>\n<li><code>for key, value := range m</code></li>\n</ul>\n</li>\n<li>遍历channel，遍历前一定要先close<ul>\n<li><code>for ele := range ch</code></li>\n<li><code>for range</code>拿到的是数据的拷贝</li>\n</ul>\n</li>\n</ul>\n<p>格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> oldMap </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    newMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> value</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><table>\n<thead>\n<tr>\n<th align=\"left\"></th>\n<th align=\"left\">1st value</th>\n<th align=\"left\">2nd value</th>\n<th align=\"left\"></th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">string</td>\n<td align=\"left\">index</td>\n<td align=\"left\">s[index]</td>\n<td align=\"left\">unicode, rune</td>\n</tr>\n<tr>\n<td align=\"left\">array&#x2F;slice</td>\n<td align=\"left\">index</td>\n<td align=\"left\">s[index]</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">map</td>\n<td align=\"left\">key</td>\n<td align=\"left\">m[key]</td>\n<td align=\"left\"></td>\n</tr>\n<tr>\n<td align=\"left\">channel</td>\n<td align=\"left\">element</td>\n<td align=\"left\"></td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n<p>可忽略不想要的返回值，或 <code>_</code> 这个特殊变量。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">abc</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 忽略 2nd value，支持 string/array/slice/map。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> s </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">])</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 忽略 index。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> s </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 忽略全部返回值，仅迭代。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> s </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    m </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">a</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">b</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 返回 (key, value)。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> k</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> m </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">k</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">97</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">98</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">99</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">97</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">98</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">99</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">a 1</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">b 2</span></span></code></pre></div><p><strong>注意：<code>range</code>会复制对象。</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// index、value 都是从复制品中取出。</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 在修改前，我们先修改原数组。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            a</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">],</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">999</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">999</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 确认修改有效，输出 [0, 999, 999]。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        a</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 使用复制品中取出的 value 修改原数组。</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 输出 [100, 101, 102]。</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">[0 999 999]</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">[100 101 102]</span></span></code></pre></div><p>建议改用引用类型，其底层数据不会被复制。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> s </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 复制 struct slice &#123; pointer, len, cap &#125;。</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            s </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 对 slice 的修改，不会影响 range。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            s</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 对底层数据的修改。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果:</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">0 1</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">1 2</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">2 100</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">3 4</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">4 5</span></span></code></pre></div><p>另外两种引用类型<code>map</code>、<code>channel</code>是指针包装，而不像<code>slice</code>是 <code>struct</code>。</p>\n<h6 id=\"5-4-5-1-for和for-range有什么区别\"><a href=\"#5-4-5-1-for和for-range有什么区别\" class=\"headerlink\" title=\"5.4.5.1 for和for range有什么区别?\"></a>5.4.5.1 for和for range有什么区别?</h6><p>主要是使用场景不同</p>\n<p><code>for</code>可以</p>\n<p>遍历<code>array</code>和<code>slice</code></p>\n<p>遍历<code>key</code>为整型递增的<code>map</code></p>\n<p>遍历<code>string</code></p>\n<p><code>for range</code>可以完成所有<code>for</code>可以做的事情，却能做到<code>for</code>不能做的，包括</p>\n<p>遍历<code>key</code>为<code>string</code>类型的<code>map</code>并同时获取<code>key</code>和<code>value</code></p>\n<p>遍历<code>channel</code></p>\n<h4 id=\"5-4-6-break与continue\"><a href=\"#5-4-6-break与continue\" class=\"headerlink\" title=\"5.4.6 break与continue\"></a>5.4.6 break与continue</h4><ul>\n<li><code>break</code>与<code>continue</code>用于控制<code>for</code>循环的代码流程，并且只针对最靠近自己的外层<code>for</code>循环。</li>\n<li><code>break</code>：退出<code>for</code>循环，且本轮<code>break</code>下面的代码不再执行。</li>\n<li><code>continue</code>：本轮<code>continue</code>下面的代码不再执行，进入<code>for</code>循环的下一轮。</li>\n</ul>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// break和continue都是针对for循环的，不针对if或switch</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// break和continue都是针对套在自己外面的最靠里的那层for循环，不针对更外层的for循环（除非使用Label）</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">complex_break_continue</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> SIZE </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    arr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">SIZE</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #BABED8\">SIZE</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> SIZE</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开始检查第</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">行</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">%</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> SIZE</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开始检查第</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">列</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #BABED8\">j</span><span style=\"color: #89DDFF\">]%</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF; font-style: italic\">continue</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 针对第二层for循环</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">将要检查第</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">列</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">break</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 针对第一层for循环</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"5-4-7-goto与Label\"><a href=\"#5-4-7-goto与Label\" class=\"headerlink\" title=\"5.4.7 goto与Label\"></a>5.4.7 goto与Label</h4><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">MY_LABEL</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">goto</span><span style=\"color: #BABED8\"> MY_LABEL </span><span style=\"color: #676E95; font-style: italic\">//返回定义MY_LABEL的那一行，把代码再执行一遍（会进入一个无限循环）</span></span></code></pre></div><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">%</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">goto</span><span style=\"color: #BABED8\"> L1 </span><span style=\"color: #676E95; font-style: italic\">//Label指示的是某一行代码，并没有圈定一个代码块，所以goto L1也会执行L2后的代码</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">goto</span><span style=\"color: #BABED8\"> L2 </span><span style=\"color: #676E95; font-style: italic\">//先使用Label</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">L1</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">L2</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//后定义Label。Label定义后必须在代码的某个地方被使用</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i </span><span style=\"color: #89DDFF\">*=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span></span></code></pre></div><p><code>goto</code>与<code>Label</code>结合可以实现<code>break</code>的功能，甚至比<code>break</code>更强大。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> SIZE</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    L2</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> SIZE</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">goto</span><span style=\"color: #BABED8\"> L1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">L1</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    xxx</span></span></code></pre></div><ul>\n<li><code>break</code>、<code>continue</code>与<code>Label</code>结合使用可以跳转到更外层的<code>for</code>循环。</li>\n<li><code>continue</code>和<code>break</code>针对的<code>Label</code>必须写在<code>for</code>前面，而<code>goto</code>可以针对任意位置的<code>Label</code>。</li>\n</ul>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">break_label</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> SIZE </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    arr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">SIZE</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #BABED8\">SIZE</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">L1</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> SIZE</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    L2</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开始检查第</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">行</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">%</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        L3</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> j </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> SIZE</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开始检查第</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">列</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> j</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #BABED8\">j</span><span style=\"color: #89DDFF\">]%</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF; font-style: italic\">break</span><span style=\"color: #BABED8\"> L1 </span><span style=\"color: #676E95; font-style: italic\">//直接退出最外层的fot循环</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> arr</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">][</span><span style=\"color: #BABED8\">j</span><span style=\"color: #89DDFF\">]%</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF; font-style: italic\">goto</span><span style=\"color: #BABED8\"> L2 </span><span style=\"color: #676E95; font-style: italic\">//continue和break针对的Label必须写在for前面，而goto可以针对任意位置的Label</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                    </span><span style=\"color: #89DDFF; font-style: italic\">break</span><span style=\"color: #BABED8\"> L3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h3 id=\"模块六：结构体\"><a href=\"#模块六：结构体\" class=\"headerlink\" title=\"模块六：结构体\"></a>模块六：结构体</h3><h4 id=\"6-1-学习目标\"><a href=\"#6-1-学习目标\" class=\"headerlink\" title=\"6.1 学习目标\"></a>6.1 学习目标</h4><ol>\n<li>了解结构体的基本概念</li>\n<li>熟练掌握并使用结构体解决相关问题</li>\n<li>了解匿名结构体、结构体指针、结构体方法、嵌套结构体等知识点</li>\n</ol>\n<h4 id=\"6-2-Golang结构体\"><a href=\"#6-2-Golang结构体\" class=\"headerlink\" title=\"6.2 Golang结构体\"></a>6.2 Golang结构体</h4><p>Golang中没有“类”的概念，Golang中的结构体和其他语言中的类有点相似。和其他面向对象语言中的类相比，Golang中的结构体具有更高的扩展性和灵活性。</p>\n<p>Golang中的基础数据类型可以表示一些事物的基本属性，但是当我们想表达一个事物的全部或部分属性时，这时候再用单一的基本数据类型就无法满足需求了，Golang提供了一种自定义数据类型，可以封装多个基本数据类型，这种数据类型叫结构体，英文名称<code>struct</code>。也就是我们可以通过<code>struct</code>来定义自己的类型了。</p>\n<h4 id=\"6-3-Golang-type关键词自定义类型和类型别名\"><a href=\"#6-3-Golang-type关键词自定义类型和类型别名\" class=\"headerlink\" title=\"6.3 Golang type关键词自定义类型和类型别名\"></a>6.3 Golang type关键词自定义类型和类型别名</h4><p>Golang中通过<code>type</code>关键词定义一个结构体，在讲解结构体之前，我们首先给大家看看通过<code>type</code>自定义类型以及定义类型别名。</p>\n<ol>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">自定义类型 在Go语言中有一些基本的数据类型，如`string`、`整型`、`浮点型`、`布尔`等数据类型， Go语言中可以使用`type`关键字来定义自定义类型</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">myInt</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span></span></code></pre></div><p>上面代码表示：将<code>myInt</code>定义为<code>int</code>类型，通过<code>type</code>关键字的定义，<code>myInt</code>就是一种新的类型，它具有<code>int</code>的特性。</p>\n<ol start=\"2\">\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">类型别名Golang1.9版本以后添加的新功能。 类型别名规定：`TypeAlias`只是`Type`的别名，本质上`TypeAlias`与`Type`是同一个类型。就像 一个孩子小时候有大名、小名、英文名，但这些名字都指的是他本人。</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">TypeAlias</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> Type</span></span></code></pre></div><p>我们之前见过的<code>rune</code>和<code>byte</code>就是类型别名，他们的底层定义如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">byte</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uint8</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">rune</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int32</span></span></code></pre></div><p>3、自定义类型和类型别名的区别</p>\n<p>类型别名与自定义类型表面上看只有一个等号的差异，我们通过下面的这段代码来理解它们 之间的区别。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 类型定义</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">newInt</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 类型别名</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">myInt</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a newInt</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b myInt</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type of a:</span><span style=\"color: #F07178\">%T</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//type of a:main.newInt</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type of b:</span><span style=\"color: #F07178\">%T</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//type of b:int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>结果显示<code>a</code>的类型是<code>main.newInt</code>，表示<code>main</code>包下定义的<code>newInt</code>类型。<code>b</code>的类型是<code>int</code>类型。</p>\n<h4 id=\"6-4-结构体的定义\"><a href=\"#6-4-结构体的定义\" class=\"headerlink\" title=\"6.4 结构体的定义\"></a>6.4 结构体的定义</h4><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">类型名</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    字段名 字段类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    字段名 字段类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    …</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>其中：</p>\n<ol>\n<li>类型名：标识自定义结构体的名称，在同一个包内不能重复。</li>\n<li>字段名：表示结构体字段名。结构体中的字段名必须唯一。</li>\n<li>字段类型：表示结构体字段的具体类型。</li>\n</ol>\n<p>举个例子，我们定义一个<code>Person</code>（人）结构体，代码如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int8</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>同样类型的字段也可以写在一行，</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age        </span><span style=\"color: #C792EA\">int8</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"6-4-1-结构体实例化（第一种方法）\"><a href=\"#6-4-1-结构体实例化（第一种方法）\" class=\"headerlink\" title=\"6.4.1 结构体实例化（第一种方法）\"></a>6.4.1 结构体实例化（第一种方法）</h5><p>只有当结构体实例化时，才会真正地分配内存。也就是必须实例化后才能使用结构体的字段。</p>\n<p>结构体本身也是一种类型，我们可以像声明内置类型一样使用<code>var</code>关键字声明结构体类型。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> 结构体实例 结构体类型</span></span></code></pre></div><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> p1 person</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">city </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p1=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// p1=&#123;绝迹之春 芜湖 18&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p1=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// p1=main.person&#123;name:&quot;绝迹之春&quot;, city:&quot;芜湖&quot;, age:18&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"6-4-2-结构体实例化（第二种方法）\"><a href=\"#6-4-2-结构体实例化（第二种方法）\" class=\"headerlink\" title=\"6.4.2 结构体实例化（第二种方法）\"></a>6.4.2 结构体实例化（第二种方法）</h5><p>我们还可以通过使用<code>new</code>关键字对结构体进行实例化，得到的是结构体的地址。</p>\n<p>格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> p2 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">new</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">person</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">city </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%T</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p2</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">     </span><span style=\"color: #676E95; font-style: italic\">// *main.person</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p2=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p2</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//p2=&amp;main.person&#123;name:&quot;绝迹之春&quot;, city:&quot;芜湖&quot;, age:18&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>从打印的结果中我们可以看出<code>p2</code>是一个结构体指针。</p>\n<p>注意：在Golang中支持对结构体指针直接使用.来访问结构体的成员。<code>p2.name = &quot;张三&quot;</code>其实在底层是<code>(*p2).name = &quot;张三&quot;</code></p>\n<h5 id=\"6-4-3-结构体实例化（第三种方法）\"><a href=\"#6-4-3-结构体实例化（第三种方法）\" class=\"headerlink\" title=\"6.4.3 结构体实例化（第三种方法）\"></a>6.4.3 结构体实例化（第三种方法）</h5><p>使用&amp;对结构体进行取地址操作相当于对该结构体类型进行了一次<code>new</code>实例化操作。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p3 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">person</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%T</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p3</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">     </span><span style=\"color: #676E95; font-style: italic\">// *main.person</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p3=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p3</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// p3=&amp;main.person&#123;name:&quot;&quot;, city:&quot;&quot;, age:0&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p3</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p3</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p3</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">city </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">(*</span><span style=\"color: #BABED8\">p3</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #BABED8\">age </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">12</span><span style=\"color: #BABED8\">             </span><span style=\"color: #676E95; font-style: italic\">// 这样也是可以的</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p3=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p3</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// p3=&amp;main.person&#123;name:&quot;绝迹之春&quot;, city:&quot;芜湖&quot;, age:12&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"6-4-4-结构体实例化（第四种方法）-键值对初始化\"><a href=\"#6-4-4-结构体实例化（第四种方法）-键值对初始化\" class=\"headerlink\" title=\"6.4.4 结构体实例化（第四种方法） 键值对初始化\"></a>6.4.4 结构体实例化（第四种方法） 键值对初始化</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p4 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> person</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        city</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p4=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p4</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// p4=main.person&#123;name:&quot;绝迹之春&quot;, city:&quot;芜湖&quot;, age:18&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>注意：最后一个属性的<code>,</code>要加上（Goland好像不会报错，但是不符合语法规范，要么给最后一个属性的后面加上<code>,</code>，要么将<code>&#125;</code>直接写在最后一个属性的后面，如：<code>age: 18&#125;</code>，也许Goland不报错是因为这个的原因）</p>\n<h5 id=\"6-4-5-结构体实例化（第五种方法）-结构体指针进行键值对初始化\"><a href=\"#6-4-5-结构体实例化（第五种方法）-结构体指针进行键值对初始化\" class=\"headerlink\" title=\"6.4.5 结构体实例化（第五种方法） 结构体指针进行键值对初始化\"></a>6.4.5 结构体实例化（第五种方法） 结构体指针进行键值对初始化</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p5 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">person</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        city</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p5=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p5</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// p5=&amp;main.person&#123;name:&quot;绝迹之春&quot;, city:&quot;芜湖&quot;, age:18&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>当某些字段没有初始值的时候，这个字段可以不写。此时，没有指定初始值的字段的值就是该字段类型的<code>零值</code>。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p6 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">person</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        city</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p6=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p6</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// p6=&amp;main.person&#123;name:&quot;&quot;, city:&quot;芜湖&quot;, age:0&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"6-4-6-结构体实例化（第六种方法）-使用值的列表初始化\"><a href=\"#6-4-6-结构体实例化（第六种方法）-使用值的列表初始化\" class=\"headerlink\" title=\"6.4.6 结构体实例化（第六种方法） 使用值的列表初始化\"></a>6.4.6 结构体实例化（第六种方法） 使用值的列表初始化</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 初始化结构体的时候可以简写，也就是初始化的时候不写键，直接写值：</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p7 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">person</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">p7=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p7</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// p7=&amp;main.person&#123;name:&quot;绝迹之春&quot;, city:&quot;芜湖&quot;, age:18&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>使用这种格式初始化时，需要注意：</p>\n<ol>\n<li><p>必须初始化结构体的所有字段。</p>\n</li>\n<li><p>初始值的填充顺序必须与字段在结构体中的声明顺序一致。</p>\n</li>\n<li><p>该方式不能和键值初始化方式混用。</p>\n</li>\n</ol>\n<h4 id=\"6-5-结构体内存布局\"><a href=\"#6-5-结构体内存布局\" class=\"headerlink\" title=\"6.5 结构体内存布局\"></a>6.5 结构体内存布局</h4><p>Go 语言中，结构体和它所包含的数据在内存中是以连续块的形式存在的。</p>\n<p>即使结构体中嵌套有其他的结构体，这在性能上带来了很大的优势。</p>\n<p>（实际上，Golang对结构体的内存处理还有很多细节，如果是不同类型的数据类型，所占内存的大小是不一样的，有时会采用内存对齐这一概念，这里不详细说明，感兴趣的可以去搜一下）</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">test</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #C792EA\">int8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    b </span><span style=\"color: #C792EA\">int8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    c </span><span style=\"color: #C792EA\">int8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    d </span><span style=\"color: #C792EA\">int8</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">n </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> test</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">n.a </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">n</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">n.b </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">n</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">b</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">n.c </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">n</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">c</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">n.d </span><span style=\"color: #F07178\">%p</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">n</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">d</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">n.a 0xc00000a0b8</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">n.b 0xc00000a0b9</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">n.c 0xc00000a0ba</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">n.d 0xc00000a0bb</span></span></code></pre></div><h4 id=\"6-6-结构体的可见性\"><a href=\"#6-6-结构体的可见性\" class=\"headerlink\" title=\"6.6 结构体的可见性\"></a>6.6 结构体的可见性</h4><ul>\n<li>Go语言关于可见的统一规则：大写字母开头跨<code>package</code>也可以访问；否则只能本<code>package</code>内部访问。</li>\n<li>结构体名称以大写开头时，<code>package</code>外部可见，在此前提下，结构体中以大写开头在成员变量或成员方法在<code>package</code>外部也可见。</li>\n</ul>\n<h4 id=\"6-7-匿名结构体\"><a href=\"#6-7-匿名结构体\" class=\"headerlink\" title=\"6.7 匿名结构体\"></a>6.7 匿名结构体</h4><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> stu </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 声明stu是一个结构体，但这个结构体是匿名的</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Addr </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">stu</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">stu</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Addr </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span></span></code></pre></div><p>匿名结构体通常用于只使用一次的情况。</p>\n<h4 id=\"6-8-结构体中含有匿名成员\"><a href=\"#6-8-结构体中含有匿名成员\" class=\"headerlink\" title=\"6.8 结构体中含有匿名成员\"></a>6.8 结构体中含有匿名成员</h4><p>结构体允许其成员字段在声明时没有字段名而只有类型，这种没有名字的字段就称为<code>匿名字段</code>。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Student</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Id      </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 匿名字段</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 直接使用数据类型作为字段名，所以匿名字段中不能出现重复的数据类型</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> stu </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> Student</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">Id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">749</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">425.0</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">anonymous_member string member=</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\"> float member=</span><span style=\"color: #F07178\">%f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> stu</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> stu</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #C792EA\">float32</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 直接使用数据类型访问匿名成员</span></span></code></pre></div><p><code>匿名字段</code>默认采用类型名作为字段名，结构体要求字段名称必须唯一，因此一个结构体中同种类型的<code>匿名字段</code>只能有一个。</p>\n<h4 id=\"6-9-结构体指针\"><a href=\"#6-9-结构体指针\" class=\"headerlink\" title=\"6.9 结构体指针\"></a>6.9 结构体指针</h4><p>由于结构体是<code>值类型</code>，在方法传递时希望传递<code>结构体地址</code>，可以使用<code>结构体指针</code>完成。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> p8 Person</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">person1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">p8      </span><span style=\"color: #676E95; font-style: italic\">// 通过取址符&amp;得到指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">person2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">Person</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 直接创建结构体指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">anhui</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">person3 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">new</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">Person</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 通过new()函数实体化一个结构体，并返回其指针</span></span></code></pre></div><p>代码：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> p8 Person</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    person1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">p8      </span><span style=\"color: #676E95; font-style: italic\">// 通过取址符&amp;得到指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    person2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">Person</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 直接创建结构体指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        city</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">anhui</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    person3 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">new</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">Person</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 通过new()函数实体化一个结构体，并返回其指针</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">person1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">person2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">person3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"6-9-1-构造函数\"><a href=\"#6-9-1-构造函数\" class=\"headerlink\" title=\"6.9.1 构造函数\"></a>6.9.1 构造函数</h5><p>Go语言的结构体没有构造函数，我们可以自己实现。</p>\n<p>例如，下方的代码就实现了一个<code>person</code>的构造函数。 因为<code>struct</code>是值类型，如果结构体比较复杂的话，值拷贝性能开销会比较大，所以该构造函数返回的是结构体指针类型。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">newPerson</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> city </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">person </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">person</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        city</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> city</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  age</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>调用构造函数</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">p9 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">newPerson</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p9</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>代码：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    city </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">newPerson</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> city </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">person </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">person</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        city</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> city</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  age</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p9 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">newPerson</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p9</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"6-10-方法和接收者\"><a href=\"#6-10-方法和接收者\" class=\"headerlink\" title=\"6.10 方法和接收者\"></a>6.10 方法和接收者</h4><p>Go语言中的<code>方法（Method）</code>是一种作用于特定类型变量的函数。这种特定类型变量叫做<code>接收者（Receiver）</code>。接收者的概念就类似于其他语言中的<code>this</code>或者<code>self</code>。</p>\n<p>方法的定义格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">接收者变量 接收者类型</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">方法名</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">参数列表</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">返回参数</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    函数体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>其中，</p>\n<ol>\n<li>接收者变量：接收者中的参数变量名在命名时，官方建议使用接收者类型名的第一个小写字母，而不是<code>self</code>、<code>this</code>之类的命名。例如，<code>Person</code>类型的接收者变量应该命名为<code>p</code>，<code>Connector</code>类型的接收者变量应该命名为<code>c</code>等。</li>\n<li>接收者类型：接收者类型和参数类似，可以是指针类型和非指针类型。</li>\n<li>方法名、参数列表、返回参数：具体格式与函数定义相同。</li>\n</ol>\n<p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Person 结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// NewPerson 构造函数</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">NewPerson</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Person </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">Person</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  age</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Dream Person做梦的方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p Person</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Dream</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">的梦想是学好Go语言！</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> p</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">NewPerson</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Dream</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>方法与函数的区别是，函数不属于任何类型，方法属于特定的类型。</p>\n<h5 id=\"6-10-1-指针类型的接收者\"><a href=\"#6-10-1-指针类型的接收者\" class=\"headerlink\" title=\"6.10.1 指针类型的接收者\"></a>6.10.1 指针类型的接收者</h5><p>指针类型的接收者由一个结构体的指针组成，由于指针的特性，调用方法时修改接收者指针的任意成员变量，在方法结束后，修改都是有效的。这种方式就十分接近于其他语言中面向对象中的<code>this</code>或者<code>self</code>。 例如我们为<code>Person</code>添加一个<code>SetAge</code>方法，来修改实例变量的年龄。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// SetAge 设置p的年龄</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 使用指针接收者</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Person</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">SetAge</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">newAge </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> newAge</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>调用该方法：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">NewPerson</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 18</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">SetAge</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">12</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 12</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"6-10-2-值类型的接收者\"><a href=\"#6-10-2-值类型的接收者\" class=\"headerlink\" title=\"6.10.2 值类型的接收者\"></a>6.10.2 值类型的接收者</h5><p>当方法作用于值类型接收者时，Go语言会在代码运行时将接收者的值复制一份。在值类型接收者的方法中可以获取接收者的成员值，但修改操作只是针对副本，无法修改接收者变量本身。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// SetAge2 设置p的年龄</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 使用值接收者</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p Person</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">SetAge2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">newAge </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> newAge</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">NewPerson</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Dream</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 18</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">SetAge2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">12</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">      </span><span style=\"color: #676E95; font-style: italic\">// (*p1).SetAge2(12)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">age</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 18</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"6-10-3-什么时候应该使用指针类型接收者\"><a href=\"#6-10-3-什么时候应该使用指针类型接收者\" class=\"headerlink\" title=\"6.10.3 什么时候应该使用指针类型接收者\"></a>6.10.3 什么时候应该使用指针类型接收者</h5><ol>\n<li>需要修改接收者中的值。</li>\n<li>接收者是拷贝代价比较大的大对象。</li>\n<li>保证一致性，如果有某个方法使用了指针接收者，那么其他的方法也应该使用指针接收者。</li>\n</ol>\n<h5 id=\"6-10-4-任意类型添加方法\"><a href=\"#6-10-4-任意类型添加方法\" class=\"headerlink\" title=\"6.10.4 任意类型添加方法\"></a>6.10.4 任意类型添加方法</h5><p>在Go语言中，接收者的类型可以是任何类型，不仅仅是结构体，任何类型都可以拥有方法。</p>\n<p>举个例子，我们基于内置的<code>int</code>类型使用<code>type</code>关键字可以定义新的自定义类型，然后为我们的自定义类型添加方法。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// MyInt 将int定义为自定义MyInt类型</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">MyInt</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// SayHello 为MyInt添加一个SayHello的方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">m MyInt</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">SayHello</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Hello, 我是一个int。</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> m1 MyInt</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    m1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">SayHello</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// Hello, 我是一个int。</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    m1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #C3E88D\">  </span><span style=\"color: #F07178\">%T</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> m1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> m1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//  100  main.MyInt</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>注意事项：非本地类型不能定义方法，也就是说我们不能给别的包的类型定义方法。</p>\n<h4 id=\"6-11-嵌套结构体\"><a href=\"#6-11-嵌套结构体\" class=\"headerlink\" title=\"6.11 嵌套结构体\"></a>6.11 嵌套结构体</h4><p>一个结构体中可以嵌套包含另一个结构体或结构体指针。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Address 地址结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Address</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Province </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    City     </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// User 用户结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name    </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Gender  </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Address Address</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Gender</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">男</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Address</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> Address</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            Province</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">安徽</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            City</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user1=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// user1=main.User&#123;Name:&quot;绝迹之春&quot;, Gender:&quot;男&quot;, Address:main.Address&#123;Province:&quot;安徽&quot;, City:&quot;芜湖&quot;&#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"6-11-1-嵌套匿名结构体\"><a href=\"#6-11-1-嵌套匿名结构体\" class=\"headerlink\" title=\"6.11.1 嵌套匿名结构体\"></a>6.11.1 嵌套匿名结构体</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Address 地址结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Address</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Province </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    City     </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// User 用户结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name    </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Gender  </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Address </span><span style=\"color: #676E95; font-style: italic\">//匿名结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> user2 User</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Gender </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">男</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Address</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Province </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">安徽</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 通过匿名结构体.字段名访问</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">City </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">                </span><span style=\"color: #676E95; font-style: italic\">// 直接访问匿名结构体的字段名</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user2=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user2</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// user2=main.User&#123;Name:&quot;绝迹之春&quot;, Gender:&quot;男&quot;, Address:main.Address&#123;Province:&quot;安徽&quot;, City:&quot;芜湖&quot;&#125;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>当访问结构体成员时会先在结构体中查找该字段，找不到再去匿名结构体中查找。</p>\n<h5 id=\"6-11-2-嵌套结构体的字段名冲突\"><a href=\"#6-11-2-嵌套结构体的字段名冲突\" class=\"headerlink\" title=\"6.11.2 嵌套结构体的字段名冲突\"></a>6.11.2 嵌套结构体的字段名冲突</h5><p>嵌套结构体内部可能存在相同的字段名。这个时候为了避免歧义需要指定具体的内嵌结构体的字段。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Address 地址结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Address</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Province   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    City       </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    CreateTime </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Email 邮箱结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Email</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Account    </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    CreateTime </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// User 用户结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Gender </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Address</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Email</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> user3 User</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user3</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user3</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Gender </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">男</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// user3.CreateTime = &quot;2010&quot; // ambiguous selector user3.CreateTime</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user3</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Address</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">CreateTime </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">2010</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 指定Address结构体中的CreateTime</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user3</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Email</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">CreateTime </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">2010</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\">   </span><span style=\"color: #676E95; font-style: italic\">// 指定Email结构体中的CreateTime</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"6-12-结构体的“继承”\"><a href=\"#6-12-结构体的“继承”\" class=\"headerlink\" title=\"6.12 结构体的“继承”\"></a>6.12 结构体的“继承”</h4><p>Go语言中使用结构体也可以实现其他编程语言中面向对象的继承。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Animal 动物</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Animal</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Animal</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">会动！</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Dog 狗</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Dog</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Feet    </span><span style=\"color: #C792EA\">int8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Animal </span><span style=\"color: #676E95; font-style: italic\">// 通过嵌套匿名结构体实现继承</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">d </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Dog</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">wang</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">会汪汪汪~</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> d</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    d1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">Dog</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Feet</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Animal</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">Animal</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 注意嵌套的是结构体指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">狗狗</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    d1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">wang</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 狗狗会汪汪汪~</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    d1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 狗狗会动！</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"6-13-深拷贝与浅拷贝\"><a href=\"#6-13-深拷贝与浅拷贝\" class=\"headerlink\" title=\"6.13 深拷贝与浅拷贝\"></a>6.13 深拷贝与浅拷贝</h4><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Vedio</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Length </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Author User</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>Go语言里的赋值都会发生值拷贝。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/88aad6d3688988dcd93af37dc1d5173a_1739762143339.png\" alt=\"avatar\"></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Vedio</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Length </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Author </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">User</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/a9f0f4c2a7abdebdf1b3830ad4d1401f_1739762143953.png\" alt=\"avatar\"></p>\n<ul>\n<li>深拷贝，拷贝的是值，比如<code>Vedio.Length</code>。</li>\n<li>浅拷贝，拷贝的是指针，比如<code>Vedio.Author</code>。</li>\n<li>深拷贝开辟了新的内存空间，修改操作不影响原先的内存。</li>\n<li>浅拷贝指向的还是原来的内存空间，修改操作直接作用在原内存空间上。</li>\n</ul>\n<p>传<code>slice</code>，对<code>sclice</code>的3个字段进行了拷贝，拷贝的是底层数组的指针，所以修改底层数组的元素会反应到原数组上。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">users </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&lt;!--</span><span style=\"color: #BABED8\">swig￼</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">--&gt;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">update_users</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">users </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    users</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">].</span><span style=\"color: #BABED8\">Name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">光绪</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"拓展：Golang结构体序列化与反序列化\"><a href=\"#拓展：Golang结构体序列化与反序列化\" class=\"headerlink\" title=\"拓展：Golang结构体序列化与反序列化\"></a>拓展：Golang结构体序列化与反序列化</h4><h5 id=\"1-关于-JSON-数据\"><a href=\"#1-关于-JSON-数据\" class=\"headerlink\" title=\"1.关于 JSON 数据\"></a>1.关于 JSON 数据</h5><p><code>JSON（JavaScript Object Notation）</code>是一种轻量级的数据交换格式。易于人阅读和编写。同时也易于机器解析和生成。</p>\n<p><code>JSON</code>的基本格式如下：</p>\n<div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">a</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Hello</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">b</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">World</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>稍微复杂点的<code>JSON</code>：</p>\n<div class=\"language-json\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">json</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">squadName</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Super hero squad</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">homeTown</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Metro City</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">formed</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2016</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">secretBase</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Super tower</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">active</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C792EA\">members</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Molecule Man</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">age</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">29</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">secretIdentity</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Dan Jukes</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">powers</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Radiation resistance</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Turning tiny</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Radiation blast</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Madame Uppercut</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">age</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">39</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">secretIdentity</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Jane Wilson</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">powers</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Million tonne punch</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Damage resistance</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Superhuman reflexes</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Eternal Flame</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">age</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1000000</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">secretIdentity</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Unknown</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">powers</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Immortality</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Heat Immunity</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Inferno</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Teleportation</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Interdimensional travel</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">      </span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">]</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"2-结构体与-JSON-序列化\"><a href=\"#2-结构体与-JSON-序列化\" class=\"headerlink\" title=\"2.结构体与 JSON 序列化\"></a>2.结构体与 JSON 序列化</h5><p>比如我们Golang要给App或者小程序提供Api接口数据，这个时候就需要涉及到结构体和<code>JSON</code>之间的相互转换。</p>\n<p>Golang <code>JSON</code>序列化是指把结构体数据转化成<code>JSON</code>格式的字符串，Golang <code>JSON</code>的反序列化 是指把<code>JSON</code>数据转化成Golang中的结构体对象。</p>\n<p>Golang中的序列化和反序列化主要通过<code>&quot;encoding/json&quot;</code>包中的<code>json.Marshal()</code>和<code>json.Unmarshal()</code>方法实现。</p>\n<ol>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">结构体对象转化成`JSON`字符串</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">encoding/json</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Student</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 私有属性不能被 json 包访问</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ID     </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Gender </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Sno    </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> Student</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        ID</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Gender</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">男</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">张三</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Sno</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s0001</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _ </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> json</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Marshal</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    jsonStr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">string</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">jsonStr</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><ol start=\"2\">\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">`JSON`字符串转换成结构体对象</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">encoding/json</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Student</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ID     </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Gender </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Sno    </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// var jsonStr = &quot;&#123;\\&quot;ID\\&quot;:1,\\&quot;Gender\\&quot;:\\&quot;男\\&quot;,\\&quot;Name\\&quot;:\\&quot;李四\\&quot;,\\&quot;Sno\\&quot;:\\&quot;s0001\\&quot;&#125;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> jsonStr </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">&#123;&quot;ID&quot;:1,&quot;Gender&quot;:&quot;男&quot;,&quot;Name&quot;:&quot;李四&quot;,&quot;Sno&quot;:&quot;s0001&quot;&#125;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 定义一个 Monster 实例</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> student Student</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> json</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Unmarshal</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #82AAFF\">byte</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">jsonStr</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">student</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">unmarshal err=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">反序列化后 student=</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #C3E88D\"> student.Name=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> student</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> student</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"3-结构体标签-Tag\"><a href=\"#3-结构体标签-Tag\" class=\"headerlink\" title=\"3.结构体标签 Tag\"></a>3.结构体标签 Tag</h5><p><code>Tag</code>是结构体的元信息，可以在运行的时候通过反射的机制读取出来。<code>Tag</code>在结构体字段的后方定义，由一对反引号包裹起来，具体的格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">key1:&quot;value1&quot; key2:&quot;value2&quot;</span><span style=\"color: #89DDFF\">`</span></span></code></pre></div><p>结构体<code>Tag</code>由一个或多个键值对组成。键与值使用冒号分隔，值用双引号括起来。同一个结 构体字段可以设置多个键值对<code>Tag</code>，不同的键值对之间使用空格分隔。</p>\n<p>注意事项：为结构体编写<code>Tag</code>时，必须严格遵守键值对的规则。结构体标签的解析代码的容错能力很差，一旦格式写错，编译和运行时都不会提示任何错误，通过反射也无法正确取值。例如不要在<code>key</code>和<code>value</code>之间添加空格。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">encoding/json</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Student</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ID     </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;id&quot;</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//通过指定 tag 实现 json 序列化该字段时的 key</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Gender </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;gender&quot;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Sno    </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> Student</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        ID</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> Gender</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">男</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">李四</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> Sno</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">s0001</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _ </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> json</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Marshal</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    jsonStr </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">string</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">jsonStr</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">encoding/json</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Student</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ID     </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;id&quot;</span><span style=\"color: #89DDFF\">`</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//通过指定 tag 实现 json 序列化该字段时的 key</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Gender </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;gender&quot;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Sno    </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s2 Student</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> str </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">&#123;</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">id</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">:1,</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">gender</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">男</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">,</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">Name</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">李四</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">,</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">Sno</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">:</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">s0001</span><span style=\"color: #BABED8\">\\&quot;</span><span style=\"color: #C3E88D\">&#125;</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> json</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Unmarshal</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #82AAFF\">byte</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">str</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">s2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%#v</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>关于嵌套结构体的序列化与反序列化以及其他相关知识点，这里不详细说明，感兴趣的可以去搜一下。</p>\n<hr>\n<h3 id=\"模块七：函数\"><a href=\"#模块七：函数\" class=\"headerlink\" title=\"模块七：函数\"></a>模块七：函数</h3><h4 id=\"7-1-学习目标\"><a href=\"#7-1-学习目标\" class=\"headerlink\" title=\"7.1 学习目标\"></a>7.1 学习目标</h4><ol>\n<li>了解函数的定义方式</li>\n<li>熟练掌握函数的相关知识点，并可以在复杂的环境下熟练解决相关问题</li>\n<li>了解并熟练掌握defer语句</li>\n<li>掌握基础的Go语言异常处理方式</li>\n</ol>\n<h4 id=\"7-2-函数定义\"><a href=\"#7-2-函数定义\" class=\"headerlink\" title=\"7.2 函数定义\"></a>7.2 函数定义</h4><p>函数是组织好的、可重复使用的、用于执行指定任务的代码块。</p>\n<p>Go语言中定义函数使用<code>func</code>关键字，具体格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">函数名</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">参数</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">返回值</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    函数体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>其中，</p>\n<ol>\n<li><p>函数名：由<code>字母</code>、<code>数字</code>、<code>下划线</code>组成。但函数名的第一个字母不能是数字。在同一个包内，函数名也称不能重名。</p>\n</li>\n<li><p>参数：参数由<code>参数变量</code>和<code>参数变量的类型</code>组成，多个参数之间使用<code>,</code>分隔。</p>\n</li>\n<li><p>返回值：返回值由<code>返回值变量</code>和其<code>变量类型</code>组成，也可以只写<code>返回值的类型</code>，多个返回值必须用<code>()</code>包裹，并用<code>,</code>分隔。</p>\n</li>\n<li><p>函数体：实现指定功能的<code>代码块</code>。</p>\n</li>\n</ol>\n<p>定义一个求两个数之和的函数：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>函数的<code>参数</code>和<code>返回值</code>都是可选的，例如我们可以实现一个既不需要<code>参数</code>也没有<code>返回值</code>的函数：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">sayHello</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Hello</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"7-3-函数调用\"><a href=\"#7-3-函数调用\" class=\"headerlink\" title=\"7.3 函数调用\"></a>7.3 函数调用</h4><p>定义了函数之后，我们可以通过<code>函数名()</code>的方式调用函数。</p>\n<p>例如我们调用上面定义的两个函数，代码如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">sayHello</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Hello</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">sayHello</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    result </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">result</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>注意：调用有<code>返回值</code>的函数时，可以不接收其<code>返回值</code>。</p>\n<h4 id=\"7-4-函数参数\"><a href=\"#7-4-函数参数\" class=\"headerlink\" title=\"7.4 函数参数\"></a>7.4 函数参数</h4><h5 id=\"7-4-1-类型简写\"><a href=\"#7-4-1-类型简写\" class=\"headerlink\" title=\"7.4.1 类型简写\"></a>7.4.1 类型简写</h5><p>函数的参数中如果相邻变量的类型相同，则可以省略类型，例如：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>上面的代码中，<code>intSum函数</code>有两个参数，这两个参数的类型均为<code>int</code>，因此可以省略<code>x</code>的类型，因为<code>y</code>后面有类型说明，<code>x</code>参数也是该类型。</p>\n<h5 id=\"7-4-2-可变参数\"><a href=\"#7-4-2-可变参数\" class=\"headerlink\" title=\"7.4.2 可变参数\"></a>7.4.2 可变参数</h5><p><code>可变参数</code>是指函数的参数数量不固定。Go语言中的<code>可变参数</code>通过在参数名后加<code>...</code>来标识。</p>\n<p>注意：<code>可变参数</code>通常要作为函数的最后一个参数。</p>\n<p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #89DDFF\">...</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//x 是一个切片</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sum </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        sum </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> sum </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> v</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> sum</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum2</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret3 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret4 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">30</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ret1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ret2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ret3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ret4</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 0 10 30 60</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><code>固定参数</code>搭配<code>可变参数</code>使用时，<code>可变参数</code>要放在<code>固定参数</code>的后面，示例代码如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum3</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #89DDFF\">...</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sum </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> x</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        sum </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> sum </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> v</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> sum</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret5 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum3</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret6 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum3</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret7 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum3</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret8 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">intSum3</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">30</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ret5</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ret6</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ret7</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ret8</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 100 110 130 160</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>本质上，函数的<code>可变参数</code>是通过<code>切片</code>来实现的。</p>\n<h4 id=\"7-5-函数返回值\"><a href=\"#7-5-函数返回值\" class=\"headerlink\" title=\"7.5 函数返回值\"></a>7.5 函数返回值</h4><p>Go语言中通过<code>return</code>关键字向外输出<code>返回值</code>。</p>\n<h5 id=\"7-5-1-函数多返回值\"><a href=\"#7-5-1-函数多返回值\" class=\"headerlink\" title=\"7.5.1 函数多返回值\"></a>7.5.1 函数多返回值</h5><p>Go语言中函数支持<code>多返回值</code>，函数如果有多个<code>返回值</code>时必须用<code>()</code>将所有<code>返回值</code>包裹起来。</p>\n<p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">calc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sum </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> sum</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sub</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>不能用<code>容器对象</code>接收<code>多返回值</code>。只能用<code>多个变量</code>，或<code>_</code>忽略。</p>\n<p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">calc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sum </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> sum</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sub</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// s := make([]int, 2)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// s = calc(1, 2) // assignment mismatch: 1 variable but calc returns 2 values</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _ </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">calc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"7-5-2-返回值命名\"><a href=\"#7-5-2-返回值命名\" class=\"headerlink\" title=\"7.5.2 返回值命名\"></a>7.5.2 返回值命名</h5><p>函数定义时可以给返回值命名，并在函数体中直接使用这些变量，最后通过<code>return</code>关键字返回。</p>\n<p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">calc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sum</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sub </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sum </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"7-6-函数变量作用域\"><a href=\"#7-6-函数变量作用域\" class=\"headerlink\" title=\"7.6 函数变量作用域\"></a>7.6 函数变量作用域</h4><h5 id=\"7-6-1-全局变量\"><a href=\"#7-6-1-全局变量\" class=\"headerlink\" title=\"7.6.1 全局变量\"></a>7.6.1 全局变量</h5><p><code>全局变量</code>是定义在函数外部的<code>变量</code>，它在程序整个运行周期内都有效。</p>\n<p>在函数中可以访问到<code>全局变量</code>。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 定义全局变量 num</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> num </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testGlobalVar</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">num=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 函数中可以访问全局变量 num</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">testGlobalVar</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// num=10</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"7-6-2-局部变量\"><a href=\"#7-6-2-局部变量\" class=\"headerlink\" title=\"7.6.2 局部变量\"></a>7.6.2 局部变量</h5><p><code>局部变量</code>是函数内部定义的变量。</p>\n<ol>\n<li>函数内定义的变量无法在该函数外使用</li>\n</ol>\n<p>例如下面的示例代码<code>main()函数</code>中无法使用<code>testLocalVar函数</code>中定义的变量<code>x</code>：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testLocalVar</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 定义一个函数局部变量 x,仅在该函数内生效</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">x=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">testLocalVar</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// fmt.Println(x) // 此时无法使用变量 x</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><ol start=\"2\">\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">如果局部变量和全局变量重名，优先访问局部变量</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 定义全局变量 num</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> num </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">testNum</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    num </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">num=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 函数中优先使用局部变量</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">testNum</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// num=100</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"7-7-函数类型与变量\"><a href=\"#7-7-函数类型与变量\" class=\"headerlink\" title=\"7.7 函数类型与变量\"></a>7.7 函数类型与变量</h4><h5 id=\"7-7-1-定义函数类型\"><a href=\"#7-7-1-定义函数类型\" class=\"headerlink\" title=\"7.7.1 定义函数类型\"></a>7.7.1 定义函数类型</h5><p>我们可以使用<code>type</code>关键字来定义一个函数类型，具体格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">calculation</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>上面语句定义了一个<code>calculation</code>类型，它是一种函数类型，这种函数接收两个<code>int</code>类型的参 数并且返回一个<code>int</code>类型的返回值。</p>\n<p>简单来说，凡是满足这个条件的函数都是<code>calculation</code>类型的函数，例如下面的<code>add</code>和<code>sub</code>是<code>calculation</code>类型。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">sub</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><code>add</code>和<code>sub</code>都能赋值给<code>calculation</code>类型的变量。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> c calculation</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">c </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> add</span></span></code></pre></div><h5 id=\"7-7-2-函数类型变量\"><a href=\"#7-7-2-函数类型变量\" class=\"headerlink\" title=\"7.7.2 函数类型变量\"></a>7.7.2 函数类型变量</h5><p>我们可以声明<code>函数类型的变量</code>并且为该变量赋值：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">calculation</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">sub</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> c calculation               </span><span style=\"color: #676E95; font-style: italic\">// 声明一个 calculation 类型的变量 c</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    c </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> add                         </span><span style=\"color: #676E95; font-style: italic\">// 把 add 赋值给 c</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type of c:</span><span style=\"color: #F07178\">%T</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// type of c:main.calculation</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">c</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\">// 像调用 add 一样调用 c</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    f </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> add                        </span><span style=\"color: #676E95; font-style: italic\">// 将函数 add 赋值给变量 f1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type of f:</span><span style=\"color: #F07178\">%T</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> f</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// type of f:func(int, int) int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">          </span><span style=\"color: #676E95; font-style: italic\">// 像调用 add 一样调用 f</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"7-8-高阶函数\"><a href=\"#7-8-高阶函数\" class=\"headerlink\" title=\"7.8 高阶函数\"></a>7.8 高阶函数</h4><p>高阶函数分为函数作为参数和函数作为返回值两部分。</p>\n<h5 id=\"7-8-1-函数作为参数\"><a href=\"#7-8-1-函数作为参数\" class=\"headerlink\" title=\"7.8.1 函数作为参数\"></a>7.8.1 函数作为参数</h5><p>函数可以作为参数：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">calc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> op </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">op</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ret2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">calc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> add</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ret2</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 30</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"7-8-2-函数作为返回值\"><a href=\"#7-8-2-函数作为返回值\" class=\"headerlink\" title=\"7.8.2 函数作为返回值\"></a>7.8.2 函数作为返回值</h5><p>函数也可以作为返回值：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">sub</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">do</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> s </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">+</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> add</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">-</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> sub</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">do</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">+</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">a</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"7-9-匿名函数和闭包\"><a href=\"#7-9-匿名函数和闭包\" class=\"headerlink\" title=\"7.9 匿名函数和闭包\"></a>7.9 匿名函数和闭包</h4><h5 id=\"7-9-1-匿名函数\"><a href=\"#7-9-1-匿名函数\" class=\"headerlink\" title=\"7.9.1 匿名函数\"></a>7.9.1 匿名函数</h5><p>函数当然还可以作为返回值，但是在 Go 语言中函数内部不能再像之前那样定义函数了，只能定义<code>匿名函数</code>。<code>匿名函数</code>就是没有函数名的函数，<code>匿名函数</code>的定义格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">参数</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">返回值</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    函数体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><code>匿名函数</code>因为没有函数名，所以没办法像普通函数那样调用，所以<code>匿名函数</code>需要保存到某个<code>变量</code>或者作为立即执行<code>函数</code>:</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 将匿名函数保存到变量</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    add </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 通过变量调用匿名函数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 自执行函数：匿名函数定义完加()直接执行</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><code>匿名函数</code>多用于实现<code>回调函数</code>和<code>闭包</code>。</p>\n<h5 id=\"7-9-2-闭包\"><a href=\"#7-9-2-闭包\" class=\"headerlink\" title=\"7.9.2 闭包\"></a>7.9.2 闭包</h5><p><code>闭包</code>可以理解成”定义在一个函数内部的函数“。在本质上，<code>闭包</code>是将<code>函数内部</code>和<code>函数外部</code>连接起来的桥梁。或者说是函数和其引用环境的组合体。</p>\n<p>首先我们来看一个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">adder</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        x </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> f </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">adder</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 10</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 30</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">30</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 60</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    f1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">adder</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">40</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 40</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">50</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 90</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>变量<code>f</code>是一个函数并且它引用了其外部作用域中的<code>x</code>变量，此时<code>f</code>就是一个<code>闭包</code>。 在<code>f</code>的生命周期内，变量<code>x</code>也一直有效。</p>\n<h6 id=\"7-9-2-1-闭包进阶示例-1\"><a href=\"#7-9-2-1-闭包进阶示例-1\" class=\"headerlink\" title=\"7.9.2.1 闭包进阶示例 1\"></a>7.9.2.1 闭包进阶示例 1</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">adder2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        x </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> f </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">adder2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 20</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 40</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">30</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 70</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    f1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">adder2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">40</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 60</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">50</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 110</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h6 id=\"7-9-2-2-闭包进阶示例-2\"><a href=\"#7-9-2-2-闭包进阶示例-2\" class=\"headerlink\" title=\"7.9.2.2 闭包进阶示例 2\"></a>7.9.2.2 闭包进阶示例 2</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">strings</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">makeSuffixFunc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">suffix </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!</span><span style=\"color: #BABED8\">strings</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">HasSuffix</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> suffix</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> suffix</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> name</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    jpgFunc </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">makeSuffixFunc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">.jpg</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    txtFunc </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">makeSuffixFunc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">.txt</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">jpgFunc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">test</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// test.jpg</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">txtFunc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">test</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// test.txt</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h6 id=\"7-9-2-3-闭包进阶示例-3\"><a href=\"#7-9-2-3-闭包进阶示例-3\" class=\"headerlink\" title=\"7.9.2.3 闭包进阶示例 3\"></a>7.9.2.3 闭包进阶示例 3</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">calc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">base </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(func(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    add </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        base </span><span style=\"color: #89DDFF\">+=</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> base</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sub </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        base </span><span style=\"color: #89DDFF\">-=</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> base</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> add</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sub</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    f1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> f2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">calc</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">f2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 11 9</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">f2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 12 8</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">f1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">f2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">6</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 13 7</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>闭包其实并不复杂，只要牢记闭包&#x3D;函数+引用环境</p>\n<h4 id=\"7-10-defer-语句\"><a href=\"#7-10-defer-语句\" class=\"headerlink\" title=\"7.10 defer 语句\"></a>7.10 defer 语句</h4><p>简介：</p>\n<ul>\n<li><code>defer</code>用于注册一个延迟调用（在函数返回之前调用）。</li>\n<li><code>defer</code>典型的应用场景是释放资源，比如关闭文件句柄，释放数据库连接等。</li>\n<li>如果同一个函数里有多个<code>defer</code>，则后注册的先执行。</li>\n<li><code>defe</code>r后可以跟一个<code>func</code>，<code>func</code>内部如果发生<code>panic</code>，会把<code>panic</code>暂时搁置，当把其他<code>defer</code>执行完之后再来执行这个。</li>\n<li><code>defer</code>后不是跟<code>func</code>，而直接跟一条执行语句，则相关变量在注册<code>defer</code>时被拷贝或计算。</li>\n</ul>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">basic</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">A</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">B</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 如果同一个函数里有多个defer，则后注册的先执行</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">C</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">defer_exe_time</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">9</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// defer后可以跟一个func</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">first i=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 打印5，而非9。充分理解“defer在函数返回前执行”的含义，不是在“return语句前执行defer”</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func(</span><span style=\"color: #BABED8\">i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">second i=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 打印9</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">third i=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// defer后不是跟func，而直接跟一条执行语句，则相关变量在注册defer时被拷贝或计算</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>由于<code>defer</code>语句延迟调用的特性，所以<code>defer</code>语句能非常方便的处理资源释放问题。比如： 资源清理、文件关闭、解锁及记录时间等。</p>\n<h5 id=\"7-10-1-规则一：延迟函数的参数在defer语句出现时就已经确定下来了\"><a href=\"#7-10-1-规则一：延迟函数的参数在defer语句出现时就已经确定下来了\" class=\"headerlink\" title=\"7.10.1 规则一：延迟函数的参数在defer语句出现时就已经确定下来了\"></a>7.10.1 规则一：延迟函数的参数在defer语句出现时就已经确定下来了</h5><p>官方给出一个例子，如下所示：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">a</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><code>defer</code>语句中的<code>fmt.Println()</code>参数<code>i</code>值在<code>defer</code>出现时就已经确定下来，实际上是拷贝了一份。后面对变量<code>i</code>的修改不会影响fmt.Println()函数的执行，仍然打印”0”。</p>\n<p>注意：对于指针类型参数，规则仍然适用，只不过延迟函数的参数是一个地址值，这种情况下，<code>defer</code>后面的语句对变量的修改可能会影响延迟函数。</p>\n<h5 id=\"7-10-2-规则二：延迟函数执行按后进先出顺序执行，即先出现的defer最后执行\"><a href=\"#7-10-2-规则二：延迟函数执行按后进先出顺序执行，即先出现的defer最后执行\" class=\"headerlink\" title=\"7.10.2 规则二：延迟函数执行按后进先出顺序执行，即先出现的defer最后执行\"></a>7.10.2 规则二：延迟函数执行按后进先出顺序执行，即先出现的defer最后执行</h5><p>这个规则很好理解，定义<code>defer</code>类似于入栈操作，执行<code>defer</code>类似于出栈操作。</p>\n<p>设计<code>defer</code>的初衷是简化函数返回时资源清理的动作，资源往往有依赖顺序，比如先申请<code>A资源</code>，再根据<code>A资源</code>申请<code>B资源</code>，根据<code>B资源</code>申请<code>C资源</code>，即申请顺序是：<code>A–&gt;B–&gt;C</code>，释放时往往又要反向进行。这就是把<code>defer</code>设计成<code>LIFO</code>的原因。</p>\n<p>每申请到一个用完需要释放的资源时，立即定义一个<code>defer</code>来释放资源是个很好的习惯。</p>\n<h5 id=\"7-10-3-规则三：延迟函数可能操作主函数的具名返回值\"><a href=\"#7-10-3-规则三：延迟函数可能操作主函数的具名返回值\" class=\"headerlink\" title=\"7.10.3 规则三：延迟函数可能操作主函数的具名返回值\"></a>7.10.3 规则三：延迟函数可能操作主函数的具名返回值</h5><p>定义<code>defer</code>的函数，即主函数可能有返回值，返回值有没有名字没有关系，<code>defer</code>所作用的函数，即延迟函数可能会影响到返回值。</p>\n<p>若要理解延迟函数是如何影响主函数返回值的，只要明白函数是如何返回的就足够了。</p>\n<h6 id=\"7-10-3-1-函数返回过程\"><a href=\"#7-10-3-1-函数返回过程\" class=\"headerlink\" title=\"7.10.3.1 函数返回过程\"></a>7.10.3.1 函数返回过程</h6><p>有一个事实必须要了解，关键字<code>return</code>不是一个原子操作，实际上<code>return</code>只代理汇编指令<code>ret</code>，即将跳转程序执行。比如语句<code>return i</code>，实际上分两步进行，即将<code>i</code>值存入栈中作为返回值，然后执行跳转，而<code>defer</code>的执行时机正是跳转前，所以说<code>defer</code>执行时还是有机会操作返回值的。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/32661f315d3295a02a4e806866efe2de_1739762143953.png\" alt=\"defer语句执行时机\"></p>\n<p>举个实际的例子进行说明这个过程：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">deferFuncReturn</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">result </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        result</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>该函数的<code>return</code>语句可以拆分成下面两行：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">result </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">return</span></span></code></pre></div><p>而延迟函数的执行正是在<code>return</code>之前，即加入<code>defer</code>后的执行过程如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">result </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">result</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">return</span></span></code></pre></div><p>所以上面函数实际返回<code>i++</code>值。</p>\n<p>关于主函数有不同的返回方式，但返回机制就如上机介绍所说，只要把<code>return</code>语句拆开都可以很好的理解，下面分别举例说明</p>\n<h6 id=\"7-10-3-2-主函数拥有匿名返回值，返回字面值\"><a href=\"#7-10-3-2-主函数拥有匿名返回值，返回字面值\" class=\"headerlink\" title=\"7.10.3.2 主函数拥有匿名返回值，返回字面值\"></a>7.10.3.2 主函数拥有匿名返回值，返回字面值</h6><p>一个主函数拥有一个匿名的返回值，返回时使用字面值，比如返回<code>”1”、”2”、”Hello”</code>这样的值，这种情况下<code>defer</code>语句是无法操作返回值的。</p>\n<p>一个返回字面值的函数，如下所示：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">foo</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        i</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>上面的<code>return</code>语句，直接把<code>1</code>写入栈中作为返回值，延迟函数无法操作该返回值，所以就无法影响返回值。</p>\n<h6 id=\"7-10-3-3-主函数拥有匿名返回值，返回变量\"><a href=\"#7-10-3-3-主函数拥有匿名返回值，返回变量\" class=\"headerlink\" title=\"7.10.3.3 主函数拥有匿名返回值，返回变量\"></a>7.10.3.3 主函数拥有匿名返回值，返回变量</h6><p>一个主函数拥有一个匿名的返回值，返回使用本地或全局变量，这种情况下defer语句可以引用到返回值，但不会改变返回值。</p>\n<p>一个返回本地变量的函数，如下所示：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">foo</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        i</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>上面的函数，返回一个局部变量，同时<code>defer</code>函数也会操作这个局部变量。对于匿名返回值来说，可以假定仍然有一个变量存储返回值，假定返回值变量为<code>anony</code>，上面的返回语句可以拆分成以下过程：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">anony </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">return</span></span></code></pre></div><p>由于i是整型，会将值拷贝给<code>anony</code>，所以<code>defer</code>语句中修改i值，对函数返回值不造成影响。</p>\n<h6 id=\"7-10-3-4-主函数拥有具名返回值\"><a href=\"#7-10-3-4-主函数拥有具名返回值\" class=\"headerlink\" title=\"7.10.3.4 主函数拥有具名返回值\"></a>7.10.3.4 主函数拥有具名返回值</h6><p>主函声明语句中带名字的返回值，会被初始化成一个局部变量，函数内部可以像使用局部变量一样使用该返回值。如果<code>defer</code>语句操作该返回值，可能会改变返回结果。</p>\n<p>一个影响函返回值的例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">foo</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ret </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        ret</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>上面的函数拆解出来，如下所示：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">ret </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ret</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">return</span></span></code></pre></div><p>函数真正返回前，在<code>defer</code>中对返回值做了<code>+1</code>操作，所以函数最终返回<code>1</code>。</p>\n<h4 id=\"7-11-异常处理\"><a href=\"#7-11-异常处理\" class=\"headerlink\" title=\"7.11 异常处理\"></a>7.11 异常处理</h4><p>Go语言没有<code>try catch</code>，它提倡返回<code>error</code>。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">errors</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">divide</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">error</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> errors</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">New</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">divide by zero</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\"> b</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> res</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">divide</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 函数调用方判断error是否为nil</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Error</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">res</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>Go语言定义了<code>error</code>这个接口，自定义的<code>erro</code>r要实现<code>Error()方法</code>。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">PathError</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 自定义error</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    path       </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    op         </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    createTime </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    message    </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err PathError</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Error</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// error接口要求实现Error() string方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">createTime </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">: </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">op </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">path </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">message</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"7-11-1-内置函数-panic-recove\"><a href=\"#7-11-1-内置函数-panic-recove\" class=\"headerlink\" title=\"7.11.1 内置函数 panic&#x2F;recove\"></a>7.11.1 内置函数 panic&#x2F;recove</h5><table>\n<thead>\n<tr>\n<th align=\"center\">内置函数</th>\n<th align=\"center\">介绍</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">close</td>\n<td align=\"center\">主要用来关闭 channel</td>\n</tr>\n<tr>\n<td align=\"center\">len</td>\n<td align=\"center\">用来求长度，比如 string、array、slice、map、channel</td>\n</tr>\n<tr>\n<td align=\"center\">new</td>\n<td align=\"center\">用来分配内存，主要用来分配值类型，比如 int、struct，返回的是指针</td>\n</tr>\n<tr>\n<td align=\"center\">make</td>\n<td align=\"center\">用来分配内存，主要用来分配引用类型，比如 chan、map、slice</td>\n</tr>\n<tr>\n<td align=\"center\">append</td>\n<td align=\"center\">用来追加元素到数组、slice 中</td>\n</tr>\n<tr>\n<td align=\"center\">panic 和 recover</td>\n<td align=\"center\">用来做错误处理</td>\n</tr>\n</tbody></table>\n<p>何时会发生<code>panic</code>:</p>\n<ul>\n<li>运行时错误会导致<code>panic</code>，比如数组越界、除0。</li>\n<li>程序主动调用<code>panic(error)</code>。</li>\n</ul>\n<p><code>panic</code>会执行什么：</p>\n<ol>\n<li>逆序执行当前<code>goroutine</code>的<code>defer</code>链（<code>recover</code>从这里介入）。</li>\n<li>打印错误信息和调用堆栈。</li>\n<li>调用<code>exit(2)</code>结束整个进程。</li>\n</ol>\n<h6 id=\"7-11-1-1-panic-recover-的基本使用\"><a href=\"#7-11-1-1-panic-recover-的基本使用\" class=\"headerlink\" title=\"7.11.1.1 panic&#x2F;recover 的基本使用\"></a>7.11.1.1 panic&#x2F;recover 的基本使用</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">funcA</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">func A</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">funcB</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">panic</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">panic in B</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">funcC</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">func C</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">funcA</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">funcB</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">funcC</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">func A</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">panic: panic in B</span></span>\n<span class=\"line\"><span style=\"color: #babed8\"></span></span>\n<span class=\"line\"><span style=\"color: #babed8\">goroutine 1 [running]:</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">main.funcB(...)</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">        D:/go_project/src/day1/main.go:10</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">main.main()</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">        D:/go_project/src/day1/main.go:19 +0x65</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">exit status 2</span></span></code></pre></div><p>程序运行期间<code>funcB</code>中引发了<code>panic</code>导致程序崩溃，异常退出了。这个时候我们就可以通过<code>recover</code>将程序恢复回来，继续往后执行。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">funcA</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">func A</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">funcB</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">recover</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">//如果程序出出现了 panic 错误,可以通过 recover 恢复过来</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">recover in B</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">panic</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">panic in B</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">funcC</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">func C</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">funcA</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">funcB</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">funcC</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">func A</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">recover in B</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">func C</span></span></code></pre></div><p>注意：</p>\n<ol>\n<li><code>recover()</code>必须搭配<code>defer</code>使用。</li>\n<li><code>defer</code>一定要在可能引发<code>panic</code>的语句之前定义。</li>\n</ol>\n<h6 id=\"7-11-1-2-defer-、recover-实现异常处理\"><a href=\"#7-11-1-2-defer-、recover-实现异常处理\" class=\"headerlink\" title=\"7.11.1.2 defer 、recover 实现异常处理\"></a>7.11.1.2 defer 、recover 实现异常处理</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fn2</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">recover</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">抛出异常给管理员发送邮件</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    num1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    num2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    res </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> num1 </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\"> num2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">res=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> res</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">fn2</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">抛出异常给管理员发送邮件</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">runtime error: integer divide by zero</span></span></code></pre></div><h6 id=\"7-11-1-3-defer-、panic、recover-抛出异常\"><a href=\"#7-11-1-3-defer-、panic、recover-抛出异常\" class=\"headerlink\" title=\"7.11.1.3 defer 、panic、recover 抛出异常\"></a>7.11.1.3 defer 、panic、recover 抛出异常</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">errors</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">readFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">fileName </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">error</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> fileName </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">main.go</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> errors</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">New</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">读取文件错误</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fn3</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">recover</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">抛出异常给管理员发送邮件</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">readFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">xxx.go</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">panic</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">继续执行</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">fn3</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">抛出异常给管理员发送邮件</span></span></code></pre></div><hr>\n<h3 id=\"模块八：面向对象\"><a href=\"#模块八：面向对象\" class=\"headerlink\" title=\"模块八：面向对象\"></a>模块八：面向对象</h3><h4 id=\"8-1-学习目标\"><a href=\"#8-1-学习目标\" class=\"headerlink\" title=\"8.1 学习目标\"></a>8.1 学习目标</h4><ol>\n<li>了解接口的定义，并熟练掌握及使用</li>\n<li>了解面向对象的思想</li>\n<li>学会使用面向对象的思想解决具体问题</li>\n<li>了解泛型的概念</li>\n</ol>\n<h4 id=\"8-2-接口\"><a href=\"#8-2-接口\" class=\"headerlink\" title=\"8.2 接口\"></a>8.2 接口</h4><h5 id=\"8-2-1-接口的介绍\"><a href=\"#8-2-1-接口的介绍\" class=\"headerlink\" title=\"8.2.1 接口的介绍\"></a>8.2.1 接口的介绍</h5><p>Golang中的接口是一种抽象数据类型，Golang中接口定义了对象的行为规范，只定义规范不实现。接口中定义的规范由具体的对象来实现。</p>\n<p>通俗的讲接口就一个标准，它是对一个对象的行为和规范进行约定，约定实现接口的对象必须得按照接口的规范。</p>\n<h5 id=\"8-2-2-接口的定义\"><a href=\"#8-2-2-接口的定义\" class=\"headerlink\" title=\"8.2.2 接口的定义\"></a>8.2.2 接口的定义</h5><p>在Golang中<code>接口（interface）</code>是一种类型，一种抽象的类型。<code>接口（interface）</code>是一组函数<code>method</code>的集合，Golang中的接口不能包含任何变量。</p>\n<p>在Golang中接口中的所有方法都没有方法体，接口定义了一个对象的行为规范，只定 义规范不实现。接口体现了程序设计的多态和高内聚低耦合的思想。</p>\n<p>Golang中的接口也是一种数据类型，不需要显示实现。只需要一个变量含有接口类型中的所有方法，那么这个变量就实现了这个接口。</p>\n<p>Golang中每个接口由数个方法组成，接口的定义格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">接口名</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">方法名1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">参数列表1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> 返回值列表1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">方法名2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">参数列表2</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> 返回值列表2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    …</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>其中：</p>\n<ul>\n<li><p>接口名：使用<code>type</code>将接口定义为自定义的类型名。Go语言的接口在命名时，一般会在单词后面添加<code>er</code>，如有写操作的接口叫<code>Writer</code>，有字符串功能的接口叫<code>Stringer</code>等。接口名最好要能突出该接口的类型含义。</p>\n</li>\n<li><p>方法名：当方法名首字母是大写且这个接口类型名首字母也是大写时，这个方法可以被接口所在的<code>包（package）</code>之外的代码访问。</p>\n</li>\n<li><p>参数列表、返回值列表：参数列表和返回值列表中的参数变量名可以省略。</p>\n</li>\n</ul>\n<p><strong>定义一个Usber接口让Phone和Camera结构体实现这个接口：</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Usber</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">Start</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">Stop</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Phone</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p Phone</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Start</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开始工作</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p Phone</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Stop</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">phone 停止</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Camera</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c Camera</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Start</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">相机 开始工作</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c Camera</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Stop</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">相机 停止工作</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    phone </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> Phone</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">小米手机</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> p Usber </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> phone </span><span style=\"color: #676E95; font-style: italic\">// phone 实现了 Usb 接口</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    p</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Start</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    camera </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> Camera</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> c Usber </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> camera </span><span style=\"color: #676E95; font-style: italic\">// camera 实现了 Usb 接口</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Start</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>Computer结构体中的Work方法必须传入一个Usb的接口：</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Usber</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">Start</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">Stop</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Phone</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p Phone</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Start</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开始工作</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">p Phone</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Stop</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">phone 停止</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Camera</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c Camera</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Start</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">相机 开始工作</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c Camera</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Stop</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">相机 停止工作</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 电脑的结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Computer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 电脑的 Work 方法要求必须传入 Usb 接口类型数据</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c Computer</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Work</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">usb Usber</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    usb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Start</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    usb</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Stop</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    phone </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> Phone</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">小米手机</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    camera </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> Camera</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    computer </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> Computer</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 把手机插入电脑的 Usb 接口开始工作</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    computer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Work</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">phone</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 把相机插入电脑的 Usb 接口开始工作</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    computer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Work</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">camera</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"8-2-3-空接口\"><a href=\"#8-2-3-空接口\" class=\"headerlink\" title=\"8.2.3 空接口\"></a>8.2.3 空接口</h5><p>Golang中的接口可以不定义任何方法，没有定义任何方法的接口就是空接口。空接口表示没有任何约束，因此任何类型变量都可以实现空接口。</p>\n<p>空接口在实际项目中用的是非常多的，用空接口可以表示任意数据类型。</p>\n<p><strong>空接口类型用<code>interface&#123;&#125;</code>表示，注意有<code>&#123;&#125;</code>。</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">interface&#123;&#125;</span></span></code></pre></div><p>举例：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 定义一个空接口 x, x 变量可以接收任意的数据类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">interface&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">你好 golang</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> s</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type:</span><span style=\"color: #F07178\">%T</span><span style=\"color: #C3E88D\"> value:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type:</span><span style=\"color: #F07178\">%T</span><span style=\"color: #C3E88D\"> value:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    b </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type:</span><span style=\"color: #F07178\">%T</span><span style=\"color: #C3E88D\"> value:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h6 id=\"8-2-3-1-空接口作为函数的参数\"><a href=\"#8-2-3-1-空接口作为函数的参数\" class=\"headerlink\" title=\"8.2.3.1 空接口作为函数的参数\"></a>8.2.3.1 空接口作为函数的参数</h6><p>使用空接口实现可以接收任意类型的函数参数</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 空接口作为函数参数</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">show</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a </span><span style=\"color: #89DDFF\">interface&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type:</span><span style=\"color: #F07178\">%T</span><span style=\"color: #C3E88D\"> value:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h6 id=\"8-2-3-2-map的值实现空接口\"><a href=\"#8-2-3-2-map的值实现空接口\" class=\"headerlink\" title=\"8.2.3.2 map的值实现空接口\"></a>8.2.3.2 map的值实现空接口</h6><p>使用空接口实现可以保存任意值的字典：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 空接口作为 map 值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> studentInfo </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">]interface&#123;&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    studentInfo</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    studentInfo</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">age</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    studentInfo</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">married</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">studentInfo</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h6 id=\"8-2-3-3-切片实现空接口\"><a href=\"#8-2-3-3-切片实现空接口\" class=\"headerlink\" title=\"8.2.3.3 切片实现空接口\"></a>8.2.3.3 切片实现空接口</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]interface&#123;&#125;&#123;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">张三</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">32.2</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">slice</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h5 id=\"8-2-4-类型断言\"><a href=\"#8-2-4-类型断言\" class=\"headerlink\" title=\"8.2.4 类型断言\"></a>8.2.4 类型断言</h5><p>一个接口的值（简称接口值）是由一个具体类型和具体类型的值两部分组成的。这两部分分别称为接口的动态类型和动态值。</p>\n<p>如果我们想要判断空接口中值的类型，那么这个时候就可以使用类型断言，其语法格式：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">.(</span><span style=\"color: #BABED8\">T</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span></span></code></pre></div><p>其中：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">    x：表示类型为interface&#123;&#125;的变量</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">    T：表示断言x可能是的类型。</span></span></code></pre></div><p>该语法返回两个参数，第一个参数是x转化为T类型后的变量，第二个值是一个布尔值，若为true则表示断言成功，为false则表示断言失败。</p>\n<p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">interface&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">pprof.cn</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    v</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">.(</span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">类型断言失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>上面的示例中如果要断言多次就需要写多个if判断，这个时候我们可以使用switch语句来实现：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">justifyType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #89DDFF\">interface&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> x</span><span style=\"color: #89DDFF\">.(</span><span style=\"color: #BABED8\">type</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">x is a string，value is </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">x is a int is </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">x is a bool is </span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">unsupport type！</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p><strong>因为空接口可以存储任意类型值的特点，所以空接口在Go语言中的使用十分广泛。</strong></p>\n<p>关于接口需要注意的是，只有当有两个或两个以上的具体类型必须以相同的方式进行处理时才需要定义接口。不要为了接口而写接口，那样只会增加不必要的抽象，导致不必要的运行时损耗。</p>\n<h5 id=\"8-2-5-值接收者和指针接收者实现接口的区别\"><a href=\"#8-2-5-值接收者和指针接收者实现接口的区别\" class=\"headerlink\" title=\"8.2.5 值接收者和指针接收者实现接口的区别\"></a>8.2.5 值接收者和指针接收者实现接口的区别</h5><p>使用值接收者实现接口和使用指针接收者实现接口有什么区别呢？接下来我们通过一个例子看一下其中的区别。</p>\n<p>我们有一个Mover接口和一个dog结构体。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Mover</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">dog</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct&#123;&#125;</span></span></code></pre></div><h6 id=\"8-2-5-1-值接收者实现接口\"><a href=\"#8-2-5-1-值接收者实现接口\" class=\"headerlink\" title=\"8.2.5.1 值接收者实现接口\"></a>8.2.5.1 值接收者实现接口</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">d dog</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">狗会动</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>此时实现接口的是dog类型：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> x Mover</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> wangcai </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> dog</span><span style=\"color: #89DDFF\">&#123;&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 旺财是dog类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> wangcai         </span><span style=\"color: #676E95; font-style: italic\">// x可以接收dog类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> fugui </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">dog</span><span style=\"color: #89DDFF\">&#123;&#125;</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 富贵是*dog类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> fugui           </span><span style=\"color: #676E95; font-style: italic\">// x可以接收*dog类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>从上面的代码中我们可以发现，使用值接收者实现接口之后，不管是dog结构体还是结构体指针<code>*dog</code>类型的变量都可以赋值给该接口变量。因为Go语言中有对指针类型变量求值的语法糖，dog指针fugui内部会自动求值<code>*fugui</code>。</p>\n<h6 id=\"8-2-5-2-指针接收者实现接口\"><a href=\"#8-2-5-2-指针接收者实现接口\" class=\"headerlink\" title=\"8.2.5.2 指针接收者实现接口\"></a>8.2.5.2 指针接收者实现接口</h6><p>同样的代码我们再来测试一下使用指针接收者有什么区别：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">d </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">dog</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">狗会动</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> x Mover</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">/*</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">        var wangcai = dog&#123;&#125; // 旺财是dog类型</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">        x = wangcai         // x不可以接收dog类型</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">    */</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> fugui </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">dog</span><span style=\"color: #89DDFF\">&#123;&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 富贵是*dog类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> fugui          </span><span style=\"color: #676E95; font-style: italic\">// x可以接收*dog类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>此时实现Mover接口的是<code>*dog</code>类型，所以不能给x传入dog类型的wangcai，此时x只能存储<code>*dog</code>类型的值。</p>\n<h5 id=\"8-2-6-类型与接口的关系\"><a href=\"#8-2-6-类型与接口的关系\" class=\"headerlink\" title=\"8.2.6 类型与接口的关系\"></a>8.2.6 类型与接口的关系</h5><h6 id=\"8-2-6-1-一个类型实现多个接口\"><a href=\"#8-2-6-1-一个类型实现多个接口\" class=\"headerlink\" title=\"8.2.6.1 一个类型实现多个接口\"></a>8.2.6.1 一个类型实现多个接口</h6><p>一个类型可以同时实现多个接口，而接口间彼此独立，不知道对方的实现。 例如，狗可以叫，也可以动。我们就分别定义Sayer接口和Mover接口，如下： Mover接口。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Sayer 接口</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Sayer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">say</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Mover 接口</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Mover</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>dog既可以实现Sayer接口，也可以实现Mover接口。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">dog</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 实现Sayer接口</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">d dog</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">say</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">会叫汪汪汪</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> d</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 实现Mover接口</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">d dog</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">会动</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> d</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> x Sayer</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> y Mover</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> dog</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">旺财</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> a</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    y </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> a</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">say</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    y</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h6 id=\"8-2-6-2-多个类型实现同一接口\"><a href=\"#8-2-6-2-多个类型实现同一接口\" class=\"headerlink\" title=\"8.2.6.2 多个类型实现同一接口\"></a>8.2.6.2 多个类型实现同一接口</h6><p>Go语言中不同的类型还可以实现同一接口首先我们定义一个Mover接口，它要求必须由一个move方法。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Mover 接口</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Mover</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>例如狗可以动，汽车也可以动，可以使用如下代码实现这个关系：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">dog</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">car</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    brand </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// dog类型实现Mover接口</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">d dog</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">会跑</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> d</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// car类型实现Mover接口</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c car</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\">速度70迈</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">brand</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>这个时候我们在代码中就可以把狗和汽车当成一个会动的物体来处理了，不再需要关注它们具体是什么，只需要调用它们的move方法就可以了。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> x Mover</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> dog</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">旺财</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> car</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">brand</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">保时捷</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> a</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>上面的代码执行结果如下：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">旺财会跑</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">保时捷速度70迈</span></span></code></pre></div><p>并且一个接口的方法，不一定需要由一个类型完全实现，接口的方法可以通过在类型中嵌入其他类型或者结构体来实现。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// WashingMachine 洗衣机</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">WashingMachine</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">wash</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">dry</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 甩干器</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">dryer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct&#123;&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 实现WashingMachine接口的dry()方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">d dryer</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">dry</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">甩一甩</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 海尔洗衣机</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">haier</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    dryer </span><span style=\"color: #676E95; font-style: italic\">//嵌入甩干器</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 实现WashingMachine接口的wash()方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">h haier</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">wash</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">洗刷刷</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"8-2-7-接口嵌套\"><a href=\"#8-2-7-接口嵌套\" class=\"headerlink\" title=\"8.2.7 接口嵌套\"></a>8.2.7 接口嵌套</h5><p>接口与接口间可以通过嵌套创造出新的接口：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Sayer 接口</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Sayer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">say</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Mover 接口</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Mover</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 接口嵌套</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">animal</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Sayer</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Mover</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>嵌套得到的接口的使用与普通接口一样，这里我们让cat实现animal接口：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">cat</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c cat</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">say</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">喵喵喵</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c cat</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">猫会动</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> x animal</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> cat</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">花花</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">move</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    x</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">say</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"8-3-面向对象\"><a href=\"#8-3-面向对象\" class=\"headerlink\" title=\"8.3 面向对象\"></a>8.3 面向对象</h4><h5 id=\"8-3-1-面向对象的概念\"><a href=\"#8-3-1-面向对象的概念\" class=\"headerlink\" title=\"8.3.1 面向对象的概念\"></a>8.3.1 面向对象的概念</h5><p>洗衣服过程剖析：</p>\n<ol>\n<li>给洗衣机里加脏衣服和洗衣粉。</li>\n<li>启动洗衣机。</li>\n<li>洗衣机自动注水，然后滚动。</li>\n<li>脏衣服从黑颜色变成白颜色。</li>\n<li>洗衣机自动停止。</li>\n</ol>\n<p>用面向过程的思想实现代码：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 准备洗衣服</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 输入参数：</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// powder 洗衣机里放多少洗衣粉</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// closes 洗衣机里放多少衣服</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// clean 衣服是否是干净的</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 返回值：</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 洗衣机是否开启</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 准备洗多少衣服</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">prepare</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">powder </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> clean </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> powder </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">||</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">||</span><span style=\"color: #BABED8\"> clean </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true,</span><span style=\"color: #BABED8\"> closes</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 开始洗衣服</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 输入参数：</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// washer_state 洗衣机是否开启</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// closes 准备洗多少衣服</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 返回值：</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 衣服是否是干净的</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 洗了多少衣服</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 洗衣机是否开启</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">wash</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">washer_state </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> washer_state </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">注水</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">滚动</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">关机</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true,</span><span style=\"color: #BABED8\"> closes</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 检查最终状态</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 输入参数：</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// clean 衣服是否是干净的</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// closes 洗了多少衣服</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// washer_state 洗衣机是否开启</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">check</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">clean </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> washer_state </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> clean </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">洗干净了</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">件衣服</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> washer_state </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">你忘关洗衣机了</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">洗衣失败</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 整个洗衣服的过程</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">WashProcedure</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">powder</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    washer_state </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    clean </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    washer_state</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">prepare</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">powder</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> clean</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    clean</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> washer_state </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">wash</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">washer_state</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">check</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">clean</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> washer_state</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>面向过程编程整个过程分为若干步，每一步对应一个函数，函数之间要传递大量的参数。<br>面向对象编程把大量参数封装到一个结构体里面，给结构体赋予方法，方法里面去修改结构体的成员变量。Go语言面向对象的好处：打包参数，继承，面向接口编程。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 洗衣机</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Washer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    State  </span><span style=\"color: #C792EA\">bool</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Powder </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 衣服</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Closes</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Clean </span><span style=\"color: #C792EA\">bool</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">washer </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Washer</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">prepare</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">closes </span><span style=\"color: #89DDFF\">[]*</span><span style=\"color: #BABED8\">Closes</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">error</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> washer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">State </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">||</span><span style=\"color: #BABED8\"> washer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Powder </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">||</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">closes</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> errors</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">New</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">请确保在关机的状态下加入适量衣物和洗衣粉</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">washer </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Washer</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">wash</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">closes </span><span style=\"color: #89DDFF\">[]*</span><span style=\"color: #BABED8\">Closes</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">error</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> washer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">prepare</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">closes</span><span style=\"color: #89DDFF\">);</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> err</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">开机</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    washer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">State </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 检查是否有脏衣服</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    clean </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> ele</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Clean </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            clean </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">break</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> clean </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        washer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">State </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> errors</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">New</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">所有衣服都是干净的，不需要洗</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 开始洗衣服</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">注水</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">滚动</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">关机</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    washer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">State </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ele </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        ele</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Clean </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">washer </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Washer</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">check</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err </span><span style=\"color: #C792EA\">error</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> closes </span><span style=\"color: #89DDFF\">[]*</span><span style=\"color: #BABED8\">Closes</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">洗衣失败:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">洗干净了</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\">件衣服</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">closes</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> washer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">State </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">你忘关洗衣机了</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"8-3-2-构造函数\"><a href=\"#8-3-2-构造函数\" class=\"headerlink\" title=\"8.3.2 构造函数\"></a>8.3.2 构造函数</h5><p>定义User结构体：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// &quot;&quot;表示未知</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Age  </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// -1表示未知</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Sex  </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #BABED8\">   </span><span style=\"color: #676E95; font-style: italic\">// 1男，2女，3未知</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><ul>\n<li><code>u := User&#123;&#125;</code>构造一个空的User，各字段都取相应数据类型的<code>默认值</code>。</li>\n<li><code>up := new(User)</code>构造一个空的User，并返回其<code>指针</code>。</li>\n</ul>\n<p>自定义构造函数：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">NewDefaultUser</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">User </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Sex</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">NewUser</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sex </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">User </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> name</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  age</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Sex</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  sex</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>单例模式，确保在并发的情况下，整个进程里只会创建struct的一个实例：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sUser </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">User</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    uOnce sync</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Once</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">GetUserInstance</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">User </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    uOnce</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Do</span><span style=\"color: #89DDFF\">(func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 确保即使在并发的情况下，下面的3行代码在整个go进程里只会被执行一次</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> sUser </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            sUser </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">NewDefaultUser</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> sUser</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 调用GetUserInstance()得到的是同一个User实例</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    su1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">GetUserInstance</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    su2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">GetUserInstance</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 修改su1会影响su2s</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">su1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> su2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    su1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    su1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Age </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    su1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Sex </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">su1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> su2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>输出结果：</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">&amp;&#123; -1 3&#125; &amp;&#123; -1 3&#125;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">&amp;&#123;绝迹之春 18 1&#125; &amp;&#123;绝迹之春 18 1&#125;</span></span></code></pre></div><h5 id=\"8-3-3-继承与重写\"><a href=\"#8-3-3-继承与重写\" class=\"headerlink\" title=\"8.3.3 继承与重写\"></a>8.3.3 继承与重写</h5><p>通过嵌入匿名结构体，变相实现“继承”的功能，因为访问匿名成员时可以跳过成员名直接访问它的内部成员：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Plane</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    color </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Bird</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Plane</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">bird </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> Bird</span><span style=\"color: #89DDFF\">&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">bird</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Plane</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">color</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">bird</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">color</span></span></code></pre></div><p>重写：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">plane Plane</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fly</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">500</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 重写父类(Plane)的fly方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">bird Bird</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fly</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> bird</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Plane</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">fly</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 调用父类的方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>正规来讲，Go语言并不支持继承，它只是支持组合。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Plane</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct&#123;&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Car</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct&#123;&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// Bird组合了Plane和Car的功能</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Bird</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Plane</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Car</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"8-4-泛型\"><a href=\"#8-4-泛型\" class=\"headerlink\" title=\"8.4 泛型\"></a>8.4 泛型</h4><p>在有泛型之前，同样的功能需要为不同的参数类型单独实现一个函数。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add4int</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add4float32</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">add4string</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>使用泛型</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Addable</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">interface</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int8</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int16</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">uint</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uint8</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uint16</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uint32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uint64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uintptr</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">float64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">complex64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">complex128</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> add</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">T Addable</span><span style=\"color: #89DDFF\">](</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b T</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> T </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>Golang泛型在go 1.18正式发布，同时语法也变更成如上格式。</p>\n<p>此外在go1.17中泛型默认没有开启，如果想用需要加<code>-gcflags=-G=3</code>，或者设置环境变量<code>export GOFLAGS=&quot;-gcflags=-G=3&quot;</code></p>\n<p>（这里就不做多详细介绍，因为就目前而言下载的go最新版本已经是1.21了，不需要配置环境变量）。</p>\n<hr>\n<h3 id=\"模块九：反射\"><a href=\"#模块九：反射\" class=\"headerlink\" title=\"模块九：反射\"></a>模块九：反射</h3><h4 id=\"9-1-学习目标\"><a href=\"#9-1-学习目标\" class=\"headerlink\" title=\"9.1 学习目标\"></a>9.1 学习目标</h4><ol>\n<li>了解什么是反射</li>\n<li>熟练掌握并使用reflect.TypeOf()和reflect.ValueOf()实现反射</li>\n<li>了解如何用反射调用函数或成员方法</li>\n<li>了解用反射实现创建对象</li>\n</ol>\n<h4 id=\"9-2-反射介绍\"><a href=\"#9-2-反射介绍\" class=\"headerlink\" title=\"9.2 反射介绍\"></a>9.2 反射介绍</h4><p>反射就是在运行期间（不是编译期间）探知对象的类型信息和内存结构、更新变量、调用它们的方法。<br>反射的使用场景：</p>\n<ul>\n<li><p>函数的参数类型是<code>interface&#123;&#125;</code>，需要在运行时对原始类型进行判断，针对不同的类型采取不同的处理方式。比如<code>json.Marshal(v interface&#123;&#125;)</code>。</p>\n</li>\n<li><p>在运行时根据某些条件动态决定调用哪个函数，比如根据配置文件执行相应的算子函数。</p>\n</li>\n</ul>\n<p>Go标准库里的<code>json序列化</code>就使用了反射。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Age </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Sex </span><span style=\"color: #C792EA\">byte</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;gender&quot;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">user </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Sex</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">json</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Marshal</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">//返回 &#123;&quot;Name&quot;:&quot;绝迹之春&quot;,&quot;Age&quot;:18,&quot;gender&quot;:1&#125;</span></span></code></pre></div><p>Go语言中的变量是分为两部分的：</p>\n<ul>\n<li><p>类型信息：预先定义好的元信息。</p>\n</li>\n<li><p>值信息：程序运行过程中可动态变化的。</p>\n</li>\n</ul>\n<p>在GoLang的反射机制中，任何接口值都由是一个具体类型和具体类型的值两部分组成的。</p>\n<p>在GoLang中，反射的相关功能由内置的<code>reflect包</code>提供，任意接口值在反射中都可以理解为由<code>reflect.Type</code>和<code>reflect.Value</code>两部分组成，并且<code>reflect包</code>提供了<code>reflect.TypeOf()</code>和<code>reflect.ValueOf()</code>两个重要函数来获取任意对象的<code>Value</code>和<code>Type</code>。</p>\n<p>反射的弊端：</p>\n<ul>\n<li>代码难以阅读，难以维护。</li>\n<li>编译期间不能发现类型错误，覆盖测试难度很大，有些bug需要到线上运行很长时间才能发现，可能会造成严重用后果。</li>\n<li>反射性能很差，通常比正常代码慢一到两个数量级。在对性能要求很高，或大量反复调用的代码块里建议不要使用反射。</li>\n</ul>\n<h4 id=\"9-3-反射的基础数据类型\"><a href=\"#9-3-反射的基础数据类型\" class=\"headerlink\" title=\"9.3 反射的基础数据类型\"></a>9.3 反射的基础数据类型</h4><p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/2bcf918804a568653097b21465cd0ecc_1739762143953.png\" alt=\"reflect\"></p>\n<h4 id=\"9-4-reflect-TypeOf\"><a href=\"#9-4-reflect-TypeOf\" class=\"headerlink\" title=\"9.4 reflect.TypeOf()\"></a>9.4 reflect.TypeOf()</h4><p>在 Go语言中，使用<code>reflect.TypeOf()</code>函数可以接受任意<code>interface&#123;&#125;</code>参数，可以获得任意值的<code>类型对象（reflect.Type）</code>，程序通过类型对象可以访问任意值的类型信息。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #89DDFF\">interface&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">TypeOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">12.5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// type:float32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">b</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// type:int64</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"9-4-1-type-Name和type-Kind\"><a href=\"#9-4-1-type-Name和type-Kind\" class=\"headerlink\" title=\"9.4.1 type Name和type Kind\"></a>9.4.1 type Name和type Kind</h5><p>在反射中关于类型还划分为两种：<code>类型（Type）</code>和<code>种类（Kind）</code>。因为在 Go 语言中我们可以使用<code>type</code>关键字构造很多自定义类型，而<code>种类（Kind）</code>就是指底层的类型，但在反射中，当需要区分指针、结构体等大品种的类型时，就会用到<code>种类（Kind）</code>。 举个例子，我们定义了两个指针类型和两个结构体类型，通过反射查看它们的类型和种类。</p>\n<p>Go 语言的反射中像数组、切片、Map、指针等类型的变量，它们的<code>.Name()</code>都是返回空。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #89DDFF\">interface&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    t </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">TypeOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">TypeOf:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\"> Name:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\"> Kind:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Name</span><span style=\"color: #89DDFF\">(),</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Kind</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">myInt</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int64</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Person</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Age  </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Animal</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b myInt    </span><span style=\"color: #676E95; font-style: italic\">// 自定义类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #C792EA\">rune</span><span style=\"color: #BABED8\">     </span><span style=\"color: #676E95; font-style: italic\">// 类型别名</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// TypeOf:*float32 Name: Kind:ptr</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">b</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// TypeOf:main.myInt Name:myInt Kind:int64</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// TypeOf:int32 Name:int32 Kind:int32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> d </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> Person</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> e </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> Animal</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">小花</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">d</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// TypeOf:main.Person Name:Person Kind:struct</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">e</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// TypeOf:main.Animal Name:Animal Kind:struct</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> f </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectType</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">f</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// TypeOf:[]int Name: Kind:slice</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"9-4-2-reflect包中定义的Kind类型\"><a href=\"#9-4-2-reflect包中定义的Kind类型\" class=\"headerlink\" title=\"9.4.2 reflect包中定义的Kind类型\"></a>9.4.2 reflect包中定义的Kind类型</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Kind</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">uint</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">const</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Invalid       Kind </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">iota</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 非法类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Bool                      </span><span style=\"color: #676E95; font-style: italic\">// 布尔型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Int                       </span><span style=\"color: #676E95; font-style: italic\">// 有符号整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Int8                      </span><span style=\"color: #676E95; font-style: italic\">// 有符号 8 位整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Int16                     </span><span style=\"color: #676E95; font-style: italic\">// 有符号 16 位整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Int32                     </span><span style=\"color: #676E95; font-style: italic\">// 有符号 32 位整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Int64                     </span><span style=\"color: #676E95; font-style: italic\">// 有符号 64 位整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Uint                      </span><span style=\"color: #676E95; font-style: italic\">// 无符号整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Uint8                     </span><span style=\"color: #676E95; font-style: italic\">// 无符号 8 位整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Uint16                    </span><span style=\"color: #676E95; font-style: italic\">// 无符号 16 位整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Uint32                    </span><span style=\"color: #676E95; font-style: italic\">// 无符号 32 位整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Uint64                    </span><span style=\"color: #676E95; font-style: italic\">// 无符号 64 位整型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Uintptr                   </span><span style=\"color: #676E95; font-style: italic\">// 指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Float32                   </span><span style=\"color: #676E95; font-style: italic\">// 单精度浮点数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Float64                   </span><span style=\"color: #676E95; font-style: italic\">// 双精度浮点数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Complex64                 </span><span style=\"color: #676E95; font-style: italic\">// 64 位复数类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Complex128                </span><span style=\"color: #676E95; font-style: italic\">// 128 位复数类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Array                     </span><span style=\"color: #676E95; font-style: italic\">// 数组</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Chan                      </span><span style=\"color: #676E95; font-style: italic\">// 通道</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Func                      </span><span style=\"color: #676E95; font-style: italic\">// 函数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Interface                 </span><span style=\"color: #676E95; font-style: italic\">// 接口</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Map                       </span><span style=\"color: #676E95; font-style: italic\">// 映射</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Ptr                       </span><span style=\"color: #676E95; font-style: italic\">// 指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Slice                     </span><span style=\"color: #676E95; font-style: italic\">// 切片</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    String                    </span><span style=\"color: #676E95; font-style: italic\">// 字符串</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Struct                    </span><span style=\"color: #676E95; font-style: italic\">// 结构体</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    UnsafePointer             </span><span style=\"color: #676E95; font-style: italic\">// 底层指针</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h4 id=\"9-5-reflect-ValueOf\"><a href=\"#9-5-reflect-ValueOf\" class=\"headerlink\" title=\"9.5 reflect.ValueOf()\"></a>9.5 reflect.ValueOf()</h4><p><code>reflect.ValueOf()</code>返回的是<code>reflect.Value</code>类型，其中包含了原始值的值信息。<code>reflect.Value</code>与<code>原始值</code>之间可以互相转换。</p>\n<p><code>reflect.Value</code>类型提供的获取原始值的方法如下：</p>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Interface() interface {}</td>\n<td>将值以 interface{} 类型返回，可以通过类型断言转换为指定类型</td>\n</tr>\n<tr>\n<td>Int() int64</td>\n<td>将值以 int 类型返回，所有有符号整型均可以此方式返回</td>\n</tr>\n<tr>\n<td>Uint() uint64</td>\n<td>将值以 uint 类型返回，所有无符号整型均可以此方式返回</td>\n</tr>\n<tr>\n<td>Float() float64</td>\n<td>将值以双精度（float64）类型返回，所有浮点数（float32、float64）均可以此方式返回</td>\n</tr>\n<tr>\n<td>Bool() bool</td>\n<td>将值以 bool 类型返回</td>\n</tr>\n<tr>\n<td>Bytes() []bytes</td>\n<td>将值以字节数组 []bytes 类型返回</td>\n</tr>\n<tr>\n<td>String() string</td>\n<td>将值以字符串类型返回</td>\n</tr>\n<tr>\n<td>…</td>\n<td></td>\n</tr>\n</tbody></table>\n<h5 id=\"9-5-1-通过反射获取原始值演示1\"><a href=\"#9-5-1-通过反射获取原始值演示1\" class=\"headerlink\" title=\"9.5.1 通过反射获取原始值演示1\"></a>9.5.1 通过反射获取原始值演示1</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">reflectValue</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #89DDFF\">interface&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> c </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Int</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">6</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 获取反射的原始值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectValue</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"9-5-2-通过反射获取原始值演示2\"><a href=\"#9-5-2-通过反射获取原始值演示2\" class=\"headerlink\" title=\"9.5.2 通过反射获取原始值演示2\"></a>9.5.2 通过反射获取原始值演示2</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">reflectValue</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x </span><span style=\"color: #89DDFF\">interface&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    k </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Kind</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">switch</span><span style=\"color: #BABED8\"> k </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Int64</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// v.Int()从反射中获取整型的原始值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type is int64, value is </span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Int</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Float32</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// v.Float()从反射中获取浮点型的原始值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type is float32, value is </span><span style=\"color: #F07178\">%f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Float</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Float64</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// v.Float()从反射中获取浮点型的原始值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type is float64, value is </span><span style=\"color: #F07178\">%f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Float</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3.14</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectValue</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// type is float32, value is 3.140000</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectValue</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">b</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// type is int64, value is 100</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 将int类型的原始值转换为reflect.Value类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    c </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">type c :</span><span style=\"color: #F07178\">%T</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// type c :reflect.Value</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"9-5-3-通过反射设置变量的值\"><a href=\"#9-5-3-通过反射设置变量的值\" class=\"headerlink\" title=\"9.5.3 通过反射设置变量的值\"></a>9.5.3 通过反射设置变量的值</h5><h6 id=\"9-5-3-1-通过Value修改原始数据的值\"><a href=\"#9-5-3-1-通过Value修改原始数据的值\" class=\"headerlink\" title=\"9.5.3.1 通过Value修改原始数据的值\"></a>9.5.3.1 通过Value修改原始数据的值</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Id     </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Weight </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Height </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> s </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">hello</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #F78C6C\">749</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Weight</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">60.5</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1.70</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    valueI </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 由于Go语言所有函数传的都是值，所以要想修改原来的值就需要传指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    valueS </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    valueUser </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    valueI</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">SetInt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 由于valueI对应的原始对象是指针，通过Elem()返回指针指向的对象</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    valueS</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">SetString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">golang</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    valueUser</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">FieldByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Weight</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">SetFloat</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">61.0</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// FieldByName()通过Name返回类的成员变量</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// golang</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// &#123;749 绝迹之春 61 1.7&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>强调一下，要想修改原始数据的值，给<code>reflect.ValueOf()</code>传的必须是指针，而指针<code>Value</code>不能调用<code>Set和FieldByName方法</code>，所以得先通过<code>Elem()</code>转为非指针<code>Value</code>。<br>未导出成员的值不能通过反射进行修改。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">addrValue </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> valueUser</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">FieldByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">addr</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> addrValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">CanSet</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    addrValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">SetString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">芜湖</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">addr是未导出成员，不可Set</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 以小写字母开头的成员相当于是私有成员</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h6 id=\"9-5-3-2-通过Value修改Slice\"><a href=\"#9-5-3-2-通过Value修改Slice\" class=\"headerlink\" title=\"9.5.3.2 通过Value修改Slice\"></a>9.5.3.2 通过Value修改Slice</h6><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Id     </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Weight </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Height </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    users </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]*</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// len=1，cap=5</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    users</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #F78C6C\">749</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Weight</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">60.5</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1.70</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sliceValue </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">users</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 准备通过Value修改users，所以传users的地址</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> sliceValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Len</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\">      </span><span style=\"color: #676E95; font-style: italic\">// 取得slice的长度</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        sliceValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Index</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">FieldByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">SetString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">憨批</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">1st user name change to </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> users</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">].</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>甚至可以修改<code>slice</code>的<code>cap</code>，新的<code>cap</code>必须位于原始的<code>len</code>到<code>cap</code>之间，即只能把<code>cap</code>改小。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">sliceValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">SetCap</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>通过把<code>len</code>改大，可以实现向<code>slice</code>中追加元素的功能。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">sliceValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">SetLen</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 调用reflect.Value的Set()函数修改其底层指向的原始数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">sliceValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Index</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">Set</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #F78C6C\">750</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">张三</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Weight</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">80</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">180</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">2nd user name </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> users</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">].</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h6 id=\"9-5-3-3-通过Value修改map\"><a href=\"#9-5-3-3-通过Value修改map\" class=\"headerlink\" title=\"9.5.3.3 通过Value修改map\"></a>9.5.3.3 通过Value修改map</h6><p><code>Value.SetMapIndex()函数</code>：往<code>map</code>里添加一个<code>key-value对</code>。</p>\n<p><code>Value.MapIndex()函数</code>： 根据<code>Key</code>取出对应的<code>map</code>。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Id     </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Weight </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Height </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    u1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #F78C6C\">749</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Weight</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">60.5</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1.70</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    u2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #F78C6C\">750</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Weight</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">60.5</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1.70</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    userMap </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(map[</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">]*</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    userMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">u1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Id</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> u1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapValue </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">userMap</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">                                                       </span><span style=\"color: #676E95; font-style: italic\">// 准备通过Value修改userMap，所以传userMap的地址</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">SetMapIndex</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">u2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Id</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">u2</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">                    </span><span style=\"color: #676E95; font-style: italic\">// SetMapIndex 往map里添加一个key-value对</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">MapIndex</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">u1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Id</span><span style=\"color: #89DDFF\">)).</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">FieldByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">SetString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">憨批</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// MapIndex 根据Key取出对应的map</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> k</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> userMap </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">key </span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> name </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> k</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"9-6-结构体反射\"><a href=\"#9-6-结构体反射\" class=\"headerlink\" title=\"9.6 结构体反射\"></a>9.6 结构体反射</h4><h5 id=\"9-6-1-与结构体相关的方法\"><a href=\"#9-6-1-与结构体相关的方法\" class=\"headerlink\" title=\"9.6.1 与结构体相关的方法\"></a>9.6.1 与结构体相关的方法</h5><p>任意值通过<code>reflect.TypeOf()</code>获得反射对象信息后，如果它的类型是结构体，可以通过<code>反射值对象（reflect.Type）</code>的 <code>NumField()和 Field()方法</code>获得结构体成员的详细信息。</p>\n<p><code>reflect.Type</code>中与获取结构体成员相关的的方法如下表所示。</p>\n<table>\n<thead>\n<tr>\n<th>方法</th>\n<th>说明</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Field(i int) StructField</td>\n<td>根据索引，返回索引对应的结构体字段的信息。</td>\n</tr>\n<tr>\n<td>NumField() int</td>\n<td>返回结构体成员字段数量。</td>\n</tr>\n<tr>\n<td>FieldByName(name string) (StructField, bool)</td>\n<td>根据给定字符串返回字符串对应的结构体字段的信息。</td>\n</tr>\n<tr>\n<td>FieldByIndex(index []int) StructField</td>\n<td>多层成员访问时，根据 []int 提供的每个结构体的字段索引，返回字段的信息。</td>\n</tr>\n<tr>\n<td>FieldByNameFunc(match func(string) bool) (StructField,bool)</td>\n<td>根据传入的匹配函数匹配需要的字段。</td>\n</tr>\n<tr>\n<td>NumMethod() int</td>\n<td>返回该类型的方法集中方法的数目</td>\n</tr>\n<tr>\n<td>Method(int) Method</td>\n<td>返回该类型方法集中的第 i 个方法</td>\n</tr>\n<tr>\n<td>MethodByName(string)(Method, bool)</td>\n<td>根据方法名返回该类型方法集中的方法</td>\n</tr>\n</tbody></table>\n<h5 id=\"9-6-2-StructField类型\"><a href=\"#9-6-2-StructField类型\" class=\"headerlink\" title=\"9.6.2 StructField类型\"></a>9.6.2 StructField类型</h5><p><code>StructField</code>类型用来描述结构体中的一个字段的信息。<code>StructField</code>的定义如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">StructField</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 参见http://golang.org/ref/spec#Uniqueness_of_identifiers</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name      </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// Name 是字段的名字</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    PkgPath   </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//PkgPath 是非导出字段的包路径，对导出字段该字段为&quot;&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Type      Type      </span><span style=\"color: #676E95; font-style: italic\">// 字段的类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Tag       StructTag </span><span style=\"color: #676E95; font-style: italic\">// 字段的标签</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Offset    </span><span style=\"color: #C792EA\">uintptr</span><span style=\"color: #BABED8\">   </span><span style=\"color: #676E95; font-style: italic\">// 字段在结构体中的字节偏移量</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Index     </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">     </span><span style=\"color: #676E95; font-style: italic\">// 用于Type.FieldByIndex 时的索引切片</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Anonymous </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #BABED8\">      </span><span style=\"color: #676E95; font-style: italic\">// 是否匿名字段</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"9-6-3-结构体反射示例\"><a href=\"#9-6-3-结构体反射示例\" class=\"headerlink\" title=\"9.6.3 结构体反射示例\"></a>9.6.3 结构体反射示例</h5><p>当我们使用反射得到一个结构体数据之后可以通过索引依次获取其字段信息，也可以通过字段名去获取指定的字段信息。</p>\n<ol>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">获取结构体属性，获取执行结构体方法</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// student结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Student</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name  </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;name&quot;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Age   </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;age&quot;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Score </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;score&quot;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s Student</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">GetInfo</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> str </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sprintf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">姓名:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\"> 年龄:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\"> 成绩:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Age</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Score</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">str</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> str</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Student</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">SetInfo</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> age </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> score </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> name</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Age </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> age</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Score </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> score</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">Student</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Print</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">打印方法...</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 打印字段</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">PrintStructField</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">interface&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    t </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">TypeOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// v := reflect.ValueOf(s)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// kind := t.Kind()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Kind</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Struct </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Kind</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Struct </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">传入的不是结构体</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 1、通过类型变量里面的Field可以获取结构体的字段</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    field0 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Field</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">field0</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">field0</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Type</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">field0</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Tag</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Get</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">json</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 2、通过类型变量里面的FieldByName可以获取结构体的字段</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    field1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _ </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">FieldByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Age</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">field1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">field1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Type</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">field1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Tag</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Get</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">json</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 3、获取到该结构体有几个字段</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    num </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">NumField</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">字段数量:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">PrintStructFn</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">interface&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    t </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">TypeOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Kind</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Struct </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Kind</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Struct </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">传入的不是结构体</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 1、通过类型变量里面的Method可以获取结构体的方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> tMethod </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Method</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 注意</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">tMethod</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">tMethod</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Type</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 2、通过类型变量获取这个结构体有多少个方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">NumMethod</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 3、执行方法（注意需要使用值变量，并且要注意参数）</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// v.Method(0).Call(nil)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MethodByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Print</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">Call</span><span style=\"color: #89DDFF\">(nil)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 4、执行方法传入参数（注意需要使用值变量，并且要注意参数）</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> params </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Value </span><span style=\"color: #676E95; font-style: italic\">// 声明了[]reflect.Value</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    params </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">params</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">张三</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    params </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">params</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">22</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    params </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">params</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MethodByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">SetInfo</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">Call</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">params</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 传入的参数是[]reflect.Value, 返回[]reflect.Value</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 5、执行方法获取方法的值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    info </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MethodByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">GetInfo</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">Call</span><span style=\"color: #89DDFF\">(nil)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">info</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    stu1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> Student</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Score</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">98</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// PrintStructField(stu1)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">PrintStructFn</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">stu1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><ol start=\"2\">\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">修改结构体方法</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// student结构体</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">Student</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name  </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;name&quot;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Age   </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;age&quot;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Score </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">`</span><span style=\"color: #C3E88D\">json:&quot;score&quot;</span><span style=\"color: #89DDFF\">`</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s Student</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">GetInfo</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> str </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sprintf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">姓名:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\"> 年龄:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #C3E88D\"> 成绩:</span><span style=\"color: #F07178\">%v</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Age</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> s</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Score</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> str</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 反射修改结构体属性</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">reflectChangeStruct</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s </span><span style=\"color: #89DDFF\">interface&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    t </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">TypeOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> t</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Kind</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Struct </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">传入的不是结构体指针类型</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">FieldByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    name</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">SetString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">李四</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 设置值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">FieldByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Age</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    age</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">SetInt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 设置值</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    stu1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> Student</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">  </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Age</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #F78C6C\">18</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Score</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">98</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// PrintStructField(stu1)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">reflectChangeStruct</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">stu1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">stu1</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">GetInfo</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"9-7-调用函数、成员方法\"><a href=\"#9-7-调用函数、成员方法\" class=\"headerlink\" title=\"9.7 调用函数、成员方法\"></a>9.7 调用函数、成员方法</h4><h5 id=\"9-7-1-调用函数\"><a href=\"#9-7-1-调用函数\" class=\"headerlink\" title=\"9.7.1 调用函数\"></a>9.7.1 调用函数</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> b </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> b</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    valueFunc </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">Add</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 函数也是一种数据类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    typeFunc </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">TypeOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">Add</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    argNum </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> typeFunc</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">NumIn</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\">// 函数输入参数的个数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    args </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #BABED8\">reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Value</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> argNum</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 准备函数的输入参数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> argNum</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> typeFunc</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">In</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">Kind</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Int </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            args</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 给每一个参数都赋3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sumValue </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> valueFunc</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Call</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">args</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 返回[]reflect.Value，因为Go语言的函数返回可能是一个列表</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> typeFunc</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Out</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">Kind</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Int </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        sum </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> sumValue</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">].</span><span style=\"color: #82AAFF\">Interface</span><span style=\"color: #89DDFF\">().(</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 从Value转为原始数据类型</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">sum=</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> sum</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"9-7-2-调用成员方法\"><a href=\"#9-7-2-调用成员方法\" class=\"headerlink\" title=\"9.7.2 调用成员方法\"></a>9.7.2 调用成员方法</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Id     </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Weight </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Height </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">BMI</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">float32</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Weight </span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Height </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Height</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">_ User</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Think</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">hi, do you know my name?</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #F78C6C\">749</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Weight</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">60.5</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1.70</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    valueUser </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(&amp;</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">              </span><span style=\"color: #676E95; font-style: italic\">// 必须传指针，因为BMI()在定义的时候它是指针的方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    bmiMethod </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> valueUser</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MethodByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">BMI</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\">       </span><span style=\"color: #676E95; font-style: italic\">// MethodByName()通过Name返回类的成员变量</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    resultValue </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> bmiMethod</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Call</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #BABED8\">reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Value</span><span style=\"color: #89DDFF\">&#123;&#125;)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 无参数时传一个空的切片</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    result </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> resultValue</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">].</span><span style=\"color: #82AAFF\">Interface</span><span style=\"color: #89DDFF\">().(</span><span style=\"color: #C792EA\">float32</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">bmi=</span><span style=\"color: #F07178\">%.2f</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> result</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// Think()在定义的时候用的不是指针，valueUser可以用指针也可以不用指针</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    thinkMethod </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> valueUser</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MethodByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Think</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    thinkMethod</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Call</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #BABED8\">reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Value</span><span style=\"color: #89DDFF\">&#123;&#125;)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    valueUser2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    thinkMethod </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> valueUser2</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MethodByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Think</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    thinkMethod</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Call</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #BABED8\">reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Value</span><span style=\"color: #89DDFF\">&#123;&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"9-8-创建对象\"><a href=\"#9-8-创建对象\" class=\"headerlink\" title=\"9.8 创建对象\"></a>9.8 创建对象</h4><h5 id=\"9-8-1-创建struct\"><a href=\"#9-8-1-创建struct\" class=\"headerlink\" title=\"9.8.1 创建struct\"></a>9.8.1 创建struct</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Id     </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Weight </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Height </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    t </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">TypeOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&#123;&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    value </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">New</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">t</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 根据reflect.Type创建一个对象，得到该对象的指针，再根据指针提到reflect.Value</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    value</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">FieldByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Id</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">SetInt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">749</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> value</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Interface</span><span style=\"color: #89DDFF\">().(*</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 把反射类型转成go原始数据类型Call([]reflect.Value&#123;&#125;)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"9-8-2-创建slice\"><a href=\"#9-8-2-创建slice\" class=\"headerlink\" title=\"9.8.2 创建slice\"></a>9.8.2 创建slice</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Id     </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Weight </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Height </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> slice </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #BABED8\">User</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sliceType </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">TypeOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">slice</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sliceValue </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MakeSlice</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">sliceType</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    sliceValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Index</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">Set</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #F78C6C\">749</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Weight</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">60.5</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1.70</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    users </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> sliceValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Interface</span><span style=\"color: #89DDFF\">().([]</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">1st user name </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> users</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">].</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"9-8-3-创建map\"><a href=\"#9-8-3-创建map\" class=\"headerlink\" title=\"9.8.3 创建map\"></a>9.8.3 创建map</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">reflect</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">type</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">User</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">struct</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Id     </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Name   </span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Weight </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    Height </span><span style=\"color: #C792EA\">float32</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> userMap </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">]*</span><span style=\"color: #BABED8\">User</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapType </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">TypeOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">userMap</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// mapValue:=reflect.MakeMap(mapType)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapValue </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MakeMapWithSize</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">mapType</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    user </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Id</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">     </span><span style=\"color: #F78C6C\">749</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Name</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\">   </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">绝迹之春</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Weight</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">60.5</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        Height</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1.70</span><span style=\"color: #89DDFF\">,</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    key </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Id</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">SetMapIndex</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> reflect</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ValueOf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">user</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">                    </span><span style=\"color: #676E95; font-style: italic\">// SetMapIndex 往map里添加一个key-value对</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mapValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MapIndex</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">key</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">Elem</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">FieldByName</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Name</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">).</span><span style=\"color: #82AAFF\">SetString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">憨批</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// MapIndex 根据Key取出对应的map</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    userMap </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> mapValue</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Interface</span><span style=\"color: #89DDFF\">().(map[</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">]*</span><span style=\"color: #BABED8\">User</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">user name </span><span style=\"color: #F07178\">%s</span><span style=\"color: #C3E88D\"> </span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> userMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">749</span><span style=\"color: #89DDFF\">].</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> user</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Name</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong><code>reflect包</code>里除了<code>MakeSlice()</code>和<code>MakeMap()</code>，还有<code>MakeChan()</code>和<code>MakeFunc()</code>。</strong></p>\n<hr>\n<h3 id=\"模块十：并发编程\"><a href=\"#模块十：并发编程\" class=\"headerlink\" title=\"模块十：并发编程\"></a>模块十：并发编程</h3><h4 id=\"10-1-学习目标\"><a href=\"#10-1-学习目标\" class=\"headerlink\" title=\"10.1 学习目标\"></a>10.1 学习目标</h4><ol>\n<li>了解什么是goroutine（协程）</li>\n<li>了解channel管道的相关知识点</li>\n<li>了解什么是管道堵塞以及如何解决</li>\n<li>学会利用并发编程处理大量数据处理的问题</li>\n</ol>\n<h4 id=\"10-2-为什么要使用goroutine\"><a href=\"#10-2-为什么要使用goroutine\" class=\"headerlink\" title=\"10.2 为什么要使用goroutine\"></a>10.2 为什么要使用goroutine</h4><p>需求：要统计1-10000000的数字中那些是素数，并打印这些素数？</p>\n<p>素数：就是除了1和它本身不能被其他数整除的数</p>\n<p>实现方法：</p>\n<ol>\n<li><p>传统方法，通过一个for循环判断各个数是不是素数</p>\n</li>\n<li><p>使用并发或者并行的方式，将统计素数的任务分配给多个<code>goroutine</code>去完成，这个时候就用到了<code>goroutine</code></p>\n</li>\n<li><p><code>goroutine</code>结合<code>channel</code></p>\n</li>\n</ol>\n<h4 id=\"10-3-进程、线程以及并行、并发\"><a href=\"#10-3-进程、线程以及并行、并发\" class=\"headerlink\" title=\"10.3 进程、线程以及并行、并发\"></a>10.3 进程、线程以及并行、并发</h4><h5 id=\"10-3-1-关于进程和线程\"><a href=\"#10-3-1-关于进程和线程\" class=\"headerlink\" title=\"10.3.1 关于进程和线程\"></a>10.3.1 关于进程和线程</h5><p><code>进程（Process）</code>就是程序在操作系统中的一次执行过程，是系统进行资源分配和调度的基本单位，进程是一个动态概念，是程序在执行过程中分配和管理资源的基本单位，每一个进程都有一个自己的地址空间。一个进程至少有 5 种基本状态，它们是：初始态，执行态，等待状态，就绪状态，终止状态。</p>\n<p>通俗的讲进程就是一个正在执行的程序。</p>\n<p>线程是进程的一个执行实例，是程序执行的最小单元，它是比进程更小的能独立运行的基本单位。</p>\n<p>一个进程可以创建多个线程，同一个进程中的多个线程可以并发执行，一个程序要运行的话至少有一个进程。</p>\n<h5 id=\"10-3-2-关于并行和并发\"><a href=\"#10-3-2-关于并行和并发\" class=\"headerlink\" title=\"10.3.2 关于并行和并发\"></a>10.3.2 关于并行和并发</h5><p>并发：多个线程同时竞争一个位置，竞争到的才可以执行，每一个时间段只有一个线程在执行。</p>\n<p>并行：多个线程可以同时执行，每一个时间段，可以有多个线程同时执行。</p>\n<p>通俗的讲多线程程序在单核CPU上面运行就是并发，多线程程序在多核CPU上运行就是并行，如果线程数大于CPU核数，则多线程程序在多个CPU上面运行既有并行又有并发。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/8f227eb25d99070e6cbe32d1d891dfaf_1739762143953.png\" alt=\"并行和并发\"></p>\n<h4 id=\"10-4-Golang中的协程（goroutine）以及主线程\"><a href=\"#10-4-Golang中的协程（goroutine）以及主线程\" class=\"headerlink\" title=\"10.4 Golang中的协程（goroutine）以及主线程\"></a>10.4 Golang中的协程（goroutine）以及主线程</h4><p>Golang中的主线程：（可以理解为线程&#x2F;也可以理解为进程），在一个Golang程序的主线程上可以起多个协程。Golang中多协程可以实现并行或者并发。</p>\n<p><code>协程（goroutine）</code>：可以理解为用户级线程，这是对内核透明的，也就是系统并不知道有协程的存在，是完全由用户自己的程序进行调度的。Golang的一大特色就是从语言层面原生支持协程，在函数或者方法前面加go关键字就可创建一个协程。可以说Golang中的协程就是<code>goroutine</code>。</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/1244e65a050974d38bbf55d8920df547_1739762143953.png\" alt=\"Go协程\"></p>\n<p>Golang中的多协程有点类似其他语言中的多线程。</p>\n<p>多协程和多线程：Golang中每个<code>goroutine</code>（协程） 默认占用内存远比Java、C的线程少。</p>\n<p>OS线程（操作系统线程）一般都有固定的栈内存（通常为2MB左右）,一个<code>goroutine</code>（协程）占用内存非常小，只有2KB左右，多协程<code>goroutine</code>切换调度开销方面远比线程要少。</p>\n<p>这也是为什么越来越多的大公司使用Golang的原因之一。</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\"></th>\n<th align=\"left\">协程</th>\n<th align=\"left\">线程</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"center\">创建数量</td>\n<td align=\"left\">轻松创建上百万个协程而不会导致系统资源衰竭</td>\n<td align=\"left\">通常最多不能超过1万个</td>\n</tr>\n<tr>\n<td align=\"center\">内存占用</td>\n<td align=\"left\">初始分配4k堆栈，随着程序的执行自动增长删除</td>\n<td align=\"left\">创建线程时必须指定堆栈且是固定的，通常以M为单位</td>\n</tr>\n<tr>\n<td align=\"center\">切换成本</td>\n<td align=\"left\">协程切换只需保存三个寄存器，耗时约200纳秒</td>\n<td align=\"left\">线程切换需要保存几十个寄存器，耗时约1000纳秒</td>\n</tr>\n<tr>\n<td align=\"center\">调度方式</td>\n<td align=\"left\">非抢占式，由Go runtime主动交出控制权（对于开发者而言是抢占式）</td>\n<td align=\"left\">在时间片用完后，由 CPU 中断任务强行将其调度走，这时必须保存很多信息</td>\n</tr>\n<tr>\n<td align=\"center\">创建销毁</td>\n<td align=\"left\">goroutine因为是由Go runtime负责管理的，创建和销毁的消耗非常小，是用户级的</td>\n<td align=\"left\">创建和销毁开销巨大，因为要和操作系统打交道，是内核级的，通常解决的办法就是线程池</td>\n</tr>\n</tbody></table>\n<h4 id=\"10-5-Goroutine的使用以及sync-WaitGroup\"><a href=\"#10-5-Goroutine的使用以及sync-WaitGroup\" class=\"headerlink\" title=\"10.5 Goroutine的使用以及sync.WaitGroup\"></a>10.5 Goroutine的使用以及sync.WaitGroup</h4><p>并行执行需求：</p>\n<p>在主线程(可以理解成进程)中，开启一个<code>goroutine</code>，该协程每隔50毫秒秒输出<code>&quot;你好 golang&quot;</code>。</p>\n<p>在主线程中也每隔50毫秒输出<code>&quot;你好 golang&quot;</code>, 输10次后，退出程序，要求主线程和<code>goroutine</code>同时执行。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">strconv</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">tesst () hello,world </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Itoa</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Second</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 开启了一个协程</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">main() hello,golang</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Itoa</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Second</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>上面代码看上去没有问题，但是要注意主线程执行完毕后即使协程没有执行完毕，程序会退出，所以我们需要对上面代码进行改造。</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/74f9e88e7f9dcf2199e8d2f79aa70995_1739762144571.png\" alt=\"sync.WaitGroup的使用\"></p>\n<p><code>sync.WaitGroup</code>可以实现主线程等待协程执行完毕。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">strconv</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">sync</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> wg sync</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">WaitGroup </span><span style=\"color: #676E95; font-style: italic\">// 1、定义全局的 WaitGroup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">test () 你好 golang </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Itoa</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Millisecond </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">50</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 4、goroutine 结束就登记-1</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 2、启动一个 goroutine 就登记+1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\"> main() 你好 golang</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> strconv</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Itoa</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Millisecond </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">50</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Wait</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 3、等待所有登记的 goroutine 都结束</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"10-6-启动多个Goroutine\"><a href=\"#10-6-启动多个Goroutine\" class=\"headerlink\" title=\"10.6 启动多个Goroutine\"></a>10.6 启动多个Goroutine</h4><p>在Go语言中实现并发就是这样简单，我们还可以启动多个<code>goroutine</code>。让我们再来一个例子：</p>\n<p>（这里使用<code>sync.WaitGroup</code>来实现等待<code>goroutine</code>执行完毕）</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">sync</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> wg sync</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">WaitGroup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">hello</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// goroutine 结束就登记-1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Hello Goroutine!</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 启动一个 goroutine 就登记+1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">hello</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Wait</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 等待所有登记的 goroutine 都结束</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>多次执行上面的代码，会发现每次打印的数字的顺序都不一致。这是因为10个<code>goroutine</code>是并发执行的，而<code>goroutine</code>的调度是随机的。</p>\n<h4 id=\"10-7-设置Golang并行运行的时候占用的CPU数量\"><a href=\"#10-7-设置Golang并行运行的时候占用的CPU数量\" class=\"headerlink\" title=\"10.7 设置Golang并行运行的时候占用的CPU数量\"></a>10.7 设置Golang并行运行的时候占用的CPU数量</h4><p>Go运行时的调度器使用<code>GOMAXPROCS</code>参数来确定需要使用多少个OS线程来同时执行Go代码。默认值是机器上的CPU核心数。例如在一个8核心的机器上，调度器会把Go代码同时调度到8个OS线程上。</p>\n<p>Go语言中可以通过<code>runtime.GOMAXPROCS()函数</code>设置当前程序并发时占用的CPU逻辑核心数。</p>\n<p>Go 1.5版本之前，默认使用的是单核心执行。Go 1.5版本之后，默认使用全部的CPU逻辑核心数。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">runtime</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//获取当前计算机上面的 CPU 个数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    cpuNum </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> runtime</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">NumCPU</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">cpuNum=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> cpuNum</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//可以自己设置使用多个 CPU</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    runtime</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">GOMAXPROCS</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">cpuNum </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">ok</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"10-8-Goroutine统计素数\"><a href=\"#10-8-Goroutine统计素数\" class=\"headerlink\" title=\"10.8 Goroutine统计素数\"></a>10.8 Goroutine统计素数</h4><p>需求：要统计1-120000的数字中那些是素数？</p>\n<ol>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">通过传统的for循环来统计</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    start </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Now</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Unix</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> num </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> num </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">120000</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        flag </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 假设是素数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">%</span><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 说明该 num 不是素数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                flag </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">break</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> flag </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\">// fmt.Println(num)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    end </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Now</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Unix</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">普通的方法耗时=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> end</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">start</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><ol start=\"2\">\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">`goroutine`开启多个协程统计</span></span></code></pre></div></li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">sync</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> wg sync</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">WaitGroup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fn1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">n </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> num </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">n</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)*</span><span style=\"color: #F78C6C\">30000</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> num </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> n</span><span style=\"color: #89DDFF\">*</span><span style=\"color: #F78C6C\">30000</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        flag </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 假设是素数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">%</span><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                flag </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">break</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> flag </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\">// fmt.Println(num)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    start </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Now</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Unix</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fn1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Wait</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    end </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Now</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Unix</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">普通的方法耗时=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> end</span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\">start</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>问题：上面我们使用了<code>goroutine</code>已经能大大的提升新能了，但是如果我们想统计数据和打印数据同时进行，这个时候如何实现呢，这个时候我们就可以使用管道。</p>\n<h4 id=\"10-9-Channel管道\"><a href=\"#10-9-Channel管道\" class=\"headerlink\" title=\"10.9 Channel管道\"></a>10.9 Channel管道</h4><p>管道是Golang在语言级别上提供的<code>goroutine</code>间的通讯方式，我们可以使用<code>channel</code>在多个<code>goroutine</code>之间传递消息。如果说<code>goroutine</code>是Go程序并发的执行体，<code>channel</code>就是它们之间的连接。<code>channel</code>是可以让一个<code>goroutine</code>发送特定值到另一个<code>goroutine</code>的通信机制。</p>\n<p>Golang的并发模型是<code>CSP（Communicating Sequential Processes）</code>，提倡通过通信共享内存而不是通过共享内存而实现通信。</p>\n<p>Go语言中的<code>管道（channel）</code>是一种特殊的类型。管道像一个传送带或者队列，总是遵循**先入先出（First In First Out）**的规则，保证收发数据的顺序。每一个管道都是一个具体类型的导管，也就是声明channel的时候需要为其指定元素类型。</p>\n<h5 id=\"10-9-1-channel类型\"><a href=\"#10-9-1-channel类型\" class=\"headerlink\" title=\"10.9.1 channel类型\"></a>10.9.1 channel类型</h5><p><code>channel</code>是一种类型，一种引用类型。</p>\n<p>声明管道类型的格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> 变量 </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> 元素类型</span></span></code></pre></div><p>举几个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> ch1 </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\">   </span><span style=\"color: #676E95; font-style: italic\">// 声明一个传递整型的管道</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> ch2 </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 声明一个传递布尔型的管道</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> ch3 </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 声明一个传递int 切片的管道</span></span></code></pre></div><h5 id=\"10-9-2-创建channel\"><a href=\"#10-9-2-创建channel\" class=\"headerlink\" title=\"10.9.2 创建channel\"></a>10.9.2 创建channel</h5><p>声明的管道后需要使用<code>make()函数</code>初始化之后才能使用。</p>\n<p>创建<code>channel</code>的格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> 元素类型</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> 容量</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>举几个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 创建一个能存储 10 个 int 类型数据的管道</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ch1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 创建一个能存储 4 个 bool 类型数据的管道</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ch2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">4</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 创建一个能存储 3 个[]int 切片类型数据的管道</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">ch3 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h5 id=\"10-9-3-channel操作\"><a href=\"#10-9-3-channel操作\" class=\"headerlink\" title=\"10.9.3 channel操作\"></a>10.9.3 channel操作</h5><p>管道有<code>发送（send）</code>、<code>接收(receive）</code>和<code>关闭（close）</code>三种操作。</p>\n<p>发送和接收都使用<code>&lt;-</code>符号。</p>\n<p>现在我们先使用以下语句定义一个管道：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">ch </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><h6 id=\"10-9-3-1-发送（将数据放在管道内）\"><a href=\"#10-9-3-1-发送（将数据放在管道内）\" class=\"headerlink\" title=\"10.9.3.1 发送（将数据放在管道内）\"></a>10.9.3.1 发送（将数据放在管道内）</h6><p>将一个值发送到管道中。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 把10发送到ch中</span></span></code></pre></div><h6 id=\"10-9-3-2-接收（从管道内取值）\"><a href=\"#10-9-3-2-接收（从管道内取值）\" class=\"headerlink\" title=\"10.9.3.2 接收（从管道内取值）\"></a>10.9.3.2 接收（从管道内取值）</h6><p>从一个管道中接收值。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">x </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch </span><span style=\"color: #676E95; font-style: italic\">// 从ch 中接收值并赋值给变量x</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch      </span><span style=\"color: #676E95; font-style: italic\">// 从ch 中接收值，忽略结果</span></span></code></pre></div><h6 id=\"10-9-3-3-关闭管道\"><a href=\"#10-9-3-3-关闭管道\" class=\"headerlink\" title=\"10.9.3.3 关闭管道\"></a>10.9.3.3 关闭管道</h6><p>我们通过调用内置的<code>close()函数</code>来关闭管道。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ch</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>关于关闭管道需要注意的事情是，只有在通知接收方<code>goroutine</code>所有的数据都发送完毕的时候才需要关闭管道。管道是可以被垃圾回收机制回收的，它和关闭文件是不一样的，在结束操作之后关闭文件是必须要做的，但关闭管道不是必须的。</p>\n<p>关闭后的管道有以下特点：</p>\n<ol>\n<li>对一个关闭的管道再发送值就会导致<code>panic</code>。</li>\n<li>对一个关闭的管道进行接收会一直获取值直到管道为空。</li>\n<li>对一个关闭的并且没有值的管道执行接收操作会得到对应类型的零值。</li>\n<li>关闭一个已经关闭的管道会导致<code>panic</code>。</li>\n</ol>\n<h5 id=\"10-9-4-管道阻塞\"><a href=\"#10-9-4-管道阻塞\" class=\"headerlink\" title=\"10.9.4 管道阻塞\"></a>10.9.4 管道阻塞</h5><h6 id=\"10-9-4-1-无缓冲的管道\"><a href=\"#10-9-4-1-无缓冲的管道\" class=\"headerlink\" title=\"10.9.4.1 无缓冲的管道\"></a>10.9.4.1 无缓冲的管道</h6><p>如果创建管道的时候没有指定容量，那么我们可以叫这个管道为无缓冲的管道无缓冲的管道又称为阻塞的管道。我们来看一下下面的代码：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">发送成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>上面这段代码能够通过编译，但是执行的时候会出现以下错误：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">goroutine </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[chan</span><span style=\"color: #BABED8\"> send</span><span style=\"color: #89DDFF\">]:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">main</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        D</span><span style=\"color: #89DDFF\">:/</span><span style=\"color: #BABED8\">go_project</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\">src</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\">day1</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\">main</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #F78C6C\">7</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">0x28</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">exit status </span><span style=\"color: #F78C6C\">2</span></span></code></pre></div><h6 id=\"10-9-4-2-有缓冲的管道\"><a href=\"#10-9-4-2-有缓冲的管道\" class=\"headerlink\" title=\"10.9.4.2 有缓冲的管道\"></a>10.9.4.2 有缓冲的管道</h6><p>解决上面问题的方法还有一种就是使用有缓冲区的管道。我们可以在使用make函数初始化管道的时候为其指定管道的容量，例如：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 创建一个容量为1 的有缓冲区管道</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">发送成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>只要管道的容量大于零，那么该管道就是有缓冲的管道，管道的容量表示管道中能存放元素的数量。就像你小区的快递柜只有那么个多格子，格子满了就装不下了，就阻塞了，等到别人取走一个快递员就能往里面放一个。</p>\n<p>管道阻塞具体代码如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">12</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">发送成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>解决办法：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 放进去</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch     </span><span style=\"color: #676E95; font-style: italic\">// 取走</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">12</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 放进去</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch     </span><span style=\"color: #676E95; font-style: italic\">// 取走</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">17</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 还可以放进去</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">发送成功</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"10-9-5-for-range从管道循环取值\"><a href=\"#10-9-5-for-range从管道循环取值\" class=\"headerlink\" title=\"10.9.5 for range从管道循环取值\"></a>10.9.5 for range从管道循环取值</h5><p>当向管道中发送完数据时，我们可以通过<code>close()函数</code>来关闭管道。</p>\n<p>当管道被关闭时，再往该管道发送值会引发<code>panic</code>，从该管道取值的操作会先取完管道中的值，再然后取到的值一直都是对应类型的零值。那如何判断一个管道是否被关闭了呢？我们来看下面这个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 循环遍历管道数据</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> ch1 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        ch1 </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ch1</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 关闭管道</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 使用 for range 遍历管道，当管道被关闭的时候就会退出 for range,如果没有关闭管道就会报个错误 fatal error: all goroutines are asleep - deadlock!</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 通过 for range 来遍历管道数据 管道没有 key</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> val </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> ch1 </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">val</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>从上面的例子中我们看到有两种方式在接收值的时候判断该管道是否被关闭，不过我们通常使用的是<code>for range</code>的方式。使用<code>for range</code>遍历管道，当管道被关闭的时候就会退出<code>for range</code>。</p>\n<h4 id=\"10-10-Goroutine结合Channel管道\"><a href=\"#10-10-Goroutine结合Channel管道\" class=\"headerlink\" title=\"10.10 Goroutine结合Channel管道\"></a>10.10 Goroutine结合Channel管道</h4><p>需求1：定义两个方法，一个方法给管道里面写数据，一个给管道里面读取数据，要求同步进行。</p>\n<ol>\n<li><p>开启一个fn1的的协程给向管道inChan中写入 100 条数据</p>\n</li>\n<li><p>开启一个fn2的协程读取inChan中写入的数据</p>\n</li>\n<li><p>注意：fn1和fn2同时操作一个管道</p>\n</li>\n<li><p>主线程必须等待操作完成后才可以退出</p>\n</li>\n</ol>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">sync</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> wg sync</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">WaitGroup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fn1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intChan </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        intChan </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">writeData 写入数据-</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">+</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Millisecond </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intChan</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fn2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intChan </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> intChan </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">readData 读到数据=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Millisecond </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">50</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    allChan </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fn1</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">allChan</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">fn2</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">allChan</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Wait</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">读取完毕...</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>需求2：goroutine结合channel实现统计1-120000的数字中那些是素数？</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/dfda24a7aab18b15ebb0cd7ac84537cc_1739762144571.png\" alt=\"Goroutine结合Channel管道\"></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">sync</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> wg sync</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">WaitGroup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 向intChan放入 1-120000 个数</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">putNum</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intChan </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        intChan </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//关闭 intChan</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intChan</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 从intChan取出数据，并判断是否为素数,如果是，就放入到primeChan</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">primeNum</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intChan </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> primeChan </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> exitChan </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> num </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> intChan </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> flag </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">2</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> num</span><span style=\"color: #89DDFF\">%</span><span style=\"color: #BABED8\">i </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 说明该num不是素数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                flag </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">false</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                </span><span style=\"color: #89DDFF; font-style: italic\">break</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> flag </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #676E95; font-style: italic\">// 将这个数就放入到primeChan</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            primeChan </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> num</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 判断关闭</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    exitChan </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">true</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 打印素数的方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">printPrime</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">primeChan </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> primeChan </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    start </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Now</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Unix</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    intChan </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1000</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    primeChan </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20000</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 放入结果</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 标识退出的管道</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    exitChan </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">bool</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 8个</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 开启一个协程，向intChan放入1-8000个数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">putNum</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intChan</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 开启4个协程，从intChan 取出数据，并判断是否为素数,如果是，就放入到primeChan</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">primeNum</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">intChan</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> primeChan</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> exitChan</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 打印素数</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">printPrime</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">primeChan</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 判断什么时候退出</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">8</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">exitChan</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// 当我们从exitChan取出了8个结果，就可以放心的关闭prprimeChan</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">primeChan</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Wait</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    end </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Now</span><span style=\"color: #89DDFF\">().</span><span style=\"color: #82AAFF\">Unix</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">end </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> start</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">main 线程退出</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"10-11-单向管道\"><a href=\"#10-11-单向管道\" class=\"headerlink\" title=\"10.11 单向管道\"></a>10.11 单向管道</h4><p>有的时候我们会将管道作为参数在多个任务函数间传递，很多时候我们在不同的任务函数中使用管道都会对其进行限制，比如限制管道在函数中只能发送或只能接收。</p>\n<ol>\n<li><code>chan&lt;- int</code>是一个只能发送的通道，可以发送但是不能接收；</li>\n<li><code>&lt;-chan int</code>是一个只能接收的通道，可以接收但是不能发送。</li>\n</ol>\n<p>例如：</p>\n<p>(一般建议不要直接声明只读或只写管道，是没有多大意义的，以下举例代码仅供了解其意义)</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 1. 在默认情况下下，管道是双向</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// var chan1 chan int //可读可写</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 2 声明为只写</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> chan2 </span><span style=\"color: #89DDFF\">chan&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    chan2 </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    chan2 </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// num := &lt;-chan2 //error</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">chan2=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> chan2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> chan_temp </span><span style=\"color: #89DDFF\">chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    chan_temp </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    chan_temp </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">1</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 3. 声明为只读</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> chan3 </span><span style=\"color: #89DDFF\">&lt;-chan</span><span style=\"color: #BABED8\"> int </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> chan_temp</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    num2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">chan3</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// chan3&lt;- 30 //err</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">num2=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> num2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>一般用于对不同的任务函数中使用管道进行限制，限制管道在函数中只能发送或只能接收。</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">counter</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">out </span><span style=\"color: #89DDFF\">chan&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 限制为只写</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        out </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">squarer</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">out </span><span style=\"color: #89DDFF\">chan&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> in </span><span style=\"color: #89DDFF\">&lt;-chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 限制为只写、只读</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> in </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        out </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">close</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">out</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">printer</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">in </span><span style=\"color: #89DDFF\">&lt;-chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 限制为只读</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">range</span><span style=\"color: #BABED8\"> in </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch1 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    ch2 </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">counter</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ch1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">squarer</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ch2</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ch1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #82AAFF\">printer</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ch2</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"10-12-select多路复用\"><a href=\"#10-12-select多路复用\" class=\"headerlink\" title=\"10.12 select多路复用\"></a>10.12 select多路复用</h4><p>在某些场景下我们需要同时从多个通道接收数据。这个时候就可以用到Golang中给我们提供的<code>select多路复用</code>。</p>\n<p>通常情况通道在接收数据时，如果没有数据可以接收将会发生阻塞。</p>\n<p>比如说下面代码来实现从多个通道接受数据的时候就会发生阻塞：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 尝试从ch1 接收值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    data</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch1</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 尝试从ch2 接收值</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    data</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> ok </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch2</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">...</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>这种方式虽然可以实现从多个管道接收值的需求，但是运行性能会差很多。为了应对这种场景，Go内置了<code>select</code>关键字，可以同时响应多个管道的操作。</p>\n<p><code>select</code>的使用类似于<code>switch语句</code>，它有一系列<code>case</code>分支和一个默认的分支。每个<code>case</code>会对应一个管道的通信（接收或发送）过程。<code>select</code>会一直等待，直到某个<code>case</code>的通信操作完成时，就会执行<code>case</code>分支对应的语句。</p>\n<p>具体格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch1</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">...</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> data </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">ch2</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">...</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> ch3 </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> data</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">...</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    默认操作</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>举个小例子来演示下<code>select</code>的使用：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 1.定义一个管道 10 个数据 int</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    intChan </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        intChan </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> i</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 2.定义一个管道 5 个数据 string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    stringChan </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">(chan</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">5</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        stringChan </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">hello</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sprintf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #F07178\">%d</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">select</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">intChan</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">从 intChan 读取的数据</span><span style=\"color: #F07178\">%d</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">case</span><span style=\"color: #BABED8\"> v </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&lt;-</span><span style=\"color: #BABED8\">stringChan</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">从 stringChan 读取的数据</span><span style=\"color: #F07178\">%s</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> v</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">default</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">都取不到了，不玩了, 程序员可以加入逻辑</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Second</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"10-13-Golang并发安全和锁\"><a href=\"#10-13-Golang并发安全和锁\" class=\"headerlink\" title=\"10.13 Golang并发安全和锁\"></a>10.13 Golang并发安全和锁</h4><h5 id=\"10-13-1-互斥锁\"><a href=\"#10-13-1-互斥锁\" class=\"headerlink\" title=\"10.13.1 互斥锁\"></a>10.13.1 互斥锁</h5><p>互斥锁是传统并发编程中对共享资源进行访问控制的主要手段，它由标准库<code>sync</code>中的<code>Mutex</code>结构体类型表示。<code>sync.Mutex</code>类型只有两个公开的指针方法，<code>Lock</code>和 <code>Unlock</code>。<code>Lock</code>锁定当前的共享资源，<code>Unlock</code>进行解锁。</p>\n<p>有问题代码：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> count </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    count</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">the count is : </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> count</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Millisecond</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> r </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> r </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> r</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Second</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><code>go build \\-race main.go</code>然后我们运行<code>main.exe</code>就知道到底哪里存在互斥</p>\n<p>互斥锁解决这个问题：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> count </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    count</span><span style=\"color: #89DDFF\">++</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">the count is : </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> count</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Millisecond</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> r </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> r </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> r</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Second</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p>使用互斥锁能够保证同一时间有且只有一个<code>goroutine</code>进入临界区，其他的<code>goroutine</code>则在等待锁；当互斥锁释放后，等待的<code>goroutine</code>才可以获取锁进入临界区，多个<code>goroutine</code>同时等待一个锁时，唤醒的策略是随机的。</p>\n<p>虽然使用互斥锁能解决资源争夺问题，但是并不完美，通过全局变量加锁同步来实现通讯，并不利于多个协程对全局变量的读写操作。这个时候我们也可以通过另一种方式来实现上面的功能<code>管道（Channel）</code>。</p>\n<h5 id=\"10-13-2-读写互斥锁\"><a href=\"#10-13-2-读写互斥锁\" class=\"headerlink\" title=\"10.13.2 读写互斥锁\"></a>10.13.2 读写互斥锁</h5><p>互斥锁的本质是当一个<code>goroutine</code>访问的时候，其他<code>goroutine</code>都不能访问。这样在资源同步，避免竞争的同时也降低了程序的并发性能。程序由原来的并行执行变成了串行执行。</p>\n<p>其实，当我们对一个不会变化的数据只做“读”操作的话，是不存在资源竞争的问题的。因为数据是不变的，不管怎么读取，多少 <code>goroutine</code>同时读取，都是可以的。</p>\n<p>所以问题不是出在“读”上，主要是修改，也就是“写”。修改的数据要同步，这样其他<code>goroutine</code>才可以感知到。所以真正的互斥应该是读取和修改、修改和修改之间，读和读是没有互斥操作的必要的。</p>\n<p>因此，衍生出另外一种锁，叫做读写锁。</p>\n<p>读写锁可以让多个读操作并发，同时读取，但是对于写操作是完全互斥的。也就是说，当一个<code>goroutine</code>进行写操作的时候，其他 <code>goroutine</code>既不能进行读操作，也不能进行写操作o。</p>\n<p>Go中的读写锁由结构体类型<code>sync.RWMutex</code>表示。此类型的方法集合中包含两对方法：</p>\n<p>一组是对写操作的锁定和解锁，简称“写锁定”和“写解锁”：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(*</span><span style=\"color: #BABED8\">RWMutex</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #82AAFF\">Lock</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(*</span><span style=\"color: #BABED8\">RWMutex</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #82AAFF\">Unlock</span><span style=\"color: #89DDFF\">()</span></span></code></pre></div><p>另一组表示对读操作的锁定和解锁，简称为“读锁定”与“读解锁”：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(*</span><span style=\"color: #BABED8\">RWMutex</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #82AAFF\">RLock</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(*</span><span style=\"color: #BABED8\">RWMutex</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #82AAFF\">RUnlock</span><span style=\"color: #89DDFF\">()</span></span></code></pre></div><p>读写锁示例：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">sync</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> count </span><span style=\"color: #C792EA\">int</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> mutex sync</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">RWMutex</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> wg sync</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">WaitGroup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 写的方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">write</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mutex</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Lock</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行写操作</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Second </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mutex</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Unlock</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 读的方法</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">read</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mutex</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">RLock</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">执行读操作</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Second </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">3</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    mutex</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">RUnlock</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Done</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 开启10个协程执行写操作</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">read</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 开启10个协程执行读操作</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">1</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">write</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    wg</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Wait</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"10-14-Goroutine-Recover解决协程中出现的Panic\"><a href=\"#10-14-Goroutine-Recover解决协程中出现的Panic\" class=\"headerlink\" title=\"10.14 Goroutine Recover解决协程中出现的Panic\"></a>10.14 Goroutine Recover解决协程中出现的Panic</h4><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">time</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 函数</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">sayHello</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Second</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">hello,world</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 函数</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 这里我们可以使用defer+recover</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">func()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// 捕获test抛出的panic</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">recover</span><span style=\"color: #89DDFF\">();</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">test() 发生错误</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 定义了一个map</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> myMap </span><span style=\"color: #89DDFF\">map[</span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #C792EA\">string</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    myMap</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">]</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">golang</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// error</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">sayHello</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">test</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">main() ok=</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sleep</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">time</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Second</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><hr>\n<h3 id=\"模块十一：包与工程化\"><a href=\"#模块十一：包与工程化\" class=\"headerlink\" title=\"模块十一：包与工程化\"></a>模块十一：包与工程化</h3><h4 id=\"11-1-学习目标\"><a href=\"#11-1-学习目标\" class=\"headerlink\" title=\"11.1 学习目标\"></a>11.1 学习目标</h4><ol>\n<li>了解Golang中的包的定义</li>\n<li>熟练并掌握学会包的使用</li>\n</ol>\n<h4 id=\"11-2-Golang中包的介绍和定义\"><a href=\"#11-2-Golang中包的介绍和定义\" class=\"headerlink\" title=\"11.2 Golang中包的介绍和定义\"></a>11.2 Golang中包的介绍和定义</h4><p><code>包（package）</code>是多个Go源码的集合，是一种高级的代码复用方案，Go语言为我们提供了很多内置包，如<code>fmt</code>、<code>strconv</code>、<code>strings</code>、<code>sort</code>、<code>errors</code>、<code>time</code>、<code>encoding/json</code>、<code>os</code>、<code>io</code>等。</p>\n<p>Golang中的包可以分为三种：1、系统内置包 2、自定义包 3、第三方包</p>\n<p>系统内置包: Golang 语言给我们提供的内置包，引入后可以直接使用，如<code>fmt</code>、<code>strconv</code>、<code>strings</code>、<code>sort</code>、<code>errors</code>、<code>time</code>、<code>encoding/json</code>、<code>os</code>、<code>io</code> 等。</p>\n<p>自定义包：开发者自己写的包。</p>\n<p>第三方包：属于自定义包的一种，需要下载安装到本地后才可以使用，如<code>&quot;github.com/shopspring/decimal&quot;</code>包解决<code>float</code>精度丢失问题。</p>\n<h4 id=\"11-3-Golang包管理工具go-mod\"><a href=\"#11-3-Golang包管理工具go-mod\" class=\"headerlink\" title=\"11.3 Golang包管理工具go mod\"></a>11.3 Golang包管理工具go mod</h4><p>在Golang 1.11版本之前如果我们要自定义包的话必须把项目放在GOPATH目录。Go1.11版本之后无需手动配置环境变量，使用go mod管理项目，也不需要非得把项目放到<code>GOPATH</code>指定目录下，你可以在你磁盘的任何位置新建一个项目，Go1.13以后可以彻底不要<code>GOPATH</code>了。</p>\n<h5 id=\"11-3-1-go-mod-init初始化项目\"><a href=\"#11-3-1-go-mod-init初始化项目\" class=\"headerlink\" title=\"11.3.1 go mod init初始化项目\"></a>11.3.1 go mod init初始化项目</h5><p>实际项目开发中我们首先要在我们项目目录中用<code>go mod</code>命令生成一个<code>go.mod</code>文件管理我们项目的依赖。</p>\n<p>比如我们的Golang项目文件要放在了day1这个文件夹，这个时候我们需要在day1文件夹 里面使用<code>go mod</code>命令生成一个<code>go.mod</code>文件。</p>\n<p><strong>（2.9已经介绍过<code>go mod</code>的基础用法，这里不做过多讲述）</strong></p>\n<h5 id=\"11-3-2-go-mod其他命令\"><a href=\"#11-3-2-go-mod其他命令\" class=\"headerlink\" title=\"11.3.2 go mod其他命令\"></a>11.3.2 go mod其他命令</h5><p><code>download</code> download modules to local cache （下载依赖的module到本地cache）</p>\n<p><code>edit</code> edit go.mod from tools or scripts （编辑go.mod文件）</p>\n<p><code>graph</code> print module requirement graph （打印模块依赖图）</p>\n<p><code>init</code> initialize new module in current directory （再当前文件夹下初始化一个新的module，创建go.mod文件）</p>\n<p><code>tidy</code> add missing and remove unused modules （增加丢失的module，去掉未用的module）</p>\n<p><code>vendor</code> make vendored copy of dependencies （将依赖复制到vendor下）</p>\n<p><code>verify</code> verify dependencies have expected content （校验依赖检查下载的第三方库有没有本地修改，如果有修改，则会返回非0，否则验证成功）</p>\n<p><code>why</code> explain why packages or modules are needed （解释为什么需要依赖）</p>\n<h4 id=\"11-4-Golang中自定义包\"><a href=\"#11-4-Golang中自定义包\" class=\"headerlink\" title=\"11.4 Golang中自定义包\"></a>11.4 Golang中自定义包</h4><p><code>包（package）</code>是多个Go源码的集合，一个包可以简单理解为一个存放多个<code>.go</code>文件的文件 夹。该文件夹下面的所有<code>go文件</code>都要在代码的第一行添加如下代码，声明该文件归属的包。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">包名</span></span></code></pre></div><p>注意事项：</p>\n<ul>\n<li><p>一个文件夹下面直接包含的文件只能归属一个<code>package</code>，同样一个<code>package</code>的文件不能 在多个文件夹下。</p>\n</li>\n<li><p>包名可以不和文件夹的名字一样，包名不能包含 - 符号。</p>\n</li>\n<li><p>包名为<code>main</code>的包为应用程序的入口包，这种包编译后会得到一个可执行文件，而编译不包含。</p>\n</li>\n</ul>\n<h5 id=\"11-4-1-定义一个包\"><a href=\"#11-4-1-定义一个包\" class=\"headerlink\" title=\"11.4.1 定义一个包\"></a>11.4.1 定义一个包</h5><p>如果想在一个包中引用另外一个包里的标识符（如变量、常量、类型、函数等）时，该标识符必须是对外可见的（public）。在Go语言中只需要将标识符的首字母大写就可以让标识符对外可见了。</p>\n<p>详细步骤：</p>\n<p><strong>首先在工作区目录下生成并初始化一个go.work文件</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/c481a1b91a1abce6e8140bdc511b365e_1739762144571.png\" alt=\"自定义包1\"></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/7223f7612fbee89329b86ef7dac9b3fb_1739762144571.png\" alt=\"自定义包2\"></p>\n<p><strong>在src下新建一个包名为calc的包</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/ee733ff1980994ba17ee598d01a88b9c_1739762144571.png\" alt=\"自定义包3\"></p>\n<p><strong>初始化该模块</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/98fbf762fbea97525fbe9b28ddae8183_1739762145229.png\" alt=\"自定义包4\"><br><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/6fd42c5199dadeb360c90cd110a98c13_1739762145229.png\" alt=\"自定义包5\"></p>\n<p><strong>将该模块纳入工作区，即go work use一下该模块</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/3c51ac521d94a46aa9774d3afaa49bcb_1739762145229.png\" alt=\"自定义包6\"></p>\n<p><strong>在calc包里新建一个.go文件</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/8333ef705456a6caa32c9839854996cd_1739762145229.png\" alt=\"自定义包7\"></p>\n<p><strong>写入以下代码，并保存</strong></p>\n<p>代码如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">calc</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 首字母大小表示公有，首字母小写表示私有</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> a </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">100</span><span style=\"color: #BABED8\">  </span><span style=\"color: #676E95; font-style: italic\">// 私有变量</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> Age </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 公有变量</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 公有方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">+</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">subTest</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 私有方法</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> x </span><span style=\"color: #89DDFF\">-</span><span style=\"color: #BABED8\"> y</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Sub</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 私有方法可以在本包中调用</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">subTest</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">x</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> y</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Test</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">int</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 私有变量可以在本包中调用</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> a</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>在src下新建main.go文件</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/4f15527341199022b0968c3650fe172b_1739762145229.png\" alt=\"自定义包8\"></p>\n<p>**写入以下代码，并保存</p>\n<p>main.go中引入这个包，访问一个包里面的公有属性方法的时候需要通过包名称.去访问</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">calc</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> calc</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> calc</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sub</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">calc</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Age</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">calc</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Test</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><strong>开始执行代码</strong></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/ff1404a70f3773618fa7f1827dac47ba_1739762145860.png\" alt=\"自定义包9\"></p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/9ed558232de143a6e769f8c5c0d1156a_1739762145860.png\" alt=\"自定义包10\"></p>\n<h5 id=\"11-4-2-导入一个包\"><a href=\"#11-4-2-导入一个包\" class=\"headerlink\" title=\"11.4.2 导入一个包\"></a>11.4.2 导入一个包</h5><h6 id=\"11-4-2-1-单行导入\"><a href=\"#11-4-2-1-单行导入\" class=\"headerlink\" title=\"11.4.2.1 单行导入\"></a>11.4.2.1 单行导入</h6><p>单行导入的格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">包 1</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">包 2</span><span style=\"color: #89DDFF\">&quot;</span></span></code></pre></div><h6 id=\"11-4-2-2-多行导入\"><a href=\"#11-4-2-2-多行导入\" class=\"headerlink\" title=\"11.4.2.2 多行导入\"></a>11.4.2.2 多行导入</h6><p>多行导入的格式如下：</p>\n<h6 id=\"11-4-2-3-匿名导入包\"><a href=\"#11-4-2-3-匿名导入包\" class=\"headerlink\" title=\"11.4.2.3 匿名导入包\"></a>11.4.2.3 匿名导入包</h6><p>如果只希望导入包，而不使用包内部的数据时，可以使用匿名导入包。具体的格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\">  _ </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">包的路径</span><span style=\"color: #89DDFF\">&quot;</span></span></code></pre></div><p>匿名导入的包与其他方式导入的包一样都会被编译到可执行文件中。</p>\n<h5 id=\"11-4-3-自定义包名\"><a href=\"#11-4-3-自定义包名\" class=\"headerlink\" title=\"11.4.3 自定义包名\"></a>11.4.3 自定义包名</h5><p>在导入包名的时候，我们还可以为导入的包设置别名。通常用于导入的包名太长或者导入的 包名冲突的情况。</p>\n<p>具体语法格式如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> 别名 </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">包的路径</span><span style=\"color: #89DDFF\">&quot;</span></span></code></pre></div><p>举例：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    c </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">calc</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    a </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Add</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    s </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Sub</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #F78C6C\">20</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">a</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">Age</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">c</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Test</span><span style=\"color: #89DDFF\">())</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"11-5-Golang中init-初始化函数\"><a href=\"#11-5-Golang中init-初始化函数\" class=\"headerlink\" title=\"11.5 Golang中init()初始化函数\"></a>11.5 Golang中init()初始化函数</h4><h5 id=\"11-5-1-init-函数介绍\"><a href=\"#11-5-1-init-函数介绍\" class=\"headerlink\" title=\"11.5.1 init()函数介绍\"></a>11.5.1 init()函数介绍</h5><p>在Go语言程序执行时导入包语句会自动触发包内部init()函数的调用。</p>\n<p>需要注意的是：<code>init()函数</code>没有参数也没有返回值。</p>\n<p>init()函数在程序运行时自动被调用执行，不能在代码中主动调用它。</p>\n<p>包初始化执行的顺序如下图所示：</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/901edb6265ee70f1c9ca35d3cb23739b_1739762145860.png\" alt=\"包中init()函数的执行时机\"></p>\n<h5 id=\"11-5-2-init-函数执行顺序\"><a href=\"#11-5-2-init-函数执行顺序\" class=\"headerlink\" title=\"11.5.2 init()函数执行顺序\"></a>11.5.2 init()函数执行顺序</h5><p>Go语言包会从main包开始检查其导入的所有包，每个包中又可能导入了其他的包。</p>\n<p>Go编译器由此构建出一个树状的包引用关系，再根据引用顺序决定编译顺序，依次编译这些包的代码。</p>\n<p>在运行时，被最后导入的包会最先初始化并调用其<code>init()函数</code>，如下图所示：</p>\n<p><img src=\"https://stblogs.oss-cn-chengdu.aliyuncs.com/blog/d2db255a8b1ad18d89360a71878430aa_1739762145860.png\" alt=\"init()函数的执行顺序\"></p>\n<h4 id=\"11-6-Golang中使用第三方包\"><a href=\"#11-6-Golang中使用第三方包\" class=\"headerlink\" title=\"11.6 Golang中使用第三方包\"></a>11.6 Golang中使用第三方包</h4><p>我们可以在<a href=\"https://pkg.go.dev/\">Go Packages - Go Packages</a>查找看常见的Golang第三方包。</p>\n<p><strong>找到我们需要下载安装的第三方包的地址</strong></p>\n<p>比如解决float精度损失的包decimal</p>\n<p><a href=\"https://github.com/shopspring/decimal\">https://github.com/shopspring/decimal</a></p>\n<p><strong>安装这个包</strong></p>\n<p>第一种方法：<code>go get 包名称</code> （全局）</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> get github</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">com</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\">shopspring</span><span style=\"color: #89DDFF\">/</span><span style=\"color: #BABED8\">decimal</span></span></code></pre></div><p>第二种方法：<code>go mod download</code> （全局）</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> mod download</span></span></code></pre></div><p>依赖包会自动下载到<code>$GOPATH/pkg/mod</code>，多个项目可以共享缓存的<code>mod</code>，注意使用<code>go mod download</code>的时候首先需要在你的项目里面引入第三方包。</p>\n<p>第三种方法：<code>go mod vendor</code> 将依赖复制到当前项目的vendor下 （本项目）</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">go</span><span style=\"color: #BABED8\"> mod vendor</span></span></code></pre></div><p>将依赖复制到当前项目的<code>vendor</code>下。</p>\n<p><strong>注意：使用<code>go mod vendor</code>的时候首先需要在你的项目里面引入第三方包。</strong></p>\n<p><strong>看文档使用这个包</strong></p>\n<p>包安装完毕后我们就可以看文档使用这个包了…</p>\n<hr>\n<h3 id=\"模块十二：文件管理\"><a href=\"#模块十二：文件管理\" class=\"headerlink\" title=\"模块十二：文件管理\"></a>模块十二：文件管理</h3><h4 id=\"12-1-学习目标\"><a href=\"#12-1-学习目标\" class=\"headerlink\" title=\"12.1 学习目标\"></a>12.1 学习目标</h4><ol>\n<li>了解文件操作的相关api</li>\n<li>了解基本的文件操作：打开关闭文件、读取文件、写入文件、拷贝文件、重命名文件、创建目录、删除目录或文件等</li>\n</ol>\n<h4 id=\"12-2-相关API\"><a href=\"#12-2-相关API\" class=\"headerlink\" title=\"12.2 相关API\"></a>12.2 相关API</h4><ol>\n<li><p>根据提供的文件名创建新的文件，返回一个文件对象，默认权限是0666</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Create</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err Error</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div></li>\n<li><p>根据文件描述符创建相应的文件，返回一个文件对象</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">NewFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">fd </span><span style=\"color: #C792EA\">uintptr</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span></span></code></pre></div></li>\n<li><p>只读方式打开一个名称为name的文件</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Open</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err Error</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div></li>\n<li><p>打开名称为name的文件，flag是打开的方式，只读、读写等，perm是权限</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">OpenFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> flag </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> perm </span><span style=\"color: #C792EA\">uint32</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err Error</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div></li>\n<li><p>写入byte类型的信息到文件</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Write</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">b </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">n </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err Error</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div></li>\n<li><p>在指定位置开始写入byte类型的信息</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">WriteAt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">b </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> off </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">n </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err Error</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div></li>\n<li><p>写入string信息到文件</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">s </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">ret </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err Error</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div></li>\n<li><p>读取数据到b中</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Read</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">b </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">n </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err Error</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div></li>\n<li><p>从off开始读取数据到b中</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">ReadAt</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">b </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> off </span><span style=\"color: #C792EA\">int64</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">n </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err Error</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div></li>\n<li><p>删除文件名为name的文件</p>\n</li>\n</ol>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">```go</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">func Remove(name string) Error</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">```</span></span></code></pre></div><h4 id=\"12-3-打开和关闭文件\"><a href=\"#12-3-打开和关闭文件\" class=\"headerlink\" title=\"12.3 打开和关闭文件\"></a>12.3 打开和关闭文件</h4><h5 id=\"12-3-1-os-Open\"><a href=\"#12-3-1-os-Open\" class=\"headerlink\" title=\"12.3.1 os.Open()\"></a>12.3.1 os.Open()</h5><p><code>os.Open()</code>函数能够打开一个文件，返回一个<code>*File</code>和一个<code>err</code>。对得到的文件实例调用<code>close()方法</code>能够关闭文件（一定不要忘记关闭文件）。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">os</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 只读方式打开当前目录下的main.go文件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    file</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Open</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">./main.go</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">open file failed!, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 关闭文件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Close</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"12-3-2-os-OpenFile\"><a href=\"#12-3-2-os-OpenFile\" class=\"headerlink\" title=\"12.3.2 os.OpenFile()\"></a>12.3.2 os.OpenFile()</h5><p><code>os.OpenFile()函数</code>能够以指定模式打开文件，从而实现文件写入相关功能。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">OpenFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">name </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> flag </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> perm FileMode</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #C792EA\">error</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">...</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><p>其中： <code>name</code>：要打开的文件名，<code>flag</code>：打开文件的模式。</p>\n<p>模式有以下几种：</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">模式</th>\n<th align=\"left\">含义</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"left\">os.O_WRONLY</td>\n<td align=\"left\">只写</td>\n</tr>\n<tr>\n<td align=\"left\">os.O_CREATE</td>\n<td align=\"left\">创建文件</td>\n</tr>\n<tr>\n<td align=\"left\">os.O_RDONLY</td>\n<td align=\"left\">只读</td>\n</tr>\n<tr>\n<td align=\"left\">os.O_RDWR</td>\n<td align=\"left\">读写</td>\n</tr>\n<tr>\n<td align=\"left\">os.O_TRUNC</td>\n<td align=\"left\">清空</td>\n</tr>\n<tr>\n<td align=\"left\">os.O_APPEND</td>\n<td align=\"left\">追加</td>\n</tr>\n</tbody></table>\n<h4 id=\"12-4-读取文件\"><a href=\"#12-4-读取文件\" class=\"headerlink\" title=\"12.4 读取文件\"></a>12.4 读取文件</h4><h5 id=\"12-4-1-file-Read-和file-ReadAt\"><a href=\"#12-4-1-file-Read-和file-ReadAt\" class=\"headerlink\" title=\"12.4.1 file.Read()和file.ReadAt()\"></a>12.4.1 file.Read()和file.ReadAt()</h5><p>文件读取可以用<code>file.Read()</code>和<code>file.ReadAt()</code>，读到文件末尾会返回<code>io.EOF</code>的错误。</p>\n<p>Read 方法定义如下：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">f </span><span style=\"color: #89DDFF\">*</span><span style=\"color: #BABED8\">File</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">Read</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">b </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">n </span><span style=\"color: #C792EA\">int</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #C792EA\">error</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>它接收一个字节切片，返回读取的字节数和可能的具体错误，读到文件末尾时会返回<code>0</code>和<code>io.EOF</code>。</p>\n<p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">io</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">os</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 只读方式打开当前目录下的 main.go 文件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    file</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Open</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">./main.go</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">open file failed!, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Close</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 使用 Read 方法读取数据，注意一次只会读取 128 个字节</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> tmp </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">128</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    n</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Read</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">tmp</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> io</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">EOF </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">文件读完了</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">read file failed, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">读取了</span><span style=\"color: #F07178\">%d</span><span style=\"color: #C3E88D\"> 字节数据</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> n</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">string</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">tmp</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #BABED8\">n</span><span style=\"color: #89DDFF\">]))</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><p><code>file.ReadAt()</code>的用法与此类似。</p>\n<h6 id=\"12-4-1-1-循环读取\"><a href=\"#12-4-1-1-循环读取\" class=\"headerlink\" title=\"12.4.1.1 循环读取\"></a>12.4.1.1 循环读取</h6><p>使用for循环读取文件中的所有数据。</p>\n<p>举个例子：</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">io</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">os</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 只读方式打开当前目录下的 main.go 文件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    file</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Open</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">./main.go</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">open file failed!, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Close</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">// 循环读取文件</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> content </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #C792EA\">byte</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">var</span><span style=\"color: #BABED8\"> tmp </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">128</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Read</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">tmp</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> io</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">EOF </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">文件读完了</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">break</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">read file failed, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        content </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">append</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">content</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> tmp</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #BABED8\">n</span><span style=\"color: #89DDFF\">]...)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">string</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">content</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"12-4-2-bufio-NewReader\"><a href=\"#12-4-2-bufio-NewReader\" class=\"headerlink\" title=\"12.4.2 bufio.NewReader()\"></a>12.4.2 bufio.NewReader()</h5><p><code>bufio包</code>实现了带缓冲区的读写，是对文件读写的封装</p>\n<p><code>bufio.NewReader()</code>缓冲读数据</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">bufio</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">io</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">os</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// bufio 按行读取示例</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    file</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Open</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">C:/test.txt</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">open file failed, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Close</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    reader </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> bufio</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">NewReader</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        line</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> reader</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ReadString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">\\n</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 注意是字符</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> io</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">EOF </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">len</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">line</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">                fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">line</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">文件读完了</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">break</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">read file failed, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">line</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"12-4-3-ioutil-ReadFile-（Go-1-16已废弃io-ioutil包）\"><a href=\"#12-4-3-ioutil-ReadFile-（Go-1-16已废弃io-ioutil包）\" class=\"headerlink\" title=\"12.4.3 ioutil.ReadFile()（Go 1.16已废弃io&#x2F;ioutil包）\"></a>12.4.3 ioutil.ReadFile()（Go 1.16已废弃io&#x2F;ioutil包）</h5><p><strong>修改（Go 1.16及以上版本）：ioutil.ReadFile() -&gt; os.ReadFile()</strong></p>\n<p><code>io/ioutil包</code>的<code>ReadFile()方法</code>能够读取完整的文件，只需要将文件名作为参数传入。</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">io/ioutil</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// ioutil.ReadFile 读取整个文件</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    content</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> ioutil</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ReadFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">./main.go</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">read file failed, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">string</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">content</span><span style=\"color: #89DDFF\">))</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"12-5-写入文件\"><a href=\"#12-5-写入文件\" class=\"headerlink\" title=\"12.5 写入文件\"></a>12.5 写入文件</h4><h5 id=\"12-5-1-file-Write-和file-WriteString\"><a href=\"#12-5-1-file-Write-和file-WriteString\" class=\"headerlink\" title=\"12.5.1 file.Write()和file.WriteString()\"></a>12.5.1 file.Write()和file.WriteString()</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">os</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    file</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">OpenFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">C:/test.txt</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">O_CREATE</span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\">os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">O_RDWR</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0666</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">open file failed, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Close</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    str </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">你好 golang</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Write</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #82AAFF\">byte</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">str</span><span style=\"color: #89DDFF\">))</span><span style=\"color: #BABED8\">        </span><span style=\"color: #676E95; font-style: italic\">// 写入字节切片数据</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">直接写入的字符串数据</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 直接写入字符串数据</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"12-5-2-bufio-NewWriter\"><a href=\"#12-5-2-bufio-NewWriter\" class=\"headerlink\" title=\"12.5.2 bufio.NewWriter()\"></a>12.5.2 bufio.NewWriter()</h5><p><code>bufio.NewWriter()</code>缓冲写数据</p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">bufio</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">os</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    file</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">OpenFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">C:/test.txt</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">O_CREATE</span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\">os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">O_TRUNC</span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\">os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">O_WRONLY</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0666</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">open file failed, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">defer</span><span style=\"color: #BABED8\"> file</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Close</span><span style=\"color: #89DDFF\">()</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    writer </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> bufio</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">NewWriter</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">file</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i </span><span style=\"color: #89DDFF\">&lt;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">10</span><span style=\"color: #89DDFF\">;</span><span style=\"color: #BABED8\"> i</span><span style=\"color: #89DDFF\">++</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        writer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteString</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">你好 golang</span><span style=\"color: #BABED8\">\\r\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 将数据先写入缓存</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    writer</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Flush</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 将缓存中的内容写入文件（注意）</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"12-5-3-ioutil-WriteFile-（Go-1-16已废弃io-ioutil包）\"><a href=\"#12-5-3-ioutil-WriteFile-（Go-1-16已废弃io-ioutil包）\" class=\"headerlink\" title=\"12.5.3 ioutil.WriteFile()（Go 1.16已废弃io&#x2F;ioutil包）\"></a>12.5.3 ioutil.WriteFile()（Go 1.16已废弃io&#x2F;ioutil包）</h5><p><strong>修改（Go 1.16及以上版本）：ioutil.WriteFile() -&gt; os.WriteFile()</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">io/ioutil</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    str </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">hello golang</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> ioutil</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">C:/test.txt</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">[]</span><span style=\"color: #82AAFF\">byte</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">str</span><span style=\"color: #89DDFF\">),</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0666</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">write file failed, err:</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"12-6-拷贝文件\"><a href=\"#12-6-拷贝文件\" class=\"headerlink\" title=\"12.6 拷贝文件\"></a>12.6 拷贝文件</h4><h5 id=\"12-6-1-第一种拷贝文件方法：ioutil包进行拷贝\"><a href=\"#12-6-1-第一种拷贝文件方法：ioutil包进行拷贝\" class=\"headerlink\" title=\"12.6.1 第一种拷贝文件方法：ioutil包进行拷贝\"></a>12.6.1 第一种拷贝文件方法：ioutil包进行拷贝</h5><p><strong>修改（Go 1.16及以上版本）：ioutil -&gt; os</strong></p>\n<div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">io/ioutil</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 自己编写一个函数，接收两个文件路径 srcFileName dstFileName</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">CopyFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">dstFileName </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> srcFileName </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err </span><span style=\"color: #C792EA\">error</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    input</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> ioutil</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">ReadFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">srcFileName</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> err</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    err </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> ioutil</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">WriteFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">dstFileName</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> input</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0644</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Error creating</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> dstFileName</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> err</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    srcFile </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">c:/test1.zip</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    dstFile </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">D:/test1.zip</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">CopyFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">dstFile</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> srcFile</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">拷贝完成</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">拷贝错误 err=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h5 id=\"12-6-2-第二种拷贝文件方法：文件流的方式拷贝\"><a href=\"#12-6-2-第二种拷贝文件方法：文件流的方式拷贝\" class=\"headerlink\" title=\"12.6.2 第二种拷贝文件方法：文件流的方式拷贝\"></a>12.6.2 第二种拷贝文件方法：文件流的方式拷贝</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">package</span><span style=\"color: #BABED8\"> </span><span style=\"color: #FFCB6B\">main</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">import</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">fmt</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">io</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #FFCB6B\">os</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 自己编写一个函数，接收两个文件路径 srcFileName dstFileName</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">CopyFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">dstFileName </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> srcFileName </span><span style=\"color: #C792EA\">string</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err </span><span style=\"color: #C792EA\">error</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    source</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _ </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Open</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">srcFileName</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    destination</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> _ </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">OpenFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">dstFileName</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">O_CREATE</span><span style=\"color: #89DDFF\">|</span><span style=\"color: #BABED8\">os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">O_WRONLY</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0666</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    buf </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">make</span><span style=\"color: #89DDFF\">([]</span><span style=\"color: #C792EA\">byte</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">128</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        n</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> source</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Read</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">buf</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&amp;&amp;</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> io</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #BABED8\">EOF </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> err</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> n </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">break</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> _</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> destination</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Write</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">buf</span><span style=\"color: #89DDFF\">[:</span><span style=\"color: #BABED8\">n</span><span style=\"color: #89DDFF\">]);</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">            </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> err</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">return</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">func</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">main</span><span style=\"color: #89DDFF\">()</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #676E95; font-style: italic\">//调用 CopyFile 完成文件拷贝</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    srcFile </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">c:/000.avi</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    dstFile </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">D:/000.avi</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">CopyFile</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">dstFile</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> srcFile</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">==</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">拷贝完成</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF; font-style: italic\">else</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Printf</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">拷贝错误 err=</span><span style=\"color: #F07178\">%v</span><span style=\"color: #BABED8\">\\n</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"></span></code></pre></div><h4 id=\"12-7-重命名文件\"><a href=\"#12-7-重命名文件\" class=\"headerlink\" title=\"12.7 重命名文件\"></a>12.7 重命名文件</h4><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Rename</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">C:/test1.txt</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">C:/test2.txt</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">// 只能同盘操作</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"12-8-创建目录\"><a href=\"#12-8-创建目录\" class=\"headerlink\" title=\"12.8 创建目录\"></a>12.8 创建目录</h4><h5 id=\"12-8-1-一次创建一个目录\"><a href=\"#12-8-1-一次创建一个目录\" class=\"headerlink\" title=\"12.8.1 一次创建一个目录\"></a>12.8.1 一次创建一个目录</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Mkdir</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">./abc</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0666</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"12-8-2-一次创建多个目录\"><a href=\"#12-8-2-一次创建多个目录\" class=\"headerlink\" title=\"12.8.2 一次创建多个目录\"></a>12.8.2 一次创建多个目录</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">MkdirAll</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">dir1/dir2/dir3</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #BABED8\"> </span><span style=\"color: #F78C6C\">0666</span><span style=\"color: #89DDFF\">)</span><span style=\"color: #BABED8\"> </span><span style=\"color: #676E95; font-style: italic\">//创建多级目录</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h4 id=\"12-9-删除目录和文件\"><a href=\"#12-9-删除目录和文件\" class=\"headerlink\" title=\"12.9 删除目录和文件\"></a>12.9 删除目录和文件</h4><h5 id=\"12-9-1-删除一个目录或者文件\"><a href=\"#12-9-1-删除一个目录或者文件\" class=\"headerlink\" title=\"12.9.1 删除一个目录或者文件\"></a>12.9.1 删除一个目录或者文件</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Remove</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">t.txt</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><h5 id=\"12-9-2-一次删除多个目录或者文件\"><a href=\"#12-9-2-一次删除多个目录或者文件\" class=\"headerlink\" title=\"12.9.2 一次删除多个目录或者文件\"></a>12.9.2 一次删除多个目录或者文件</h5><div class=\"language-go\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">go</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">err </span><span style=\"color: #89DDFF\">:=</span><span style=\"color: #BABED8\"> os</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">RemoveAll</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">aaa</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #BABED8\"> err </span><span style=\"color: #89DDFF\">!=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">nil</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    fmt</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">Println</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #BABED8\">err</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span></code></pre></div><hr>\n<h3 id=\"后记\"><a href=\"#后记\" class=\"headerlink\" title=\"后记\"></a>后记</h3><p><strong>Go基础还应包括：GoWeb、GoSocket、Go数据库等等，如果有机会，博主再与大家介绍分享。。。</strong></p>\n<p>本篇文档欢迎任何人进行转载，但是必须标注来源！！！</p>\n<p>Article link： <a href=\"https://tqgoblin.site/post/csdn/Golang%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8/\">https://tqgoblin.site/post/csdn/Golang基础入门/</a> <div align=left> Author：<a href=\"https://www.tqgoblin.site\"> Stephen </a> </div></p>\n","text":" 文章目录 Golang基础入门 0.1 简介 0.2 先决条件 0.3 参考文献 模块一：初识Go 1.1 什么是 Golang？ 1.1.1 Go发展历史 ...","permalink":"/post/csdn/Golang基础入门","photos":[],"count_time":{"symbolsCount":"159k","symbolsTime":"2:25"},"categories":[{"name":"go语言学习","slug":"go语言学习","count":1,"path":"api/categories/go语言学习.json"}],"tags":[{"name":"golang","slug":"golang","count":1,"path":"api/tags/golang.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">文章目录</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Golang%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8\"><span class=\"toc-text\">Golang基础入门</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#0-1-%E7%AE%80%E4%BB%8B\"><span class=\"toc-text\">0.1 简介</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#0-2-%E5%85%88%E5%86%B3%E6%9D%A1%E4%BB%B6\"><span class=\"toc-text\">0.2 先决条件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#0-3-%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE\"><span class=\"toc-text\">0.3 参考文献</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E4%B8%80%EF%BC%9A%E5%88%9D%E8%AF%86Go\"><span class=\"toc-text\">模块一：初识Go</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#1-1-%E4%BB%80%E4%B9%88%E6%98%AF-Golang%EF%BC%9F\"><span class=\"toc-text\">1.1 什么是 Golang？</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-1-1-Go%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2\"><span class=\"toc-text\">1.1.1 Go发展历史</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-1-2-Go%E7%9A%84%E4%BC%98%E5%8A%A3\"><span class=\"toc-text\">1.1.2 Go的优劣</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-1-3-Go%E7%9A%84%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF\"><span class=\"toc-text\">1.1.3 Go的应用场景</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E4%BA%8C%EF%BC%9AGo%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">模块二：Go环境配置</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">2.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-2-%E5%AE%89%E8%A3%85Golang\"><span class=\"toc-text\">2.2 安装Golang</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-3-%E9%85%8D%E7%BD%AEGOPATH%EF%BC%9F\"><span class=\"toc-text\">2.3 配置GOPATH？</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-4-VSCode%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E9%85%8D%E7%BD%AE\"><span class=\"toc-text\">2.4 VSCode的安装及配置</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-5-%E7%AC%AC%E4%B8%80%E4%B8%AAGolang%E7%A8%8B%E5%BA%8F\"><span class=\"toc-text\">2.5 第一个Golang程序</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-6-VSCode%E7%9A%84Go%E5%B7%A5%E5%85%B7%E6%8F%92%E4%BB%B6%EF%BC%88%E4%B8%80%EF%BC%89\"><span class=\"toc-text\">2.6 VSCode的Go工具插件（一）</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-7-%E4%BB%80%E4%B9%88%E6%98%AFGOROOT%EF%BC%8CGOPATH%EF%BC%8CGOPROXY%EF%BC%8CGO111MODULE%EF%BC%9F\"><span class=\"toc-text\">2.7 什么是GOROOT，GOPATH，GOPROXY，GO111MODULE？</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2-7-1-%E9%85%8D%E7%BD%AEGOROOT\"><span class=\"toc-text\">2.7.1 配置GOROOT</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2-7-2-%E9%85%8D%E7%BD%AEGOPROXY%E5%92%8CGO111MODULE\"><span class=\"toc-text\">2.7.2 配置GOPROXY和GO111MODULE</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-8-VSCode%E7%9A%84Go%E5%B7%A5%E5%85%B7%E6%8F%92%E4%BB%B6%EF%BC%88%E4%BA%8C%EF%BC%89\"><span class=\"toc-text\">2.8 VSCode的Go工具插件（二）</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#2-9-go-mod%EF%BC%8Cgo-work%E5%91%BD%E4%BB%A4%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">2.9 go mod，go work命令介绍</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2-9-1-GOPATH%E9%85%8D%E7%BD%AE%EF%BC%88%E5%8F%AF%E4%BB%A5%E4%B8%8D%E9%85%8D%EF%BC%8C%E4%BD%BF%E7%94%A8go-mod%E7%AE%A1%E7%90%86%EF%BC%89\"><span class=\"toc-text\">2.9.1 GOPATH配置（可以不配，使用go mod管理）</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8B%93%E5%B1%951%EF%BC%9AVSCode%E6%96%87%E4%BB%B6%E5%A4%B9%E5%88%86%E5%B1%82%E6%98%BE%E7%A4%BA\"><span class=\"toc-text\">拓展1：VSCode文件夹分层显示</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8B%93%E5%B1%952%EF%BC%9AGoland%E7%9A%84%E6%96%B9%E4%BE%BF%E4%B9%8B%E5%A4%84%EF%BC%88%E5%B0%8F%E7%89%B9%E6%80%A7%EF%BC%89\"><span class=\"toc-text\">拓展2：Goland的方便之处（小特性）</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E4%B8%89%EF%BC%9AGo%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95\"><span class=\"toc-text\">模块三：Go基础语法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">3.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-2-%E6%A0%87%E8%AF%86%E7%AC%A6%E4%B8%8E%E5%85%B3%E9%94%AE%E5%AD%97\"><span class=\"toc-text\">3.2 标识符与关键字</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-2-1-Go%E5%85%B3%E9%94%AE%E5%AD%97\"><span class=\"toc-text\">3.2.1 Go关键字</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-2-2-%E5%B8%B8%E9%87%8F\"><span class=\"toc-text\">3.2.2 常量</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-2-3-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">3.2.3 数据类型</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-2-4-%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">3.2.4 函数</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-3-%E6%93%8D%E4%BD%9C%E7%AC%A6%E4%B8%8E%E8%A1%A8%E8%BE%BE%E5%BC%8F\"><span class=\"toc-text\">3.3 操作符与表达式</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-3-1-%E7%AE%97%E6%B3%95%E6%9C%AF%E8%BF%90%E7%AE%97%E7%AC%A6\"><span class=\"toc-text\">3.3.1 算法术运算符</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-3-2-%E5%85%B3%E7%B3%BB%E8%BF%90%E7%AE%97%E7%AC%A6\"><span class=\"toc-text\">3.3.2 关系运算符</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-3-3-%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97%E7%AC%A6\"><span class=\"toc-text\">3.3.3 逻辑运算符</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-3-4-%E4%BD%8D%E8%BF%90%E7%AE%97%E7%AC%A6\"><span class=\"toc-text\">3.3.4 位运算符</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-3-5-%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97%E7%AC%A6\"><span class=\"toc-text\">3.3.5 赋值运算符</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-4-%E5%8F%98%E9%87%8F%E3%80%81%E5%B8%B8%E9%87%8F%E3%80%81%E5%AD%97%E9%9D%A2%E9%87%8F\"><span class=\"toc-text\">3.4 变量、常量、字面量</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-4-1-%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">3.4.1 变量</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#3-4-1-1-%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">3.4.1.1 变量类型</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#3-4-1-2-%E5%8F%98%E9%87%8F%E5%A3%B0%E6%98%8E\"><span class=\"toc-text\">3.4.1.2 变量声明</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#3-4-1-3-%E5%8F%98%E9%87%8F%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">3.4.1.3 变量的初始化</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-4-2-%E5%B8%B8%E9%87%8F\"><span class=\"toc-text\">3.4.2 常量</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#3-4-2-1-iota\"><span class=\"toc-text\">3.4.2.1 iota</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-4-3-%E5%AD%97%E9%9D%A2%E9%87%8F\"><span class=\"toc-text\">3.4.3 字面量</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-4-4-%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F\"><span class=\"toc-text\">3.4.4 变量作用域</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-5-%E6%B3%A8%E9%87%8A\"><span class=\"toc-text\">3.5 注释</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-5-1-%E6%B3%A8%E9%87%8A%E7%9A%84%E5%BD%A2%E5%BC%8F\"><span class=\"toc-text\">3.5.1 注释的形式</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-5-2-%E6%B3%A8%E9%87%8A%E7%9A%84%E4%BD%8D%E7%BD%AE\"><span class=\"toc-text\">3.5.2 注释的位置</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-6-Go-%E8%AF%AD%E8%A8%80%E5%8F%98%E9%87%8F%E3%80%81%E5%B8%B8%E9%87%8F%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99\"><span class=\"toc-text\">3.6 Go 语言变量、常量命名规则</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#3-7-Go-%E8%AF%AD%E8%A8%80%E4%BB%A3%E7%A0%81%E9%A3%8E%E6%A0%BC\"><span class=\"toc-text\">3.7 Go 语言代码风格</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E5%9B%9B%EF%BC%9AGo%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">模块四：Go数据类型</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">4.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-2-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E6%A6%82%E8%A7%88\"><span class=\"toc-text\">4.2 数据类型概览</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-2-1-%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">4.2.1 基础数据类型</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-2-2-%E5%A4%8D%E5%90%88%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">4.2.2 复合数据类型</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-2-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">4.2.3 自定义类型</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-3-%E6%95%B0%E7%BB%84\"><span class=\"toc-text\">4.3 数组</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-3-1-%E6%95%B0%E7%BB%84%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">4.3.1 数组的初始化</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#4-3-1-1-%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">4.3.1.1 一维数组初始化</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#4-3-1-2-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">4.3.1.2 二维数组初始化</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-3-2-%E8%AE%BF%E9%97%AE%E6%95%B0%E7%BB%84%E9%87%8C%E7%9A%84%E5%85%83%E7%B4%A0\"><span class=\"toc-text\">4.3.2 访问数组里的元素</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-3-3-%E9%81%8D%E5%8E%86%E6%95%B0%E7%BB%84\"><span class=\"toc-text\">4.3.3 遍历数组</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-3-4-%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0-len-%E5%92%8C-cap\"><span class=\"toc-text\">4.3.4 内置函数 len() 和 cap()</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-3-5-%E6%95%B0%E7%BB%84%E6%8B%B7%E8%B4%9D%E5%92%8C%E4%BC%A0%E5%8F%82\"><span class=\"toc-text\">4.3.5 数组拷贝和传参</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-4-%E5%88%87%E7%89%87\"><span class=\"toc-text\">4.4 切片</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-4-1-%E5%88%9B%E5%BB%BA%E5%88%87%E7%89%87%E7%9A%84%E5%90%84%E7%A7%8D%E6%96%B9%E5%BC%8F\"><span class=\"toc-text\">4.4.1 创建切片的各种方式</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-4-2-%E5%88%87%E7%89%87%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">4.4.2 切片的初始化</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-4-3-%E9%80%9A%E8%BF%87make%E6%9D%A5%E5%88%9B%E5%BB%BA%E5%88%87%E7%89%87\"><span class=\"toc-text\">4.4.3 通过make来创建切片</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-4-4-%E7%94%A8append%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E6%93%8D%E4%BD%9C%E5%88%87%E7%89%87%EF%BC%88%E5%88%87%E7%89%87%E8%BF%BD%E5%8A%A0%EF%BC%89\"><span class=\"toc-text\">4.4.4 用append内置函数操作切片（切片追加）</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-4-5-slice%E4%B8%ADcap%E9%87%8D%E6%96%B0%E5%88%86%E9%85%8D%E8%A7%84%E5%BE%8B\"><span class=\"toc-text\">4.4.5 slice中cap重新分配规律</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-4-6-%E5%88%87%E7%89%87%E7%9A%84%E6%8B%B7%E8%B4%9D\"><span class=\"toc-text\">4.4.6 切片的拷贝</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-4-7-%E5%88%87%E7%89%87resize%EF%BC%88%E8%B0%83%E6%95%B4%E5%A4%A7%E5%B0%8F%EF%BC%89\"><span class=\"toc-text\">4.4.7 切片resize（调整大小）</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-4-8-%E5%88%87%E7%89%87%E7%9A%84%E4%BC%A0%E5%8F%82\"><span class=\"toc-text\">4.4.8 切片的传参</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-5-%E5%AD%97%E7%AC%A6%E4%B8%B2\"><span class=\"toc-text\">4.5 字符串</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-5-1-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">4.5.1 字符串常用操作</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-5-2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5\"><span class=\"toc-text\">4.5.2 字符串拼接</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-5-3-%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6\"><span class=\"toc-text\">4.5.3 字符串中的字符</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-6-%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2\"><span class=\"toc-text\">4.6 数据类型转换</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-6-1-string%E5%92%8C%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E4%BA%92%E8%BD%AC\"><span class=\"toc-text\">4.6.1 string和其他数据类型互转</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-7-map\"><span class=\"toc-text\">4.7 map</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-7-1-map%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">4.7.1 map定义</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-7-2-map%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">4.7.2 map的初始化</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-7-3-%E6%B7%BB%E5%8A%A0%E5%92%8C%E5%88%A0%E9%99%A4key\"><span class=\"toc-text\">4.7.3 添加和删除key</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-7-4-%E5%88%A4%E6%96%AD%E6%9F%90%E4%B8%AA%E9%94%AE%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8\"><span class=\"toc-text\">4.7.4 判断某个键是否存在</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-7-5-%E9%81%8D%E5%8E%86map\"><span class=\"toc-text\">4.7.5 遍历map</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-7-6-%E6%8C%89%E7%85%A7%E6%8C%87%E5%AE%9A%E9%A1%BA%E5%BA%8F%E9%81%8D%E5%8E%86map\"><span class=\"toc-text\">4.7.6 按照指定顺序遍历map</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-7-7-%E5%85%83%E7%B4%A0%E4%B8%BAmap%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%88%87%E7%89%87\"><span class=\"toc-text\">4.7.7 元素为map类型的切片</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-7-8-%E5%80%BC%E4%B8%BA%E5%88%87%E7%89%87%E7%B1%BB%E5%9E%8B%E7%9A%84map\"><span class=\"toc-text\">4.7.8 值为切片类型的map</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#4-7-9-map%E7%9A%84%E9%94%AE%E5%80%BC%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">4.7.9 map的键值类型</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#4-8-channel%EF%BC%88%E5%88%9D%E6%AD%A5%E4%BA%86%E8%A7%A3%EF%BC%89\"><span class=\"toc-text\">4.8 channel（初步了解）</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8B%93%E5%B1%95%EF%BC%9A%E4%BD%BF%E7%94%A8map%E5%AE%9E%E7%8E%B0hashset\"><span class=\"toc-text\">拓展：使用map实现hashset</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E4%BA%94%EF%BC%9A%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6\"><span class=\"toc-text\">模块五：流程控制</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">5.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-2-if\"><span class=\"toc-text\">5.2 if</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-2-1-if-else%E7%9A%84%E7%94%A8%E6%B3%95\"><span class=\"toc-text\">5.2.1 if-else的用法</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-2-2-if%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%B5%8C%E5%A5%97\"><span class=\"toc-text\">5.2.2 if表达式嵌套</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-3-switch\"><span class=\"toc-text\">5.3 switch</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-3-1-switch-case\"><span class=\"toc-text\">5.3.1 switch-case</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-3-2-switch%E4%B8%8D%E5%B8%A6%E4%B8%8E%E5%90%8E%E5%B8%A6%E8%A1%A8%E8%BE%BE%E5%BC%8F\"><span class=\"toc-text\">5.3.2 switch不带与后带表达式</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-3-3-switch-Type\"><span class=\"toc-text\">5.3.3 switch Type</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-3-4-fallthrough\"><span class=\"toc-text\">5.3.4 fallthrough</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-4-for\"><span class=\"toc-text\">5.4 for</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-4-1-for-init-condition-post\"><span class=\"toc-text\">5.4.1 for init; condition; post { }</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-4-2-for-condition\"><span class=\"toc-text\">5.4.2 for condition { }</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-4-3-for\"><span class=\"toc-text\">5.4.3 for { }</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-4-4-for%E5%BE%AA%E7%8E%AF%E5%B5%8C%E5%A5%97\"><span class=\"toc-text\">5.4.4 for循环嵌套</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#5-4-5-for-range\"><span class=\"toc-text\">5.4.5 for range</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#5-4-5-1-for%E5%92%8Cfor-range%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">5.4.5.1 for和for range有什么区别?</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-4-6-break%E4%B8%8Econtinue\"><span class=\"toc-text\">5.4.6 break与continue</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#5-4-7-goto%E4%B8%8ELabel\"><span class=\"toc-text\">5.4.7 goto与Label</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E5%85%AD%EF%BC%9A%E7%BB%93%E6%9E%84%E4%BD%93\"><span class=\"toc-text\">模块六：结构体</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">6.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-2-Golang%E7%BB%93%E6%9E%84%E4%BD%93\"><span class=\"toc-text\">6.2 Golang结构体</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-3-Golang-type%E5%85%B3%E9%94%AE%E8%AF%8D%E8%87%AA%E5%AE%9A%E4%B9%89%E7%B1%BB%E5%9E%8B%E5%92%8C%E7%B1%BB%E5%9E%8B%E5%88%AB%E5%90%8D\"><span class=\"toc-text\">6.3 Golang type关键词自定义类型和类型别名</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-4-%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">6.4 结构体的定义</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-4-1-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9E%E4%BE%8B%E5%8C%96%EF%BC%88%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89\"><span class=\"toc-text\">6.4.1 结构体实例化（第一种方法）</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-4-2-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9E%E4%BE%8B%E5%8C%96%EF%BC%88%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89\"><span class=\"toc-text\">6.4.2 结构体实例化（第二种方法）</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-4-3-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9E%E4%BE%8B%E5%8C%96%EF%BC%88%E7%AC%AC%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89\"><span class=\"toc-text\">6.4.3 结构体实例化（第三种方法）</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-4-4-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9E%E4%BE%8B%E5%8C%96%EF%BC%88%E7%AC%AC%E5%9B%9B%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89-%E9%94%AE%E5%80%BC%E5%AF%B9%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">6.4.4 结构体实例化（第四种方法） 键值对初始化</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-4-5-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9E%E4%BE%8B%E5%8C%96%EF%BC%88%E7%AC%AC%E4%BA%94%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89-%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88%E8%BF%9B%E8%A1%8C%E9%94%AE%E5%80%BC%E5%AF%B9%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">6.4.5 结构体实例化（第五种方法） 结构体指针进行键值对初始化</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-4-6-%E7%BB%93%E6%9E%84%E4%BD%93%E5%AE%9E%E4%BE%8B%E5%8C%96%EF%BC%88%E7%AC%AC%E5%85%AD%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%89-%E4%BD%BF%E7%94%A8%E5%80%BC%E7%9A%84%E5%88%97%E8%A1%A8%E5%88%9D%E5%A7%8B%E5%8C%96\"><span class=\"toc-text\">6.4.6 结构体实例化（第六种方法） 使用值的列表初始化</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-5-%E7%BB%93%E6%9E%84%E4%BD%93%E5%86%85%E5%AD%98%E5%B8%83%E5%B1%80\"><span class=\"toc-text\">6.5 结构体内存布局</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-6-%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%8F%AF%E8%A7%81%E6%80%A7\"><span class=\"toc-text\">6.6 结构体的可见性</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-7-%E5%8C%BF%E5%90%8D%E7%BB%93%E6%9E%84%E4%BD%93\"><span class=\"toc-text\">6.7 匿名结构体</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-8-%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%AD%E5%90%AB%E6%9C%89%E5%8C%BF%E5%90%8D%E6%88%90%E5%91%98\"><span class=\"toc-text\">6.8 结构体中含有匿名成员</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-9-%E7%BB%93%E6%9E%84%E4%BD%93%E6%8C%87%E9%92%88\"><span class=\"toc-text\">6.9 结构体指针</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-9-1-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">6.9.1 构造函数</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-10-%E6%96%B9%E6%B3%95%E5%92%8C%E6%8E%A5%E6%94%B6%E8%80%85\"><span class=\"toc-text\">6.10 方法和接收者</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-10-1-%E6%8C%87%E9%92%88%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%8E%A5%E6%94%B6%E8%80%85\"><span class=\"toc-text\">6.10.1 指针类型的接收者</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-10-2-%E5%80%BC%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%8E%A5%E6%94%B6%E8%80%85\"><span class=\"toc-text\">6.10.2 值类型的接收者</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-10-3-%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%BA%94%E8%AF%A5%E4%BD%BF%E7%94%A8%E6%8C%87%E9%92%88%E7%B1%BB%E5%9E%8B%E6%8E%A5%E6%94%B6%E8%80%85\"><span class=\"toc-text\">6.10.3 什么时候应该使用指针类型接收者</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-10-4-%E4%BB%BB%E6%84%8F%E7%B1%BB%E5%9E%8B%E6%B7%BB%E5%8A%A0%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">6.10.4 任意类型添加方法</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-11-%E5%B5%8C%E5%A5%97%E7%BB%93%E6%9E%84%E4%BD%93\"><span class=\"toc-text\">6.11 嵌套结构体</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-11-1-%E5%B5%8C%E5%A5%97%E5%8C%BF%E5%90%8D%E7%BB%93%E6%9E%84%E4%BD%93\"><span class=\"toc-text\">6.11.1 嵌套匿名结构体</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#6-11-2-%E5%B5%8C%E5%A5%97%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E5%AD%97%E6%AE%B5%E5%90%8D%E5%86%B2%E7%AA%81\"><span class=\"toc-text\">6.11.2 嵌套结构体的字段名冲突</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-12-%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E2%80%9C%E7%BB%A7%E6%89%BF%E2%80%9D\"><span class=\"toc-text\">6.12 结构体的“继承”</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#6-13-%E6%B7%B1%E6%8B%B7%E8%B4%9D%E4%B8%8E%E6%B5%85%E6%8B%B7%E8%B4%9D\"><span class=\"toc-text\">6.13 深拷贝与浅拷贝</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%8B%93%E5%B1%95%EF%BC%9AGolang%E7%BB%93%E6%9E%84%E4%BD%93%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96\"><span class=\"toc-text\">拓展：Golang结构体序列化与反序列化</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#1-%E5%85%B3%E4%BA%8E-JSON-%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">1.关于 JSON 数据</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#2-%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%8E-JSON-%E5%BA%8F%E5%88%97%E5%8C%96\"><span class=\"toc-text\">2.结构体与 JSON 序列化</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#3-%E7%BB%93%E6%9E%84%E4%BD%93%E6%A0%87%E7%AD%BE-Tag\"><span class=\"toc-text\">3.结构体标签 Tag</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E4%B8%83%EF%BC%9A%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">模块七：函数</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">7.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-2-%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">7.2 函数定义</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-3-%E5%87%BD%E6%95%B0%E8%B0%83%E7%94%A8\"><span class=\"toc-text\">7.3 函数调用</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-4-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">7.4 函数参数</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-4-1-%E7%B1%BB%E5%9E%8B%E7%AE%80%E5%86%99\"><span class=\"toc-text\">7.4.1 类型简写</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-4-2-%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">7.4.2 可变参数</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-5-%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC\"><span class=\"toc-text\">7.5 函数返回值</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-5-1-%E5%87%BD%E6%95%B0%E5%A4%9A%E8%BF%94%E5%9B%9E%E5%80%BC\"><span class=\"toc-text\">7.5.1 函数多返回值</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-5-2-%E8%BF%94%E5%9B%9E%E5%80%BC%E5%91%BD%E5%90%8D\"><span class=\"toc-text\">7.5.2 返回值命名</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-6-%E5%87%BD%E6%95%B0%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F\"><span class=\"toc-text\">7.6 函数变量作用域</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-6-1-%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">7.6.1 全局变量</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-6-2-%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">7.6.2 局部变量</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-7-%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">7.7 函数类型与变量</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-7-1-%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">7.7.1 定义函数类型</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-7-2-%E5%87%BD%E6%95%B0%E7%B1%BB%E5%9E%8B%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">7.7.2 函数类型变量</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-8-%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">7.8 高阶函数</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-8-1-%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">7.8.1 函数作为参数</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-8-2-%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E8%BF%94%E5%9B%9E%E5%80%BC\"><span class=\"toc-text\">7.8.2 函数作为返回值</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-9-%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0%E5%92%8C%E9%97%AD%E5%8C%85\"><span class=\"toc-text\">7.9 匿名函数和闭包</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-9-1-%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">7.9.1 匿名函数</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-9-2-%E9%97%AD%E5%8C%85\"><span class=\"toc-text\">7.9.2 闭包</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-9-2-1-%E9%97%AD%E5%8C%85%E8%BF%9B%E9%98%B6%E7%A4%BA%E4%BE%8B-1\"><span class=\"toc-text\">7.9.2.1 闭包进阶示例 1</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-9-2-2-%E9%97%AD%E5%8C%85%E8%BF%9B%E9%98%B6%E7%A4%BA%E4%BE%8B-2\"><span class=\"toc-text\">7.9.2.2 闭包进阶示例 2</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-9-2-3-%E9%97%AD%E5%8C%85%E8%BF%9B%E9%98%B6%E7%A4%BA%E4%BE%8B-3\"><span class=\"toc-text\">7.9.2.3 闭包进阶示例 3</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-10-defer-%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">7.10 defer 语句</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-10-1-%E8%A7%84%E5%88%99%E4%B8%80%EF%BC%9A%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0%E5%9C%A8defer%E8%AF%AD%E5%8F%A5%E5%87%BA%E7%8E%B0%E6%97%B6%E5%B0%B1%E5%B7%B2%E7%BB%8F%E7%A1%AE%E5%AE%9A%E4%B8%8B%E6%9D%A5%E4%BA%86\"><span class=\"toc-text\">7.10.1 规则一：延迟函数的参数在defer语句出现时就已经确定下来了</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-10-2-%E8%A7%84%E5%88%99%E4%BA%8C%EF%BC%9A%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E6%8C%89%E5%90%8E%E8%BF%9B%E5%85%88%E5%87%BA%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C%EF%BC%8C%E5%8D%B3%E5%85%88%E5%87%BA%E7%8E%B0%E7%9A%84defer%E6%9C%80%E5%90%8E%E6%89%A7%E8%A1%8C\"><span class=\"toc-text\">7.10.2 规则二：延迟函数执行按后进先出顺序执行，即先出现的defer最后执行</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-10-3-%E8%A7%84%E5%88%99%E4%B8%89%EF%BC%9A%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0%E5%8F%AF%E8%83%BD%E6%93%8D%E4%BD%9C%E4%B8%BB%E5%87%BD%E6%95%B0%E7%9A%84%E5%85%B7%E5%90%8D%E8%BF%94%E5%9B%9E%E5%80%BC\"><span class=\"toc-text\">7.10.3 规则三：延迟函数可能操作主函数的具名返回值</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-10-3-1-%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">7.10.3.1 函数返回过程</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-10-3-2-%E4%B8%BB%E5%87%BD%E6%95%B0%E6%8B%A5%E6%9C%89%E5%8C%BF%E5%90%8D%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%AD%97%E9%9D%A2%E5%80%BC\"><span class=\"toc-text\">7.10.3.2 主函数拥有匿名返回值，返回字面值</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-10-3-3-%E4%B8%BB%E5%87%BD%E6%95%B0%E6%8B%A5%E6%9C%89%E5%8C%BF%E5%90%8D%E8%BF%94%E5%9B%9E%E5%80%BC%EF%BC%8C%E8%BF%94%E5%9B%9E%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">7.10.3.3 主函数拥有匿名返回值，返回变量</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-10-3-4-%E4%B8%BB%E5%87%BD%E6%95%B0%E6%8B%A5%E6%9C%89%E5%85%B7%E5%90%8D%E8%BF%94%E5%9B%9E%E5%80%BC\"><span class=\"toc-text\">7.10.3.4 主函数拥有具名返回值</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#7-11-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86\"><span class=\"toc-text\">7.11 异常处理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#7-11-1-%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0-panic-recove\"><span class=\"toc-text\">7.11.1 内置函数 panic&#x2F;recove</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-11-1-1-panic-recover-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">7.11.1.1 panic&#x2F;recover 的基本使用</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-11-1-2-defer-%E3%80%81recover-%E5%AE%9E%E7%8E%B0%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86\"><span class=\"toc-text\">7.11.1.2 defer 、recover 实现异常处理</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#7-11-1-3-defer-%E3%80%81panic%E3%80%81recover-%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8\"><span class=\"toc-text\">7.11.1.3 defer 、panic、recover 抛出异常</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E5%85%AB%EF%BC%9A%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">模块八：面向对象</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">8.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-2-%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">8.2 接口</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-2-1-%E6%8E%A5%E5%8F%A3%E7%9A%84%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">8.2.1 接口的介绍</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-2-2-%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">8.2.2 接口的定义</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-2-3-%E7%A9%BA%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">8.2.3 空接口</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#8-2-3-1-%E7%A9%BA%E6%8E%A5%E5%8F%A3%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0\"><span class=\"toc-text\">8.2.3.1 空接口作为函数的参数</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#8-2-3-2-map%E7%9A%84%E5%80%BC%E5%AE%9E%E7%8E%B0%E7%A9%BA%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">8.2.3.2 map的值实现空接口</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#8-2-3-3-%E5%88%87%E7%89%87%E5%AE%9E%E7%8E%B0%E7%A9%BA%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">8.2.3.3 切片实现空接口</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-2-4-%E7%B1%BB%E5%9E%8B%E6%96%AD%E8%A8%80\"><span class=\"toc-text\">8.2.4 类型断言</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-2-5-%E5%80%BC%E6%8E%A5%E6%94%B6%E8%80%85%E5%92%8C%E6%8C%87%E9%92%88%E6%8E%A5%E6%94%B6%E8%80%85%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%8C%BA%E5%88%AB\"><span class=\"toc-text\">8.2.5 值接收者和指针接收者实现接口的区别</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#8-2-5-1-%E5%80%BC%E6%8E%A5%E6%94%B6%E8%80%85%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">8.2.5.1 值接收者实现接口</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#8-2-5-2-%E6%8C%87%E9%92%88%E6%8E%A5%E6%94%B6%E8%80%85%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">8.2.5.2 指针接收者实现接口</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-2-6-%E7%B1%BB%E5%9E%8B%E4%B8%8E%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%85%B3%E7%B3%BB\"><span class=\"toc-text\">8.2.6 类型与接口的关系</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#8-2-6-1-%E4%B8%80%E4%B8%AA%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E5%A4%9A%E4%B8%AA%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">8.2.6.1 一个类型实现多个接口</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#8-2-6-2-%E5%A4%9A%E4%B8%AA%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E5%90%8C%E4%B8%80%E6%8E%A5%E5%8F%A3\"><span class=\"toc-text\">8.2.6.2 多个类型实现同一接口</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-2-7-%E6%8E%A5%E5%8F%A3%E5%B5%8C%E5%A5%97\"><span class=\"toc-text\">8.2.7 接口嵌套</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-3-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">8.3 面向对象</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-3-1-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">8.3.1 面向对象的概念</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-3-2-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">8.3.2 构造函数</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#8-3-3-%E7%BB%A7%E6%89%BF%E4%B8%8E%E9%87%8D%E5%86%99\"><span class=\"toc-text\">8.3.3 继承与重写</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#8-4-%E6%B3%9B%E5%9E%8B\"><span class=\"toc-text\">8.4 泛型</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E4%B9%9D%EF%BC%9A%E5%8F%8D%E5%B0%84\"><span class=\"toc-text\">模块九：反射</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#9-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">9.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#9-2-%E5%8F%8D%E5%B0%84%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">9.2 反射介绍</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#9-3-%E5%8F%8D%E5%B0%84%E7%9A%84%E5%9F%BA%E7%A1%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">9.3 反射的基础数据类型</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#9-4-reflect-TypeOf\"><span class=\"toc-text\">9.4 reflect.TypeOf()</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-4-1-type-Name%E5%92%8Ctype-Kind\"><span class=\"toc-text\">9.4.1 type Name和type Kind</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-4-2-reflect%E5%8C%85%E4%B8%AD%E5%AE%9A%E4%B9%89%E7%9A%84Kind%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">9.4.2 reflect包中定义的Kind类型</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#9-5-reflect-ValueOf\"><span class=\"toc-text\">9.5 reflect.ValueOf()</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-5-1-%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E5%8E%9F%E5%A7%8B%E5%80%BC%E6%BC%94%E7%A4%BA1\"><span class=\"toc-text\">9.5.1 通过反射获取原始值演示1</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-5-2-%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E8%8E%B7%E5%8F%96%E5%8E%9F%E5%A7%8B%E5%80%BC%E6%BC%94%E7%A4%BA2\"><span class=\"toc-text\">9.5.2 通过反射获取原始值演示2</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-5-3-%E9%80%9A%E8%BF%87%E5%8F%8D%E5%B0%84%E8%AE%BE%E7%BD%AE%E5%8F%98%E9%87%8F%E7%9A%84%E5%80%BC\"><span class=\"toc-text\">9.5.3 通过反射设置变量的值</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#9-5-3-1-%E9%80%9A%E8%BF%87Value%E4%BF%AE%E6%94%B9%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E7%9A%84%E5%80%BC\"><span class=\"toc-text\">9.5.3.1 通过Value修改原始数据的值</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#9-5-3-2-%E9%80%9A%E8%BF%87Value%E4%BF%AE%E6%94%B9Slice\"><span class=\"toc-text\">9.5.3.2 通过Value修改Slice</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#9-5-3-3-%E9%80%9A%E8%BF%87Value%E4%BF%AE%E6%94%B9map\"><span class=\"toc-text\">9.5.3.3 通过Value修改map</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#9-6-%E7%BB%93%E6%9E%84%E4%BD%93%E5%8F%8D%E5%B0%84\"><span class=\"toc-text\">9.6 结构体反射</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-6-1-%E4%B8%8E%E7%BB%93%E6%9E%84%E4%BD%93%E7%9B%B8%E5%85%B3%E7%9A%84%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">9.6.1 与结构体相关的方法</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-6-2-StructField%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">9.6.2 StructField类型</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-6-3-%E7%BB%93%E6%9E%84%E4%BD%93%E5%8F%8D%E5%B0%84%E7%A4%BA%E4%BE%8B\"><span class=\"toc-text\">9.6.3 结构体反射示例</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#9-7-%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0%E3%80%81%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">9.7 调用函数、成员方法</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-7-1-%E8%B0%83%E7%94%A8%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">9.7.1 调用函数</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-7-2-%E8%B0%83%E7%94%A8%E6%88%90%E5%91%98%E6%96%B9%E6%B3%95\"><span class=\"toc-text\">9.7.2 调用成员方法</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#9-8-%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1\"><span class=\"toc-text\">9.8 创建对象</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-8-1-%E5%88%9B%E5%BB%BAstruct\"><span class=\"toc-text\">9.8.1 创建struct</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-8-2-%E5%88%9B%E5%BB%BAslice\"><span class=\"toc-text\">9.8.2 创建slice</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#9-8-3-%E5%88%9B%E5%BB%BAmap\"><span class=\"toc-text\">9.8.3 创建map</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E5%8D%81%EF%BC%9A%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B\"><span class=\"toc-text\">模块十：并发编程</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">10.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-2-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8goroutine\"><span class=\"toc-text\">10.2 为什么要使用goroutine</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-3-%E8%BF%9B%E7%A8%8B%E3%80%81%E7%BA%BF%E7%A8%8B%E4%BB%A5%E5%8F%8A%E5%B9%B6%E8%A1%8C%E3%80%81%E5%B9%B6%E5%8F%91\"><span class=\"toc-text\">10.3 进程、线程以及并行、并发</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-3-1-%E5%85%B3%E4%BA%8E%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B\"><span class=\"toc-text\">10.3.1 关于进程和线程</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-3-2-%E5%85%B3%E4%BA%8E%E5%B9%B6%E8%A1%8C%E5%92%8C%E5%B9%B6%E5%8F%91\"><span class=\"toc-text\">10.3.2 关于并行和并发</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-4-Golang%E4%B8%AD%E7%9A%84%E5%8D%8F%E7%A8%8B%EF%BC%88goroutine%EF%BC%89%E4%BB%A5%E5%8F%8A%E4%B8%BB%E7%BA%BF%E7%A8%8B\"><span class=\"toc-text\">10.4 Golang中的协程（goroutine）以及主线程</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-5-Goroutine%E7%9A%84%E4%BD%BF%E7%94%A8%E4%BB%A5%E5%8F%8Async-WaitGroup\"><span class=\"toc-text\">10.5 Goroutine的使用以及sync.WaitGroup</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-6-%E5%90%AF%E5%8A%A8%E5%A4%9A%E4%B8%AAGoroutine\"><span class=\"toc-text\">10.6 启动多个Goroutine</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-7-%E8%AE%BE%E7%BD%AEGolang%E5%B9%B6%E8%A1%8C%E8%BF%90%E8%A1%8C%E7%9A%84%E6%97%B6%E5%80%99%E5%8D%A0%E7%94%A8%E7%9A%84CPU%E6%95%B0%E9%87%8F\"><span class=\"toc-text\">10.7 设置Golang并行运行的时候占用的CPU数量</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-8-Goroutine%E7%BB%9F%E8%AE%A1%E7%B4%A0%E6%95%B0\"><span class=\"toc-text\">10.8 Goroutine统计素数</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-9-Channel%E7%AE%A1%E9%81%93\"><span class=\"toc-text\">10.9 Channel管道</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-9-1-channel%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">10.9.1 channel类型</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-9-2-%E5%88%9B%E5%BB%BAchannel\"><span class=\"toc-text\">10.9.2 创建channel</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-9-3-channel%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">10.9.3 channel操作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#10-9-3-1-%E5%8F%91%E9%80%81%EF%BC%88%E5%B0%86%E6%95%B0%E6%8D%AE%E6%94%BE%E5%9C%A8%E7%AE%A1%E9%81%93%E5%86%85%EF%BC%89\"><span class=\"toc-text\">10.9.3.1 发送（将数据放在管道内）</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#10-9-3-2-%E6%8E%A5%E6%94%B6%EF%BC%88%E4%BB%8E%E7%AE%A1%E9%81%93%E5%86%85%E5%8F%96%E5%80%BC%EF%BC%89\"><span class=\"toc-text\">10.9.3.2 接收（从管道内取值）</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#10-9-3-3-%E5%85%B3%E9%97%AD%E7%AE%A1%E9%81%93\"><span class=\"toc-text\">10.9.3.3 关闭管道</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-9-4-%E7%AE%A1%E9%81%93%E9%98%BB%E5%A1%9E\"><span class=\"toc-text\">10.9.4 管道阻塞</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#10-9-4-1-%E6%97%A0%E7%BC%93%E5%86%B2%E7%9A%84%E7%AE%A1%E9%81%93\"><span class=\"toc-text\">10.9.4.1 无缓冲的管道</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#10-9-4-2-%E6%9C%89%E7%BC%93%E5%86%B2%E7%9A%84%E7%AE%A1%E9%81%93\"><span class=\"toc-text\">10.9.4.2 有缓冲的管道</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-9-5-for-range%E4%BB%8E%E7%AE%A1%E9%81%93%E5%BE%AA%E7%8E%AF%E5%8F%96%E5%80%BC\"><span class=\"toc-text\">10.9.5 for range从管道循环取值</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-10-Goroutine%E7%BB%93%E5%90%88Channel%E7%AE%A1%E9%81%93\"><span class=\"toc-text\">10.10 Goroutine结合Channel管道</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-11-%E5%8D%95%E5%90%91%E7%AE%A1%E9%81%93\"><span class=\"toc-text\">10.11 单向管道</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-12-select%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8\"><span class=\"toc-text\">10.12 select多路复用</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-13-Golang%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8%E5%92%8C%E9%94%81\"><span class=\"toc-text\">10.13 Golang并发安全和锁</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-13-1-%E4%BA%92%E6%96%A5%E9%94%81\"><span class=\"toc-text\">10.13.1 互斥锁</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#10-13-2-%E8%AF%BB%E5%86%99%E4%BA%92%E6%96%A5%E9%94%81\"><span class=\"toc-text\">10.13.2 读写互斥锁</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#10-14-Goroutine-Recover%E8%A7%A3%E5%86%B3%E5%8D%8F%E7%A8%8B%E4%B8%AD%E5%87%BA%E7%8E%B0%E7%9A%84Panic\"><span class=\"toc-text\">10.14 Goroutine Recover解决协程中出现的Panic</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E5%8D%81%E4%B8%80%EF%BC%9A%E5%8C%85%E4%B8%8E%E5%B7%A5%E7%A8%8B%E5%8C%96\"><span class=\"toc-text\">模块十一：包与工程化</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#11-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">11.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#11-2-Golang%E4%B8%AD%E5%8C%85%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">11.2 Golang中包的介绍和定义</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#11-3-Golang%E5%8C%85%E7%AE%A1%E7%90%86%E5%B7%A5%E5%85%B7go-mod\"><span class=\"toc-text\">11.3 Golang包管理工具go mod</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#11-3-1-go-mod-init%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE\"><span class=\"toc-text\">11.3.1 go mod init初始化项目</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#11-3-2-go-mod%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4\"><span class=\"toc-text\">11.3.2 go mod其他命令</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#11-4-Golang%E4%B8%AD%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8C%85\"><span class=\"toc-text\">11.4 Golang中自定义包</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#11-4-1-%E5%AE%9A%E4%B9%89%E4%B8%80%E4%B8%AA%E5%8C%85\"><span class=\"toc-text\">11.4.1 定义一个包</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#11-4-2-%E5%AF%BC%E5%85%A5%E4%B8%80%E4%B8%AA%E5%8C%85\"><span class=\"toc-text\">11.4.2 导入一个包</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#11-4-2-1-%E5%8D%95%E8%A1%8C%E5%AF%BC%E5%85%A5\"><span class=\"toc-text\">11.4.2.1 单行导入</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#11-4-2-2-%E5%A4%9A%E8%A1%8C%E5%AF%BC%E5%85%A5\"><span class=\"toc-text\">11.4.2.2 多行导入</span></a></li><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#11-4-2-3-%E5%8C%BF%E5%90%8D%E5%AF%BC%E5%85%A5%E5%8C%85\"><span class=\"toc-text\">11.4.2.3 匿名导入包</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#11-4-3-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8C%85%E5%90%8D\"><span class=\"toc-text\">11.4.3 自定义包名</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#11-5-Golang%E4%B8%ADinit-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">11.5 Golang中init()初始化函数</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#11-5-1-init-%E5%87%BD%E6%95%B0%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">11.5.1 init()函数介绍</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#11-5-2-init-%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F\"><span class=\"toc-text\">11.5.2 init()函数执行顺序</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#11-6-Golang%E4%B8%AD%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%8C%85\"><span class=\"toc-text\">11.6 Golang中使用第三方包</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A8%A1%E5%9D%97%E5%8D%81%E4%BA%8C%EF%BC%9A%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">模块十二：文件管理</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12-1-%E5%AD%A6%E4%B9%A0%E7%9B%AE%E6%A0%87\"><span class=\"toc-text\">12.1 学习目标</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12-2-%E7%9B%B8%E5%85%B3API\"><span class=\"toc-text\">12.2 相关API</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12-3-%E6%89%93%E5%BC%80%E5%92%8C%E5%85%B3%E9%97%AD%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">12.3 打开和关闭文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-3-1-os-Open\"><span class=\"toc-text\">12.3.1 os.Open()</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-3-2-os-OpenFile\"><span class=\"toc-text\">12.3.2 os.OpenFile()</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12-4-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">12.4 读取文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-4-1-file-Read-%E5%92%8Cfile-ReadAt\"><span class=\"toc-text\">12.4.1 file.Read()和file.ReadAt()</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-6\"><a class=\"toc-link\" href=\"#12-4-1-1-%E5%BE%AA%E7%8E%AF%E8%AF%BB%E5%8F%96\"><span class=\"toc-text\">12.4.1.1 循环读取</span></a></li></ol></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-4-2-bufio-NewReader\"><span class=\"toc-text\">12.4.2 bufio.NewReader()</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-4-3-ioutil-ReadFile-%EF%BC%88Go-1-16%E5%B7%B2%E5%BA%9F%E5%BC%83io-ioutil%E5%8C%85%EF%BC%89\"><span class=\"toc-text\">12.4.3 ioutil.ReadFile()（Go 1.16已废弃io&#x2F;ioutil包）</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12-5-%E5%86%99%E5%85%A5%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">12.5 写入文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-5-1-file-Write-%E5%92%8Cfile-WriteString\"><span class=\"toc-text\">12.5.1 file.Write()和file.WriteString()</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-5-2-bufio-NewWriter\"><span class=\"toc-text\">12.5.2 bufio.NewWriter()</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-5-3-ioutil-WriteFile-%EF%BC%88Go-1-16%E5%B7%B2%E5%BA%9F%E5%BC%83io-ioutil%E5%8C%85%EF%BC%89\"><span class=\"toc-text\">12.5.3 ioutil.WriteFile()（Go 1.16已废弃io&#x2F;ioutil包）</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12-6-%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">12.6 拷贝文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-6-1-%E7%AC%AC%E4%B8%80%E7%A7%8D%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6%E6%96%B9%E6%B3%95%EF%BC%9Aioutil%E5%8C%85%E8%BF%9B%E8%A1%8C%E6%8B%B7%E8%B4%9D\"><span class=\"toc-text\">12.6.1 第一种拷贝文件方法：ioutil包进行拷贝</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-6-2-%E7%AC%AC%E4%BA%8C%E7%A7%8D%E6%8B%B7%E8%B4%9D%E6%96%87%E4%BB%B6%E6%96%B9%E6%B3%95%EF%BC%9A%E6%96%87%E4%BB%B6%E6%B5%81%E7%9A%84%E6%96%B9%E5%BC%8F%E6%8B%B7%E8%B4%9D\"><span class=\"toc-text\">12.6.2 第二种拷贝文件方法：文件流的方式拷贝</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12-7-%E9%87%8D%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">12.7 重命名文件</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12-8-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">12.8 创建目录</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-8-1-%E4%B8%80%E6%AC%A1%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">12.8.1 一次创建一个目录</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-8-2-%E4%B8%80%E6%AC%A1%E5%88%9B%E5%BB%BA%E5%A4%9A%E4%B8%AA%E7%9B%AE%E5%BD%95\"><span class=\"toc-text\">12.8.2 一次创建多个目录</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#12-9-%E5%88%A0%E9%99%A4%E7%9B%AE%E5%BD%95%E5%92%8C%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">12.9 删除目录和文件</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-9-1-%E5%88%A0%E9%99%A4%E4%B8%80%E4%B8%AA%E7%9B%AE%E5%BD%95%E6%88%96%E8%80%85%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">12.9.1 删除一个目录或者文件</span></a></li><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#12-9-2-%E4%B8%80%E6%AC%A1%E5%88%A0%E9%99%A4%E5%A4%9A%E4%B8%AA%E7%9B%AE%E5%BD%95%E6%88%96%E8%80%85%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">12.9.2 一次删除多个目录或者文件</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%90%8E%E8%AE%B0\"><span class=\"toc-text\">后记</span></a>","author":{"name":"Stephen","slug":"blog-author","avatar":"../img/logo.png","link":"/","description":"Love and Share","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"Tomcat组成与工作原理","uid":"df4a2b3e83ff0d1bcb88dc96e346c071","slug":"csdn/Tomcat组成与工作原理","date":"2023-10-10T14:43:18.000Z","updated":"2025-02-17T01:58:21.606Z","comments":true,"path":"api/articles/csdn/Tomcat组成与工作原理.json","keywords":"Stephen web3","cover":[],"text":" 目录 什么是tomcat Servlet容器 Servlet生命周期 Tomcat各类Connector对比 什么是tomcat开源的 Java Web 应用...","permalink":"/post/csdn/Tomcat组成与工作原理","photos":[],"count_time":{"symbolsCount":"11k","symbolsTime":"10 mins."},"categories":[{"name":"面试","slug":"面试","count":5,"path":"api/categories/面试.json"}],"tags":[{"name":"tomcat java","slug":"tomcat-java","count":1,"path":"api/tags/tomcat-java.json"}],"author":{"name":"Stephen","slug":"blog-author","avatar":"../img/logo.png","link":"/","description":"Love and Share","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"限流的场景和应用","uid":"1088266219777eea7a5e1871adc5dc26","slug":"csdn/限流的场景和应用","date":"2023-06-25T07:36:34.000Z","updated":"2025-02-17T01:58:21.581Z","comments":true,"path":"api/articles/csdn/限流的场景和应用.json","keywords":"Stephen web3","cover":null,"text":" 目录 应用场景 常见策略 常用技术 代码实现 计数器 滑动窗口 漏桶算法 令牌桶算法 Guava RateLimiter 优缺点 应用场景 工具类封装 应用场...","permalink":"/post/csdn/限流的场景和应用","photos":[],"count_time":{"symbolsCount":"3.9k","symbolsTime":"4 mins."},"categories":[{"name":"java","slug":"java","count":6,"path":"api/categories/java.json"}],"tags":[{"name":"java","slug":"java","count":2,"path":"api/tags/java.json"}],"author":{"name":"Stephen","slug":"blog-author","avatar":"../img/logo.png","link":"/","description":"Love and Share","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}